/* ================================
   MODERN DESIGN SYSTEM
   ================================ */

:root {
  /* Colors */
  --bg-primary: #ffffff;
  --bg-secondary: #ffffff;
  --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --accent-primary: #6366f1;
  --accent-secondary: #8b5cf6;
  --accent-gradient: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
  --text-primary: #1a1a2e;
  --text-secondary: #64748b;
  --text-muted: #94a3b8;
  --border-color: rgba(0, 0, 0, 0.06);
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.04);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
  --shadow-lg: 0 8px 30px rgba(0, 0, 0, 0.12);
  --shadow-glow: 0 0 20px rgba(99, 102, 241, 0.3);
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 20px;
  --radius-full: 9999px;
  --transition-fast: 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-normal: 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

* {
  box-sizing: border-box;
}

/* === GLOBAL PERFORMANCE OPTIMIZATIONS === */
html {
  /* Smooth scrolling for all anchor links and scroll behaviors */
  scroll-behavior: smooth;
  /* Prevent layout shifts */
  text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  /* Deshabilitar zoom en móviles - protección adicional */
  touch-action: pan-x pan-y;
  -ms-touch-action: pan-x pan-y;
}

html,
body {
  height: 100%;
  margin: 0;
  font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: var(--bg-primary);
  color: var(--text-primary);
  -webkit-font-smoothing: antialiased;
  /* Prevenir zoom en mobile apps */
  touch-action: pan-x pan-y;
  -ms-touch-action: pan-x pan-y;
  -moz-osx-font-smoothing: grayscale;
  /* Improve text rendering */
  text-rendering: optimizeLegibility;
  /* Prevent horizontal overflow and improve touch scrolling */
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
}

#app {
  height: 100%;
  display: flex;
  flex-direction: column;
}

/* === CONTENEDOR CENTRADO: CASA + BARRA === */
.top-bar-wrapper {
  position: absolute;
  top: 20px;
  left: calc(50% - 300px);
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 10px;
  z-index: 1000;
}

/* Barra flotante centrada — estilo flat */
.top-bar {
  background: transparent;
  padding: 12px 16px;
  border-radius: 26px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  border: none;
  box-shadow: none;
}

/* Estado normal del botÃ³n */
#locateBtn {
  transition: background 0.2s ease, color 0.2s ease, transform 0.15s ease;
}

/* Estado ACTIVO cuando estÃ¡ siguiendo en tiempo real */
#locateBtn.tracking {
  background: #ff966a;
  border-color: #e07b50;
  color: #ffffff;
  transform: scale(1.03);
}

/* Hover cuando activo */
#locateBtn.tracking:hover {
  background: #ff8a58;
}

.logo {
  display: none;
}

.search-form {
  width: 520px;
  display: flex;
  align-items: center;
  gap: 12px;
  margin: 0 auto;
}

.search-input-wrapper {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 16px;
  background: rgba(255, 255, 255, 0.92);
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.88);
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.7),
    0 6px 16px rgba(0, 0, 0, 0.08);
}

.search-input-wrapper input {
  border: none;
  outline: none;
  background: transparent;
  flex: 1;
  font-size: 0.97rem;
  color: #0f172a;
}

.search-input-wrapper input::placeholder {
  color: #94a3b8;
}

.search-input-wrapper span {
  font-size: 1rem;
  color: #6b7280;
  opacity: 0.95;
}

button {
  border: none;
  border-radius: 16px;
  padding: 10px 18px;
  min-height: 44px;
  font-size: 0.9rem;
  cursor: pointer;
  background: #f7f8fb;
  color: #0f172a;
  border: 1px solid rgba(15, 23, 42, 0.05);
  transition: transform 0.15s cubic-bezier(0.4, 0, 0.2, 1),
    box-shadow 0.15s cubic-bezier(0.4, 0, 0.2, 1),
    background 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  white-space: nowrap;
  /* GPU acceleration for smooth animations */
  will-change: transform;
  transform: translateZ(0);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

button.secondary {
  background: linear-gradient(135deg, #8fd3c4, #6ec0a6);
  border: none;
  color: #ffffff;
  box-shadow: 0 8px 20px rgba(110, 192, 166, 0.35);
}

button:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
  background: #ffffff;
}

button.secondary:hover {
  background: linear-gradient(135deg, #85cdbb, #5fb89f);
}

/* Botones de control del mapa - resetear estilos globales */
.map-control-btn {
  padding: 0 !important;
  min-height: auto !important;
  border-radius: 8px !important;
  box-shadow: none !important;
  will-change: auto !important;
  transform: none !important;
}

#btn-3d-toggle {
  background: white !important;
}

.map-control-btn:hover {
  transform: none !important;
  box-shadow: none !important;
}

#btn-3d-toggle:hover {
  background: #f5f5f5 !important;
}

.content {
  flex: 1;
  display: flex;
  min-height: 0;
  background: #ffffff;
  border-left: none;
  border-right: none;
}

#map {
  flex: 1;
  height: 100%;
  z-index: 1;
}


/* BotÃ³n de reset/mapa mejorado */
.reset-btn {
  width: 54px;
  height: 54px;
  border-radius: 25px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;

  background: rgba(255, 255, 255, 0.35);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);

  color: #3a3a3a;
  cursor: pointer;
  transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1),
    background 0.2s cubic-bezier(0.4, 0, 0.2, 1),
    box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);

  flex-shrink: 0;
  /* GPU acceleration */
  will-change: transform;
  transform: translateZ(0);
}

.reset-btn-icon {
  width: 32px;
  height: 32px;
  object-fit: contain;
  pointer-events: none;
}

.reset-btn:hover {
  background: rgba(255, 255, 255, 0.85);
  transform: scale(1.05) translateZ(0);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
}

.reset-btn:active {
  transform: scale(0.95) translateZ(0);
}



@media (max-width: 768px) {
  .top-bar-wrapper {
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    align-items: center;
    gap: 10px;
    z-index: 1000;
  }

  .top-bar {
    width: 100%;
  }

  .search-form {
    width: 100%;
    flex: 1;
  }

  .layers-toggle {
    top: 70px;
  }

  .layers-panel {
    top: 110px;
    width: 80vw;
  }

  .search-input-wrapper input:focus::placeholder {
    opacity: 0;
  }

  .search-input-wrapper input:focus {
    caret-color: #ffffff;
  }
}

/* Legacy place-label (backup) */
.place-label {
  text-shadow:
    -1px -1px 0 #000,
    1px -1px 0 #000,
    -1px 1px 0 #000,
    1px 1px 0 #000,
    0 2px 4px rgba(0, 0, 0, 0.9);
}

/* ================================
   MODERN SCHOOL MARKER LABELS
   ================================ */

.gm-style .school-marker-label {
  /* Modern glassmorphism pill */
  background: rgba(255, 255, 255, 0.92) !important;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);

  padding: 6px 14px !important;
  border-radius: 20px !important;

  /* Elegant shadow */
  box-shadow:
    0 2px 8px rgba(0, 0, 0, 0.12),
    0 1px 2px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.9) !important;

  /* Typography */
  font-family: 'Inter', 'SF Pro Display', system-ui, -apple-system, sans-serif !important;
  font-size: 12px !important;
  font-weight: 600 !important;
  letter-spacing: 0.02em !important;
  color: #1f2937 !important;

  /* Subtle border */
  border: 1px solid rgba(0, 0, 0, 0.06) !important;

  /* Positioning */
  white-space: nowrap;
  transform: translateY(4px);

  /* Smooth transitions */
  transition: all 0.2s ease;
}

/* GRADO DE LAS VÃAS */
.gm-style .grade-label {
  background: rgba(0, 0, 0, 0);
  padding: 2px 6px;
  border-radius: 6px;

  font-size: 13px;
  font-weight: 700;
  color: #ffffff !important;
  -webkit-text-stroke: 0.25px #000;

  white-space: nowrap;

  transform: translate(-50%, -22px);
  position: relative;
  display: inline-block;
  pointer-events: none;

  z-index: 999999 !important;

  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
}

/* NOMBRE DEL SECTOR - Pastel Style */
.gm-style .sector-label {
  padding: 6px 14px;
  border-radius: 16px;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  letter-spacing: 0.3px;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", sans-serif;
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(8px);

  transform: translate(-50%, -22px);
  position: relative;
  pointer-events: none;
  z-index: 999999 !important;
  text-shadow: none;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
}

/* Parking */
.gm-style .parking-label {
  font-size: 32px;
  line-height: 1;
  transform: translate(-50%, -50%);
  text-shadow:
    0px 1px 2px rgba(0, 0, 0, 0.8),
    0px 0px 4px rgba(0, 0, 0, 0.6);
  pointer-events: none;
  z-index: 999999 !important;
}

/* Popup parking */
.gm-style .parking-popup {
  max-width: 300px;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", sans-serif;
  padding: 20px;
}

.gm-style .parking-popup-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 12px;
}

.gm-style .parking-popup-header strong {
  font-size: 12px;
  font-weight: 600;
  color: #3b82f6;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  background: #eff6ff;
  padding: 4px 10px;
  border-radius: 20px;
}

.gm-style .parking-popup-title {
  margin: 0 0 8px;
  font-size: 20px;
  font-weight: 700;
  color: #111827;
  text-align: left;
}

.gm-style .parking-popup-description {
  margin: 0 0 16px;
  font-size: 14px;
  color: #6b7280;
  text-align: left;
  line-height: 1.5;
}

.gm-style .parking-upload-section {
  margin: 16px 0;
  padding: 12px;
  background: #f9fafb;
  border-radius: 12px;
  text-align: center;
}

.gm-style .parking-upload-btn {
  width: 100%;
  padding: 12px 16px;
  border-radius: 10px;
  background: #111827;
  color: #fff;
  font-size: 14px;
  font-weight: 600;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
}

.gm-style .parking-upload-btn:hover {
  background: #1f2937;
  transform: translateY(-1px);
}

.gm-style .parking-upload-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

.gm-style .parking-popup-actions {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 16px 0 4px;
}

.gm-style .parking-directions-btn {
  width: 100%;
  padding: 14px 20px;
  border-radius: 12px;
  background: linear-gradient(135deg, #3b82f6, #2563eb);
  color: #fff;
  font-size: 15px;
  font-weight: 600;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
}

.gm-style .parking-directions-btn:hover {
  box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3);
  transform: translateY(-2px);
}

.gm-style .parking-dir.feed-map-btn:hover {
  background: rgba(99, 102, 241, 0.15);
  transform: translateY(-1px);
}

/* ================================
   MULTI-FORMAT POST STYLES
   ================================ */

/* Text-only posts */
.feed-card-text {
  /* Clean white background, no border */
}

.feed-text-content {
  padding: 0;
  background: transparent;
}

.feed-text-title {
  font-size: 18px;
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: 12px;
  line-height: 1.3;
}

.feed-text-body {
  font-size: 15px;
  line-height: 1.7;
  color: var(--text-secondary);
  margin: 0;
}

/* Article posts */
.feed-card-article .feed-image-container {
  position: relative;
}

.feed-card-article .feed-image {
  filter: brightness(0.95);
}

.feed-article-content {
  padding: 20px;
  background: #fff;
}

.feed-article-title {
  font-size: 20px;
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: 14px;
  line-height: 1.3;
  letter-spacing: -0.02em;
}

.feed-article-body {
  font-size: 15px;
  line-height: 1.8;
  color: var(--text-secondary);
  margin: 0;
}

/* Ascensions posts - Flat design */
.feed-card-ascensions {
  /* No border */
}

.feed-ascensions-content {
  padding: 16px 0;
  background: transparent;
}

.feed-ascensions-title {
  font-size: 18px;
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: 14px;
}

.feed-ascensions-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.feed-ascension-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 14px;
  background: #fff;
  border-radius: 10px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
}

.ascension-grade-badge {
  padding: 4px 10px;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 700;
  color: #fff;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-width: 40px;
  text-align: center;
}

.ascension-route-name {
  flex: 1;
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
}

.ascension-style {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 4px 8px;
  border-radius: 4px;
  background: #e0e0e0;
  color: #666;
}

.ascension-style.redpoint {
  background: #ffebee;
  color: #c62828;
}

.ascension-style.flash {
  background: #fff3e0;
  color: #ef6c00;
}

.ascension-style.onsight {
  background: #e8f5e9;
  color: #2e7d32;
}

.ascension-style.proyecto {
  background: #e3f2fd;
  color: #1565c0;
}

/* ================================
   POPUP DE VÃAS (MODERNO Y LIMPIO)
   ================================ */

.gm-style .route-popup {
  max-width: 340px;
  padding: 20px;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", sans-serif;
  font-size: 14px;
  line-height: 1.5;
  text-align: left;
}

/* Cabecera de la vía */
.gm-style .route-popup .route-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 12px;
}

/* Nombre de la vía */
.gm-style .route-popup h3 {
  margin: 0;
  font-size: 20px;
  font-weight: 700;
  color: #111827;
  letter-spacing: -0.4px;
  line-height: 1.3;
}

/* Grado badge */
.gm-style .route-popup .route-grade {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin: 0 0 16px;
  padding: 6px 14px;
  background: linear-gradient(135deg, #10b981, #059669);
  color: white;
  font-size: 14px;
  font-weight: 700;
  border-radius: 20px;
}

/* Texto descriptivo */
.gm-style .route-popup .route-info {
  margin: 0 0 16px;
  font-size: 14px;
  color: #6b7280;
  line-height: 1.6;
}

/* Info items con iconos */
.gm-style .route-popup .route-info-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 0;
  border-bottom: 1px solid #f3f4f6;
}

.gm-style .route-popup .route-info-item:last-child {
  border-bottom: none;
}

.gm-style .route-popup .route-info-icon {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f9fafb;
  border-radius: 12px;
  flex-shrink: 0;
}

.gm-style .route-popup .route-info-icon img {
  width: 24px;
  height: 24px;
  object-fit: contain;
}

.gm-style .route-popup .route-info-text {
  font-size: 15px;
  color: #374151;
  font-weight: 500;
}

/* Contenedor de la foto */
.gm-style .route-popup-photo {
  margin: 16px 0;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
}

/* Imagen dentro del popup */
.gm-style .route-popup-photo img {
  width: 100%;
  border-radius: 16px;
  display: block;
  transition: transform 0.3s ease;
  cursor: pointer;
}

.gm-style .route-popup-photo img:hover {
  transform: scale(1.02);
}

/* Overlay de foto grande */
.route-photo-overlay {
  position: fixed;
  inset: 0;
  background: rgba(255, 255, 255, 0.85);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999999;
}

.route-photo-overlay.hidden {
  display: none;
}

/* El contenedor ocupa TODA la ventana y centra la imagen */
.route-photo-overlay-inner {
  position: relative;
  width: 100vw;
  height: 100vh;
  padding: 24px;
  box-sizing: border-box;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* La imagen se adapta siempre a la ventana sin recortarse */
.route-photo-overlay-inner img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
  border-radius: 10px;
}

#route-photo-close {
  position: absolute;
  top: 12px;
  right: 12px;
  width: 36px;
  height: 36px;
  min-width: 36px;
  min-height: 36px;
  max-width: 36px;
  max-height: 36px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.95);
  border: none;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 20px;
  font-weight: 400;
  color: #374151;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  z-index: 10;
  transition: all 0.2s ease;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  line-height: 1;
  padding: 0;
  box-sizing: border-box;
}

#route-photo-close:hover {
  background: #fff;
  color: #111;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

#route-photo-close:active {
  transform: scale(0.92);
}

/* Quita cualquier icono interno de Google */
.gm-ui-hover-effect span {
  display: none !important;
}

/* Botón cerrar estilo flotante */
.gm-ui-hover-effect {
  position: absolute !important;
  top: 16px !important;
  right: 16px !important;
  width: 28px !important;
  height: 28px !important;
  min-width: 28px !important;
  min-height: 28px !important;
  max-width: 28px !important;
  max-height: 28px !important;
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  cursor: pointer !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  z-index: 1000 !important;
  padding: 0 !important;
  box-sizing: border-box !important;
}

/* Dibujamos la X manualmente */
.gm-ui-hover-effect::before {
  content: "×";
  font-size: 18px;
  color: #6b7280;
  font-weight: 400;
  line-height: 1;
  display: block;
  text-align: center;
  pointer-events: none;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

/* Hover estilo Apple */
.gm-ui-hover-effect:hover::before {
  color: #000;
}

/* ================================
   POPUP DE ESCUELA (MODERNO Y LIMPIO)
   ================================ */

.gm-style .school-popup {
  display: block;
  min-width: 300px;
  max-width: 380px;
  padding: 20px;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", sans-serif;
  text-align: left;
}

.gm-style .school-popup h3 {
  margin: 0 0 16px;
  font-size: 22px;
  font-weight: 700;
  color: #111827;
  letter-spacing: -0.4px;
  text-align: left;
  line-height: 1.3;
}

/* Contenedor de botones de escuela */
.gm-style .school-popup-actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin: 20px 0;
}

/* Botones de escuela: modernos */
.gm-style .school-popup-actions button {
  width: 100%;
  padding: 14px 20px;
  border-radius: 12px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  border: none;
  transition: all 0.2s ease;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", sans-serif;
}

.gm-style .school-popup-actions button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
}

.gm-style .school-popup-actions button:active {
  transform: translateY(0);
}

/* Solo para los popups de ESCUELA:
   deja crecer el recuadro en altura y quita el scroll interno */
.gm-style .gm-style-iw-d:has(.school-popup) {
  max-height: none !important;
  overflow-y: visible !important;
  scrollbar-width: none;
}

.gm-style .gm-style-iw-d:has(.school-popup)::-webkit-scrollbar {
  display: none !important;
}

/* ================================
   ESTILOS GLOBALES INFOWINDOW
   ================================ */

/* Contenedor principal del InfoWindow */
.gm-style .gm-style-iw {
  width: auto !important;
  max-width: 380px !important;
}

/* Marco exterior del InfoWindow - diseño moderno */
.gm-style .gm-style-iw-c {
  border-radius: 24px !important;
  padding: 0 !important;
  background: #ffffff !important;
  box-shadow:
    0 12px 40px rgba(0, 0, 0, 0.12),
    0 4px 12px rgba(0, 0, 0, 0.08) !important;
  border: 1px solid rgba(0, 0, 0, 0.04) !important;
}

/* Contenido interno */
.gm-style .gm-style-iw-d {
  overflow: auto !important;
  padding: 0 !important;
  max-height: 70vh !important;
}

/* Ocultar la flecha/pico del InfoWindow */
.gm-style .gm-style-iw-tc {
  display: none !important;
}

/* Botón cerrar del InfoWindow */
.gm-style .gm-ui-hover-effect {
  top: 12px !important;
  right: 12px !important;
  width: 32px !important;
  height: 32px !important;
  background: #f3f4f6 !important;
  border-radius: 50% !important;
  opacity: 1 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  transition: all 0.2s ease !important;
}

.gm-style .gm-ui-hover-effect:hover {
  background: #e5e7eb !important;
}

.gm-style .gm-ui-hover-effect>span {
  display: none !important;
}

#school-go-btn {
  background: #111827;
  color: #fff;
}

#school-go-btn:hover {
  background: #1f2937;
  box-shadow: 0 6px 20px rgba(17, 24, 39, 0.25);
}

#school-visit-btn {
  background: linear-gradient(135deg, #10b981, #059669);
  color: white;
}

#school-visit-btn:hover {
  background: linear-gradient(135deg, #34d399, #10b981);
  box-shadow: 0 6px 20px rgba(16, 185, 129, 0.3);
}

.gm-style .school-popup .school-weather {
  margin: 4px 0 10px;
  font-size: 13px;
  line-height: 1.4;
  opacity: 0.9;
}

/* === NUEVO WIDGET DEL TIEMPO (Horizontal) === */

.weather-widget {
  display: flex;
  align-items: flex-start;
  justify-content: flex-start;
  position: relative;
  margin: 16px 0;
  padding: 16px;
  background: #f9fafb;
  border-radius: 16px;
  gap: 16px;
}

.weather-left-group {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 6px;
}

.weather-main-row {
  display: flex;
  align-items: center;
  gap: 12px;
}

.weather-icon-large {
  font-size: 36px;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}

.weather-icon-large .weather-icon-img {
  width: 48px;
  height: 48px;
  object-fit: contain;
}

.weather-temp-large {
  font-size: 28px;
  font-weight: 300;
  line-height: 1;
  color: #333;
}

.weather-details {
  font-size: 11px;
  color: #666;
  line-height: 1.3;
  /* Ajuste fino para alinear visualmente con el icono */
}

.weather-wind-row {
  display: flex;
  align-items: center;
  gap: 4px;
  position: relative;
}

/* BotÃ³n Ampliar: Icono Chevron junto al viento */
.weather-expand {
  position: absolute;
  left: -24px;
  margin: 0;
  padding: 2px;
  width: 20px;
  height: 20px;

  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;

  background: transparent !important;
  border: none;
  box-shadow: none !important;
  backdrop-filter: none !important;

  color: #999;
  cursor: pointer;
  text-decoration: none;
  transition: color 0.2s ease, transform 0.3s ease;
  /* Smooth rotation */
}

.weather-expand svg {
  width: 16px;
  height: 16px;
}

.weather-expand:hover {
  background: transparent !important;
  box-shadow: none !important;
  color: #555;
  transform: none !important;
  /* Hover no mueve, solo color */
}

.weather-expand.expanded svg {
  transform: rotate(180deg);
  /* Rotar flecha hacia arriba */
  transition: transform 0.3s ease;
}

/* === BLOQUE SEMANAL DESPLEGABLE === */

.weather-week {
  margin-top: 10px;
  padding: 14px 16px;
  border-radius: 14px;
  background: linear-gradient(135deg, #f4f6fb, #e8ecf7);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
  font-size: 13px;
  width: 92%;
  max-width: 360px;
  margin-left: auto;
  margin-right: auto;
  display: block;
  transform: translateX(-6px);

  /* Scrollable with fixed height */
  max-height: 200px;
  overflow-y: auto;
  opacity: 1;
  transition:
    max-height 0.5s ease,
    opacity 0.5s ease,
    margin-top 0.5s ease,
    padding 0.5s ease;
}

.weather-week-hidden {
  /* Colapsado */
  max-height: 0;
  opacity: 0;
  margin-top: 0;
  padding-top: 0;
  padding-bottom: 0;
  pointer-events: none;
}

/* === TARJETAS DE DÃAS (Estilo App del Tiempo) === */

.week-day-card {
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 8px 0 14px 0;
}

.week-day-card:last-child {
  border-bottom: none;
}

.week-day-header {
  font-size: 11px;
  font-weight: 600;
  color: #666;
  margin-bottom: 8px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.week-day-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.week-temps {
  display: flex;
  flex-direction: column;
  gap: 2px;
  font-size: 18px;
  font-weight: 300;
  min-width: 60px;
  flex-shrink: 0;
}

.week-temp-max {
  color: #333;
}

.week-temp-min {
  color: #666;
}

.week-icon {
  font-size: 28px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.week-icon .weather-icon-img {
  width: 36px;
  height: 36px;
  object-fit: contain;
}

.week-details {
  display: flex;
  flex-direction: column;
  gap: 3px;
  font-size: 12px;
  color: #666;
  text-align: right;
  flex-grow: 1;
  min-width: 100px;
}

.week-precip,
.week-wind {
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 4px;
}

.week-precip .precip-icon {
  width: 16px;
  height: 16px;
  object-fit: contain;
  display: inline-block;
  vertical-align: middle;
}



.gm-style .school-popup .school-grades {
  margin: 4px 0 10px;
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.gm-style .school-popup .grade-pill {
  padding: 4px 10px;
  border-radius: 999px;
  background: #f3f4f6;
  font-size: 12px;
  font-weight: 600;
  color: #374151;
}

/* ========= Resumen de grados: gráfica ========= */

.school-grade-chart {
  margin: 16px 0;
  padding: 16px;
  background: #f9fafb;
  border-radius: 16px;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", sans-serif;
  text-align: center;
}

.school-grade-chart-title {
  font-size: 12px;
  font-weight: 600;
  color: #6b7280;
  margin-bottom: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.school-grade-chart-bars {
  display: inline-flex;
  align-items: flex-end;
  justify-content: center;
  gap: 6px;
  padding: 8px 0 4px;
  overflow: visible;
}

.grade-bar {
  position: relative;
  width: 12px;
  border-radius: 4px;
  cursor: pointer;
}

.grade-bar-inner {
  width: 10px;
  border-radius: 6px 6px 2px 2px;
  transition: height 0.3s ease-out, transform 0.2s ease;
}

.grade-bar:hover .grade-bar-inner {
  transform: scaleY(1.05);
}

/* Tooltip */

.grade-tooltip {
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%) translateY(-8px);
  background: #111827;
  color: #fff;
  padding: 6px 10px;
  border-radius: 8px;
  font-size: 11px;
  font-weight: 500;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
  z-index: 2;
  transition: opacity 0.2s ease, transform 0.2s ease;
}

.grade-bar:hover .grade-tooltip {
  opacity: 1;
  transform: translateX(-50%) translateY(-2px);
}

.grade-tooltip-grade {
  display: inline-block;
  padding: 1px 4px;
  border-radius: 3px;
  font-weight: 600;
  margin-right: 4px;
  background: #fff;
  color: #000;
}

.grade-tooltip-count {
  font-weight: 500;
}

.gm-style .parking-photo {
  margin-top: 8px;
}

.gm-style .parking-photo img {
  width: 100%;
  border-radius: 10px;
  display: block;
}


/* Popup parking (maquetado) */
.gm-style .parking-popup {
  max-width: 260px;
  padding: 10px 12px 14px;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
}

/* texto */
.gm-style .parking-popup h3 {
  margin: 0 0 4px;
  font-size: 15px;
}

.gm-style .parking-popup p {
  margin: 0 0 6px;
  font-size: 13px;
}

/* FOTO: que no toque los bordes */
.gm-style .parking-popup-photo {
  margin-top: 8px;
  border-radius: 12px;
  overflow: hidden;
  /* redondeo limpio abajo */
  display: flex;
  justify-content: center;
  align-items: center;
  background: #f0f0f0;
  /* fondo suave por si la imagen no carga o es transparente */
}

.gm-style .parking-popup-photo img {
  width: 100%;
  height: auto;
  display: block;
  object-fit: cover;
}

/* BOTÃ“N: mÃ¡s separado y centrado, sin pegarse al borde */
.gm-style .parking-popup-actions {
  margin-top: 10px;
  display: flex;
  justify-content: center;
}

.gm-style .parking-popup-actions button {
  width: 90%;
  max-width: 220px;
  padding: 9px 14px;
  border-radius: 999px;
  font-size: 14px;
  background: #1a73e8;
  color: #fff;
}

/* ============================================ */
/* === AUTH UI === */
/* ============================================ */

.auth-btn {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1001;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  border: 2px solid rgba(255, 255, 255, 0.8);
  background: rgba(255, 255, 255, 0.25);
  backdrop-filter: blur(10px);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 500;
  color: #333;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  transition: all 0.2s ease;
  padding: 0;
}

.auth-btn:hover {
  background: rgba(255, 255, 255, 0.4);
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.auth-btn svg {
  width: 24px;
  height: 24px;
  color: #555;
}

/* ================================
   MODERN USER PROFILE MENU
   ================================ */

/* User profile wrapper */
.user-profile-wrapper {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1001;
}

/* Profile button wrapper (contains icon/photo) */
/* Profile button wrapper (contains icon/photo) */
.user-photo-btn-wrapper {
  box-sizing: border-box;
  /* Ensure size includes border */
  appearance: none;
  /* Remove default button styles */
  -webkit-appearance: none;
  width: 44px;
  height: 44px;
  border-radius: 50%;
  cursor: pointer;
  border: 2px solid rgba(255, 255, 255, 0.95);
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  /* Centered shadow (no offset) to avoid "descuadrada" look */
  box-shadow: 0 0 15px rgba(0, 0, 0, 0.15);
  transition: all 0.2s ease;
  padding: 0;
  margin: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.user-photo-btn-wrapper:hover {
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
  transform: scale(1.05);
}

/* Fallback icon (person silhouette) */
.user-photo-icon-fallback {
  display: flex;
  align-items: center;
  justify-content: center;
  color: #555;
}

.user-photo-icon-fallback svg {
  width: 22px;
  height: 22px;
}

/* Actual user photo image */
.user-photo-img {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
}

.user-photo-img.hidden {
  display: none;
}

/* Circular profile photo button */
.user-photo-btn {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  object-fit: cover;
  cursor: pointer;
  border: 2px solid rgba(255, 255, 255, 0.9);
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0.2));
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  box-shadow:
    0 4px 16px rgba(0, 0, 0, 0.12),
    0 1px 3px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.6);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  padding: 0;
  display: block;
}

.user-photo-btn:hover {
  box-shadow:
    0 8px 24px rgba(0, 0, 0, 0.18),
    0 2px 6px rgba(0, 0, 0, 0.1);
  transform: scale(1.08);
  border-color: #fff;
}

#user-photo-icon {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: 2px solid rgba(255, 255, 255, 0.9);
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0.2));
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  box-shadow:
    0 4px 16px rgba(0, 0, 0, 0.12),
    0 1px 3px rgba(0, 0, 0, 0.08);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#user-photo-icon:hover {
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.18);
  transform: scale(1.08);
}

#user-photo-icon svg {
  color: #555;
  width: 22px;
  height: 22px;
}

/* Modern Dropdown menu */
.user-dropdown {
  position: absolute;
  top: 56px;
  right: 0;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-radius: 20px;
  padding: 16px;
  box-shadow:
    0 12px 40px rgba(0, 0, 0, 0.15),
    0 4px 12px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(255, 255, 255, 0.6);
  min-width: 260px;
  z-index: 1001;
  animation: dropdownFadeIn 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  /* GPU acceleration for smooth animation */
  will-change: transform, opacity;
  transform: translateZ(0);
}

@keyframes dropdownFadeIn {
  from {
    opacity: 0;
    transform: translateY(-8px) scale(0.96) translateZ(0);
  }

  to {
    opacity: 1;
    transform: translateY(0) scale(1) translateZ(0);
  }
}

.user-dropdown-header {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 8px 4px 16px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.06);
  margin-bottom: 12px;
}

.user-photo-small {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid rgba(0, 0, 0, 0.05);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.user-dropdown-header span {
  font-family: 'Inter', 'SF Pro Display', system-ui, sans-serif;
  font-size: 15px;
  font-weight: 600;
  color: #1a1a2e;
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  letter-spacing: -0.2px;
}

.user-menu-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.menu-item {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  background: transparent;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  font-family: 'Inter', 'SF Pro Display', system-ui, sans-serif;
  font-size: 14px;
  font-weight: 500;
  color: #374151;
  transition: all 0.2s ease;
  text-align: left;
  margin-bottom: 4px;
}

.menu-item:hover {
  background: transparent;
  color: var(--accent-primary);
  transform: none;
  box-shadow: none;
}

.menu-item:active {
  background: transparent;
  transform: none;
}

.menu-item span {
  font-size: 18px;
  opacity: 0.85;
}

.dropdown-divider {
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.08), transparent);
  margin: 10px 8px;
}

.logout-btn {
  width: 100%;
  padding: 12px 16px;
  background: linear-gradient(135deg, #fee2e2, #fecaca);
  border: 1px solid rgba(239, 68, 68, 0.15);
  border-radius: 12px;
  font-family: 'Inter', 'SF Pro Display', system-ui, sans-serif;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  color: #dc2626;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-top: 8px;
}

.logout-btn:hover {
  background: linear-gradient(135deg, #fecaca, #fca5a5);
  color: #b91c1c;
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(220, 38, 38, 0.15);
}

.logout-btn:active {
  transform: translateY(0);
}

/* Modal Styles */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  z-index: 2000;
  display: flex;
  justify-content: center;
  align-items: center;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  /* Smooth appearance */
  animation: modalFadeIn 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  /* GPU acceleration */
  will-change: opacity;
  transform: translateZ(0);
}

@keyframes modalFadeIn {
  from {
    opacity: 0;
    backdrop-filter: blur(0);
  }

  to {
    opacity: 1;
    backdrop-filter: blur(4px);
  }
}

/* Ascent modal appears above other modals */
#ascent-modal {
  z-index: 2100;
}

/* Confirmation modal appears above everything */
#confirm-modal {
  z-index: 2200;
}

.modal-small {
  max-width: 350px;
}

.modal-actions {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  margin-top: 20px;
}

.btn-primary {
  padding: 12px 24px;
  border: none;
  border-radius: 10px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
}

.btn-primary:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

.btn-secondary,
.btn-danger {
  padding: 10px 20px;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-secondary {
  background: #e0e0e0;
  color: #333;
}

.btn-secondary:hover {
  background: #d0d0d0;
}

.btn-danger {
  background: #f44336;
  color: white;
}

.char-count {
  text-align: right;
  font-size: 12px;
  color: #6b7280;
  margin-top: 4px;
}

.form-actions {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  margin-top: 24px;
  padding-top: 20px;
  border-top: 1px solid #f3f4f6;
}

.form-actions button {
  min-width: 100px;
}



/* =========================
   LANDING PAGE - MODERN GLASS DESIGN
   ========================= */

.landing-page {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 2000;
  overflow: hidden;
}

/* Background Layer */
.landing-background {
  position: absolute;
  inset: 0;
  overflow: hidden;
}

.landing-bg-image {
  position: absolute;
  inset: 0;
  background-image: url('https://images.unsplash.com/photo-1526164899963-7e52f9cc9e1b?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxyb2NrJTIwY2xpbWJpbmclMjBvdXRkb29yfGVufDF8fHx8MTc2NTEwNjE5MHww&ixlib=rb-4.1.0&q=80&w=1080');
  background-size: cover;
  background-position: center;
  animation: bgScale 1.5s ease-out;
}

@keyframes bgScale {
  from {
    transform: scale(1.02);
  }

  to {
    transform: scale(1);
  }
}

.landing-bg-blur {
  position: absolute;
  inset: 0;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

.landing-bg-gradient-1 {
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, rgba(15, 23, 42, 0.5) 0%, rgba(30, 41, 59, 0.4) 40%, rgba(15, 23, 42, 0.5) 100%);
}

.landing-bg-gradient-2 {
  position: absolute;
  inset: 0;
  background: linear-gradient(to top, rgba(15, 23, 42, 0.6) 0%, transparent 40%, rgba(15, 23, 42, 0.3) 100%);
}

/* Animated Orbs - GPU Optimized */
.landing-orb {
  position: absolute;
  border-radius: 50%;
  filter: blur(64px);
  pointer-events: none;
  /* GPU acceleration for smooth animations */
  will-change: transform;
  transform: translateZ(0);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

.landing-orb-1 {
  top: 0;
  left: 0;
  width: 500px;
  height: 500px;
  background: radial-gradient(circle, rgba(16, 185, 129, 0.15) 0%, transparent 70%);
  animation: orbFloat1 20s ease-in-out infinite;
  /* Contain to its own layer */
  contain: layout style paint;
}

.landing-orb-2 {
  bottom: 0;
  right: 0;
  width: 500px;
  height: 500px;
  background: radial-gradient(circle, rgba(59, 130, 246, 0.15) 0%, transparent 70%);
  animation: orbFloat2 25s ease-in-out infinite;
  contain: layout style paint;
}

.landing-orb-3 {
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) translateZ(0);
  width: 400px;
  height: 400px;
  background: radial-gradient(circle, rgba(245, 158, 11, 0.1) 0%, transparent 70%);
  animation: orbFloat3 22s ease-in-out infinite;
  contain: layout style paint;
}

@keyframes orbFloat1 {

  0%,
  100% {
    transform: translate3d(0, 0, 0) scale(1);
  }

  50% {
    transform: translate3d(40px, 60px, 0) scale(1.1);
  }
}

@keyframes orbFloat2 {

  0%,
  100% {
    transform: translate3d(0, 0, 0) scale(1);
  }

  50% {
    transform: translate3d(-50px, -40px, 0) scale(1.08);
  }
}

@keyframes orbFloat3 {

  0%,
  100% {
    transform: translate3d(-50%, -50%, 0) scale(1);
  }

  50% {
    transform: translate3d(calc(-50% - 30px), calc(-50% - 20px), 0) scale(1.15);
  }
}

/* Content Wrapper */
.landing-content-wrapper {
  position: relative;
  z-index: 10;
  min-height: 100vh;
}

.landing-container {
  max-width: 1280px;
  margin: 0 auto;
  padding: 16px 24px;
  display: flex;
  align-items: center;
  min-height: 100vh;
}

.landing-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 40px;
  align-items: center;
  width: 100%;
}

@media (min-width: 1024px) {
  .landing-grid {
    grid-template-columns: 1fr 1fr;
  }
}

/* Branding Section */
.landing-branding {
  display: flex;
  flex-direction: column;
  gap: 24px;
  animation: fadeInLeft 0.8s ease-out;
}

@keyframes fadeInLeft {
  from {
    opacity: 0;
    transform: translateX(-50px);
  }

  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.branding-logo-wrapper {
  animation: fadeInDown 0.6s ease-out 0.2s backwards;
}

@keyframes fadeInDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.branding-logo {
  width: 220px;
  height: auto;
  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.5));
}

.branding-text {
  display: flex;
  flex-direction: column;
  gap: 12px;
  animation: fadeInUp 0.6s ease-out 0.4s backwards;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.branding-tagline {
  font-size: 24px;
  font-weight: 500;
  line-height: 1.4;
  color: rgba(255, 255, 255, 0.9);
  max-width: 480px;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.branding-accent-line {
  width: 80px;
  height: 4px;
  background: linear-gradient(90deg, #10b981 0%, #3b82f6 100%);
  border-radius: 2px;
  animation: lineGrow 0.8s ease-out 0.8s backwards;
}

@keyframes lineGrow {
  from {
    width: 0;
  }

  to {
    width: 80px;
  }
}

/* Login Card Container */
.landing-form-container {
  display: flex;
  align-items: center;
  justify-content: center;
  animation: fadeInRight 0.8s ease-out;
}

@media (min-width: 1024px) {
  .landing-form-container {
    justify-content: flex-end;
  }
}

@keyframes fadeInRight {
  from {
    opacity: 0;
    transform: translateX(50px);
  }

  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Glass Morphism Login Card */
.login-card-glass {
  position: relative;
  width: 100%;
  max-width: 480px;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  border-radius: 24px;
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2), 0 2px 8px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  animation: cardFadeIn 0.7s ease-out 0.2s backwards;
}

@keyframes cardFadeIn {
  from {
    opacity: 0;
    transform: translateY(30px) scale(0.95);
  }

  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Animated Border Effect */
.login-card-border-effect {
  position: absolute;
  inset: 0;
  border-radius: 24px;
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(59, 130, 246, 0.1) 50%, rgba(245, 158, 11, 0.2) 100%);
  pointer-events: none;
  animation: borderPulse 4s ease-in-out infinite;
}

@keyframes borderPulse {

  0%,
  100% {
    opacity: 0.3;
  }

  50% {
    opacity: 0.5;
  }
}

/* Card Content */
.login-card-content {
  position: relative;
  padding: 32px 40px;
}

@media (max-width: 640px) {
  .login-card-content {
    padding: 24px 32px;
  }
}

/* Header */
.login-header {
  margin-bottom: 20px;
  animation: fadeInDown 0.4s ease-out 0.3s backwards;
}

.login-title {
  font-size: 28px;
  font-weight: 700;
  line-height: 1.2;
  color: #1e293b;
  margin: 0 0 4px 0;
}

.login-subtitle {
  font-size: 16px;
  font-weight: 400;
  line-height: 1.5;
  color: #64748b;
  margin: 0;
}

/* Responsive adjustments */
@media (max-width: 850px) {
  .landing-content {
    flex-direction: column;
    gap: 30px;
    text-align: center;
  }

  .landing-branding {
    align-items: center;
  }

  .branding-title {
    font-size: 42px;
  }

  .branding-tagline {
    font-size: 18px;
  }

  .login-card-modern {
    max-width: 360px;
  }
}

/* Sidebar (Now Header) */
.login-sidebar {
  width: 100%;
  background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px 16px;
  /* Reduced padding */
  position: relative;
  overflow: hidden;
}

/* Optional: Add a subtle pattern or overlay to sidebar */
.login-sidebar::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle at top right, rgba(255, 255, 255, 0.05) 0%, transparent 60%);
}

.login-logo {
  width: 100%;
  max-width: 140px;
  /* Adjusted logo size for narrower card */
  height: auto;
  object-fit: contain;
  filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.3));
  position: relative;
  z-index: 1;
}

/* Main Content Wrapper */
.login-main-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  padding-bottom: 16px;
  /* Reduced padding */
}

.modal-header-modern {
  background: transparent;
  padding: 16px 16px 0 16px;
  /* Reduced padding */
  text-align: center;
  position: relative;
}

/* Responsive adjustments - simplified since it's already vertical */
@media (max-width: 768px) {
  .login-card-modern {
    max-width: 90%;
  }
}

.modal-header-modern h3 {
  margin: 0;
  font-size: 20px;
  /* Smaller title */
  font-weight: 800;
  color: #111;
  letter-spacing: -0.5px;
}

.close-btn-modern {
  position: absolute;
  top: 16px;
  right: 16px;
  background: #f3f4f6;
  border: none;
  color: #6b7280;
  width: 28px;
  height: 28px;
  min-width: 28px;
  min-height: 28px;
  max-width: 28px;
  max-height: 28px;
  border-radius: 50%;
  font-size: 14px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
  padding: 0;
  box-sizing: border-box;
}

.close-btn-modern:hover {
  background: #e5e7eb;
  color: #111;
}

.login-body-modern {
  padding: 16px;
  /* Reduced padding */
}

/* Social Buttons */
.social-buttons {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.social-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  width: 100%;
  padding: 14px;
  border-radius: 12px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  border: 1px solid #e5e7eb;
  transition: all 0.2s;
  background: white;
  color: #374151;
}

.social-btn:hover {
  background: #f9fafb;
  border-color: #d1d5db;
  transform: translateY(-1px);
}

.social-btn:active {
  transform: translateY(0);
}

.social-btn img,
.social-btn svg {
  width: 20px;
  height: 20px;
}

/* Divider */
.login-divider-modern {
  display: flex;
  align-items: center;
  text-align: center;
  margin: 24px 0;
  color: #9ca3af;
  font-weight: 500;
  font-size: 14px;
}

.login-divider-modern::before,
.login-divider-modern::after {
  content: '';
  flex: 1;
  border-bottom: 1px solid #e5e7eb;
}

.login-divider-modern span {
  padding: 0 16px;
}

/* Form */
.email-login-form {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.input-label {
  font-size: 13px;
  color: #4b5563;
  font-weight: 600;
  margin-bottom: -8px;
  margin-left: 4px;
}

.modern-input {
  padding: 14px 16px;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
  background: #f9fafb;
  font-size: 15px;
  color: #111;
  transition: all 0.2s;
}

.modern-input:focus {
  background: white;
  border-color: #c25e00;
  outline: none;
  box-shadow: 0 0 0 3px rgba(194, 94, 0, 0.1);
}

.checkbox-wrapper {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 4px;
}

.checkbox-wrapper label {
  font-size: 14px;
  color: #4b5563;
  font-weight: 500;
  cursor: pointer;
}

.submit-btn-modern {
  background: #c25e00;
  color: white;
  padding: 16px;
  border-radius: 12px;
  font-weight: 700;
  font-size: 16px;
  border: none;
  cursor: pointer;
  transition: all 0.2s;
  width: 100%;
  margin-top: 8px;
  box-shadow: 0 4px 6px -1px rgba(194, 94, 0, 0.2);
}

.submit-btn-modern:hover {
  background: #d66900;
  transform: translateY(-1px);
  box-shadow: 0 6px 8px -1px rgba(194, 94, 0, 0.3);
}

/* Footer */
.login-footer {
  margin-top: 24px;
  text-align: center;
  border-top: 1px solid #f3f4f6;
  padding-top: 20px;
}

.create-account-text {
  color: #111;
  font-weight: 600;
  font-size: 15px;
  margin-bottom: 12px;
  cursor: pointer;
  transition: color 0.2s;
}

.create-account-text:hover {
  color: #c25e00;
  text-decoration: underline;
}

.terms-text {
  font-size: 12px;
  color: #9ca3af;
  line-height: 1.5;
  max-width: 280px;
  margin: 0 auto;
}

.terms-text a {
  color: #6b7280;
  text-decoration: underline;
  transition: color 0.2s;
}

.terms-text a:hover {
  color: #111;
}

.modal-content {
  background: white;
  padding: 24px;
  border-radius: 16px;
  width: 90%;
  max-width: 400px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  animation: slideUp 0.3s ease;
}

@keyframes slideUp {
  from {
    transform: translateY(20px);
    opacity: 0;
  }

  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.modal-header h3 {
  margin: 0;
  font-size: 18px;
  color: #333;
}

.close-btn {
  background: #f3f4f6;
  border: none;
  font-size: 18px;
  font-weight: 400;
  cursor: pointer;
  color: #6b7280;
  width: 32px;
  height: 32px;
  min-width: 32px;
  min-height: 32px;
  max-width: 32px;
  max-height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  line-height: 1;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  padding: 0;
  box-sizing: border-box;
}

.close-btn:hover {
  background: #e5e7eb;
  color: #374151;
}

.close-btn:active {
  transform: scale(0.95);
}

.form-group {
  margin-bottom: 16px;
}

.form-group label {
  display: block;
  margin-bottom: 6px;
  font-size: 13px;
  font-weight: 500;
  color: #555;
}

.form-group input,
.form-group select,
.form-group textarea {
  width: 100%;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 8px;
  font-size: 14px;
  transition: border-color 0.2s;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
  border-color: #1a73e8;
  outline: none;
}

.route-name-display {
  font-weight: 700;
  font-size: 16px;
  color: #1a73e8;
  padding: 4px 0;
}

.submit-btn {
  width: 100%;
  padding: 12px;
  background: #1a73e8;
  color: white;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  margin-top: 10px;
}

.submit-btn:hover {
  background: #1557b0;
}

/* Star Rating */
.star-rating {
  display: flex;
  flex-direction: row-reverse;
  justify-content: flex-end;
  gap: 4px;
}

.star-rating input {
  display: none;
}

.star-rating label {
  font-size: 24px;
  color: #ddd;
  cursor: pointer;
  margin: 0;
}

.star-rating input:checked~label,
.star-rating label:hover,
.star-rating label:hover~label {
  color: #ffd700;
}

.modal-large {
  max-width: 600px;
  max-height: 90vh;
  width: 90%;
  display: flex;
  flex-direction: column;
}

.view-post-body {
  overflow-y: auto;
  max-height: calc(90vh - 60px);
}

.view-post-body .feed-card-header {
  position: sticky;
  top: 0;
  background: white;
  z-index: 10;
}

.routes-list {
  flex: 1;
  overflow-y: auto;
  padding: 10px 0;
}

.route-card {
  background: #f9f9f9;
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 12px;
  border: 1px solid #eee;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.route-card-main {
  flex: 1;
}

.route-card-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

.route-card-title {
  font-weight: 600;
  font-size: 15px;
  color: #333;
  line-height: 1.4;
}

.route-card-grade-inline {
  background: #333;
  color: white;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 700;
  display: inline-block;
  margin: 0 4px;
}

.route-card-grade {
  background: #333;
  color: white;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 700;
}

.route-card-details {
  font-size: 13px;
  color: #666;
  display: flex;
  gap: 12px;
}

.route-card-style {
  display: flex;
  align-items: center;
  gap: 4px;
}

.route-card-date {
  color: #888;
}

.route-card-rating {
  color: #ffd700;
  font-size: 14px;
}

.route-card-actions {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 8px;
}

.route-card-buttons {
  display: flex;
  gap: 6px;
}

.edit-ascent-btn,
.delete-ascent-btn {
  background: transparent;
  border: none;
  font-size: 18px;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
  transition: all 0.2s;
}

.edit-ascent-btn:hover {
  background: #e8f4f8;
  transform: scale(1.1);
}

.delete-ascent-btn:hover {
  background: #ffe8e8;
  transform: scale(1.1);
}


.empty-state {
  text-align: center;
  padding: 40px 20px;
  color: #888;
}

.empty-state-icon {
  font-size: 48px;
  margin-bottom: 16px;
  display: block;
}

.hidden {
  display: none !important;
}

.log-ascent-btn {
  width: 100%;
  margin-top: 10px;
  padding: 8px;
  background: #f0f0f0;
  border: 1px solid #ddd;
  border-radius: 6px;
  cursor: pointer;
  font-size: 13px;
  color: #333;
  transition: all 0.2s;
}

.log-ascent-btn:hover {
  background: #e5e5e5;
  transform: translateY(-1px);
}

/* Favorite button for school popups */
.favorite-btn {
  padding: 6px 12px;
  background: transparent;
  border: 1px solid #ddd;
  border-radius: 6px;
  cursor: pointer;
  font-size: 20px;
  transition: all 0.2s ease;
  line-height: 1;
}

.favorite-btn.active {
  background: #ffe0e0;
  border-color: #ff6b6b;
}

.favorite-btn:hover {
  background: #f0f0f0;
  transform: scale(1.1);
}

.favorite-btn.active:hover {
  background: #ffc0c0;
}

/* Toast Notifications */
#toast-container {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 3000;
  display: flex;
  flex-direction: column;
  gap: 10px;
  pointer-events: none;
}

.toast {
  background: white;
  color: #333;
  padding: 16px 20px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  display: flex;
  align-items: center;
  gap: 12px;
  min-width: 280px;
  max-width: 400px;
  pointer-events: auto;
  animation: slideInRight 0.3s ease, fadeOut 0.3s ease 2.7s;
  font-size: 14px;
  font-weight: 500;
}

.toast.success {
  border-left: 4px solid #4caf50;
}

.toast.error {
  border-left: 4px solid #f44336;
}

.toast.info {
  border-left: 4px solid #2196f3;
}

.toast-icon {
  font-size: 20px;
  flex-shrink: 0;
}

.toast-message {
  flex: 1;
}

@keyframes slideInRight {
  from {
    transform: translateX(400px);
    opacity: 0;
  }

  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes fadeOut {
  to {
    opacity: 0;
    transform: translateX(400px);
  }
}



/* ================ FAVORITES PANEL ================ */
.favorites-list {
  flex: 1;
  overflow-y: auto;
  padding: 10px 0;
}

.favorites-container {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.favorites-section {
  background: #f9f9f9;
  border-radius: 12px;
  padding: 16px;
  border: 1px solid #eee;
}

.favorites-section h4 {
  margin: 0 0 12px 0;
  font-size: 16px;
  color: #333;
  font-weight: 600;
}

.favorites-items {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.favorite-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px;
  background: white;
  border-radius: 8px;
  border: 1px solid #e0e0e0;
  cursor: pointer;
  transition: all 0.2s;
}

.favorite-item:hover {
  background: #f0f8ff;
  border-color: #2196f3;
  transform: translateX(4px);
}

.favorite-name {
  font-size: 14px;
  color: #333;
  font-weight: 500;
}

.remove-favorite-btn {
  background: transparent;
  border: none;
  font-size: 18px;
  color: #999;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
  transition: all 0.2s;
}

.remove-favorite-btn:hover {
  background: #ffebee;
  color: #f44336;
  transform: scale(1.2);
}

.empty-message {
  text-align: center;
  padding: 40px 20px;
  color: #888;
  font-size: 14px;
}

/* ================ TAB NAVIGATION ================ */
.modal-tabs {
  display: flex;
  gap: 4px;
  margin-bottom: 24px;
  border-bottom: none;
  background: #f0f2f5;
  padding: 4px;
  border-radius: 12px;
}

.tab-btn {
  flex: 1;
  background: transparent;
  border: none;
  color: #666;
  padding: 10px 16px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  transition: all 0.2s ease;
  border-radius: 8px;
  margin-bottom: 0;
  text-align: center;
  position: relative;
}

.tab-btn:hover {
  color: #333;
  background: rgba(0, 0, 0, 0.03);
}

.tab-btn.active {
  color: #1a73e8;
  background: white;
  font-weight: 600;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
  border-bottom: none;
}

/* Tab Content */
.tab-content {
  display: none;
  animation: fadeIn 0.3s ease;
}

.tab-content.active {
  display: block;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.route-main-photo-container {
  width: 100%;
  margin: 16px 0;
  border-radius: 16px;
  overflow: hidden;
  position: relative;
  background: #f3f4f6;
  min-height: 180px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.route-main-photo-img {
  width: 100%;
  height: auto;
  max-height: 280px;
  object-fit: cover;
  display: block;
  cursor: pointer;
  transition: transform 0.3s ease;
}

.route-main-photo-img:hover {
  transform: scale(1.02);
}

.route-main-photo-container:hover .main-delete-btn {
  opacity: 1;
}

/* Navigation Zones (Left/Right) */
.photo-nav-zone {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 30%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 10;
  transition: background 0.3s;
}

.photo-nav-zone.prev {
  left: 0;
}

.photo-nav-zone.next {
  right: 0;
}

.photo-nav-zone:hover {
  background: rgba(0, 0, 0, 0.05);
}

/* Navigation Buttons */
.photo-nav-btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.9);
  border: none;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transform: scale(0.8);
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  color: #333;
}

.photo-nav-zone:hover .photo-nav-btn {
  opacity: 1;
  transform: scale(1);
}

.photo-nav-btn:hover {
  background: white;
  transform: scale(1.1) !important;
}

/* Overlay Navigation */
.overlay-nav-btn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: white;
  font-size: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s;
  z-index: 2000;
  backdrop-filter: blur(4px);
}

.overlay-nav-btn:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: translateY(-50%) scale(1.1);
}

.overlay-nav-btn.prev {
  left: 20px;
}

.overlay-nav-btn.next {
  right: 20px;
}

/* ================ ROUTE PHOTOS GALLERY (Hidden by default now) ================ */
.route-photos-gallery {
  display: flex;
  gap: 8px;
  overflow-x: auto;
  padding: 8px 0;
  margin-bottom: 12px;
  scrollbar-width: thin;
}

.route-photos-gallery::-webkit-scrollbar {
  height: 4px;
}

.route-photos-gallery::-webkit-scrollbar-thumb {
  background-color: #ccc;
  border-radius: 2px;
}

.route-photo-item {
  position: relative;
  flex-shrink: 0;
}

.route-photo-thumb {
  width: 80px;
  height: 80px;
  object-fit: cover;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
  border: 2px solid transparent;
}

.route-photo-thumb:hover {
  transform: scale(1.05);
  border-color: #2196f3;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.delete-photo-btn {
  position: absolute;
  top: 4px;
  right: 4px;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.7);
  color: white;
  border: none;
  font-size: 18px;
  line-height: 1;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
  opacity: 0;
}

.route-photo-item:hover .delete-photo-btn {
  opacity: 1;
}

.delete-photo-btn:hover {
  background: #f44336;
  transform: scale(1.1);
}

/* ================ ROUTE POPUP ACTIONS ================ */
.route-actions-bar {
  display: flex;
  justify-content: space-around;
  align-items: center;
  margin-top: 16px;
  padding: 12px 0;
  border-top: 1px solid #f3f4f6;
  gap: 8px;
}

.action-btn {
  background: transparent !important;
  border: none !important;
  width: 44px;
  height: 44px;
  padding: 0;
  cursor: pointer;
  color: #374151;
  border-radius: 50%;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: none !important;
}

.action-btn:hover {
  transform: scale(1.1);
  background: transparent !important;
}

.action-btn:active {
  transform: scale(0.95);
}

.action-btn svg {
  width: 28px;
  height: 28px;
  stroke-width: 1.8px;
}

.action-btn.active svg {
  stroke-width: 0;
}

@keyframes pop {
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(1.2);
  }

  100% {
    transform: scale(1);
  }
}

.action-btn.active {
  animation: pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* Favorite Button - Red */
.fav-btn.active {
  color: #ed4956;
  background-color: transparent !important;
  box-shadow: none !important;
}

.fav-btn:hover {
  color: #ed4956;
}

/* Save Button - Gold */
.save-btn.active {
  color: #FFC107;
  background-color: transparent !important;
  box-shadow: none !important;
}

.save-btn:hover {
  color: #FFC107;
}



.save-btn:hover {
  color: #fbd400;
}

/* Check/Ascent Button - Green */
.check-btn:active,
.check-btn.active {
  color: #4caf50;
  background-color: rgba(76, 175, 80, 0.1);
  transform: scale(0.95);
}

.check-btn:hover {
  color: #4caf50;
}

@keyframes pop {
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(1.3);
  }

  100% {
    transform: scale(1);
  }
}

.animate-pop {
  animation: pop 0.3s ease-out;
}

/* Specific button tweaks if needed */
.check-btn:hover {
  color: #4caf50;
}

.fav-btn.active {
  color: #ed4956;
}

.save-btn.active {
  color: #000;
}


/* ================ COMMENTS SYSTEM ================ */
.modal-medium {
  max-width: 500px;
  height: 80vh;
  display: flex;
  flex-direction: column;
}

.comments-list {
  flex: 1;
  overflow-y: auto;
  padding: 10px 0;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.comment-item {
  display: flex;
  gap: 12px;
  animation: fadeIn 0.3s ease;
}

.comment-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
  flex-shrink: 0;
}

.comment-content {
  flex: 1;
  background: #f0f2f5;
  padding: 10px 14px;
  border-radius: 18px;
  border-top-left-radius: 4px;
  position: relative;
}

.comment-item.own-comment .comment-content {
  background: #e3f2fd;
  border-top-left-radius: 18px;
  border-top-right-radius: 4px;
}

.comment-item.own-comment {
  flex-direction: row-reverse;
}

.comment-header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  margin-bottom: 4px;
}

.comment-author {
  font-weight: 600;
  font-size: 13px;
  color: #333;
}

.comment-date {
  font-size: 11px;
  color: #888;
}

.comment-text {
  font-size: 14px;
  color: #1a1a1a;
  line-height: 1.4;
  word-break: break-word;
}

.delete-comment-btn {
  background: none;
  border: none;
  color: #999;
  font-size: 12px;
  cursor: pointer;
  padding: 0 4px;
  margin-left: 8px;
}

.delete-comment-btn:hover {
  color: #f44336;
}

/* Comment Form */
.comment-form {
  border-top: 1px solid #eee;
  padding-top: 16px;
  margin-top: 10px;
}

.comment-input-wrapper {
  display: flex;
  align-items: center;
  gap: 10px;
  background: #f0f2f5;
  padding: 8px 12px;
  border-radius: 24px;
  border: 1px solid transparent;
  transition: all 0.2s;
}

.comment-input-wrapper:focus-within {
  background: white;
  border-color: #1a73e8;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.comment-user-avatar {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  object-fit: cover;
}

#comment-input {
  flex: 1;
  border: none;
  background: transparent;
  outline: none;
  font-size: 14px;
  padding: 4px 0;
}

#send-comment-btn {
  background: none;
  border: none;
  color: #1a73e8;
  cursor: pointer;
  padding: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.2s;
}

#send-comment-btn:disabled {
  color: #ccc;
  cursor: default;
}

#send-comment-btn:not(:disabled):hover {
  transform: scale(1.1);
}

/* ================ NETWORK SYSTEM ================ */
.modal-large {
  max-width: 600px;
  height: 85vh;
  display: flex;
  flex-direction: column;
}

.network-tabs {
  margin-bottom: 16px;
}

.user-list {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.user-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px;
  border-radius: 8px;
  background: #fff;
  transition: background 0.2s;
}

.user-item:hover {
  background: #f9fafb;
}

.user-item-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
}

.user-item-info {
  flex: 1;
}

.user-item-name {
  font-weight: 600;
  color: #333;
  font-size: 14px;
}

.user-item-stats {
  font-size: 12px;
  color: #666;
}

.follow-btn {
  padding: 6px 16px;
  border-radius: 20px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  border: 1px solid #ddd;
  background: white;
  color: #333;
}

.follow-btn.following {
  background: #e3f2fd;
  color: #1a73e8;
  border-color: transparent;
}

.follow-btn:hover {
  background: #f0f0f0;
}

.search-user-wrapper {
  margin-bottom: 16px;
}

.search-input {
  width: 100%;
  padding: 10px 16px;
  border-radius: 8px;
  border: 1px solid #ddd;
  font-size: 14px;
  outline: none;
  transition: border-color 0.2s;
}

.search-input:focus {
  border-color: #1a73e8;
}

/* ================ ASCENTS STATISTICS ================ */
.ascents-stats-header {
  margin-bottom: 16px;
  padding-bottom: 12px;
  border-bottom: 2px solid #e0e0e0;
}

.ascents-stats-header h4 {
  margin: 0 0 8px 0;
  font-size: 16px;
  font-weight: 600;
  color: #333;
}

.ascents-stats-summary {
  display: flex;
  gap: 20px;
  font-size: 14px;
  color: #666;
}

.ascents-stats-summary strong {
  color: #1a73e8;
  font-size: 18px;
}

/* School and Sector Grouping */
.school-group {
  margin-bottom: 24px;
}

.school-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border-radius: 8px;
  margin-bottom: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.school-header:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}

.school-header-left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.expand-icon {
  font-size: 12px;
  transition: transform 0.3s ease;
  display: inline-block;
}

.school-header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
}

.school-count {
  font-size: 14px;
  background: rgba(255, 255, 255, 0.2);
  padding: 4px 12px;
  border-radius: 12px;
}

.school-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s ease;
}

.school-content.expanded {
  max-height: 10000px;
}

.sector-group {
  margin-bottom: 16px;
  margin-left: 12px;
}

.sector-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  background: #f5f5f5;
  border-left: 4px solid #1a73e8;
  margin-bottom: 8px;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.sector-header:hover {
  background: #e8f0fe;
  border-left-width: 6px;
}

.sector-header-left {
  display: flex;
  align-items: center;
  gap: 8px;
}

.sector-header h4 {
  margin: 0;
  font-size: 15px;
  font-weight: 500;
  color: #444;
}

.sector-count {
  font-size: 13px;
  color: #666;
  background: white;
  padding: 2px 8px;
  border-radius: 8px;
}

.sector-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
  margin-left: 8px;
}

.sector-content.expanded {
  max-height: 5000px;
}

.sector-content .route-card {
  margin-bottom: 8px;
}

/* Compact route cards */
.route-card.compact {
  padding: 10px 12px;
}

.route-card.compact .route-card-main {
  flex: 1;
}

.route-card.compact .route-card-actions {
  margin-top: 0;
  padding-left: 12px;
}

.repeat-badge {
  background: #ff6b6b;
  color: white;
  font-size: 11px;
  padding: 2px 6px;
  border-radius: 10px;
  margin-left: 6px;
  font-weight: 600;
}

.route-card-rating-inline {
  color: #ffa726;
  font-size: 13px;
}

.view-ascents-btn {
  background: #1a73e8;
  color: white;
  border: none;
  padding: 6px 12px;
  border-radius: 6px;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s;
  white-space: nowrap;
}

.view-ascents-btn:hover {
  background: #1557b0;
  transform: scale(1.05);
}

/* Ensure modal has proper scroll */
.modal-content {
  max-height: 90vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.modal-body {
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow: hidden;
}

.tab-content {
  display: none;
  flex-direction: column;
  flex: 1;
  overflow: hidden;
}

.tab-content.active {
  display: flex;
}

.routes-stats {
  padding: 16px 0;
  margin-bottom: 12px;
  flex-shrink: 0;
}

.routes-list {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding-right: 4px;
}

/* Custom scrollbar for routes list */
.routes-list::-webkit-scrollbar {
  width: 8px;
}

.routes-list::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 4px;
}

.routes-list::-webkit-scrollbar-thumb {
  background: #888;
  border-radius: 4px;
}

.routes-list::-webkit-scrollbar-thumb:hover {
  background: #555;
}

.favorites-list,
.projects-list {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding-right: 4px;
}

.favorites-list::-webkit-scrollbar,
.projects-list::-webkit-scrollbar {
  width: 8px;
}

.favorites-list::-webkit-scrollbar-track,
.projects-list::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 4px;
}

.favorites-list::-webkit-scrollbar-thumb,
.projects-list::-webkit-scrollbar-thumb {
  background: #888;
  border-radius: 4px;
}

.favorites-list::-webkit-scrollbar-thumb:hover,
.projects-list::-webkit-scrollbar-thumb:hover {
  background: #555;
}

.sector-routes {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-left: 8px;
}

/* Interactive polylines cursor */
.gm-style div[role="button"] {
  cursor: pointer !important;
}

/* Sector labels with soft pastel style */
.sector-label {
  text-shadow:
    0 1px 3px rgba(255, 255, 255, 0.9),
    0 2px 8px rgba(0, 0, 0, 0.3);
  font-weight: 700 !important;
  letter-spacing: 0.5px;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", sans-serif !important;
}

.sector-label-geojson {
  text-shadow:
    0 1px 4px rgba(255, 255, 255, 0.95),
    0 2px 10px rgba(0, 0, 0, 0.25);
  font-weight: 700 !important;
  letter-spacing: 0.6px;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", sans-serif !important;
}

.projects-container {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.project-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
  background: #f9f9f9;
  border-radius: 12px;
  border: 1px solid #eee;
  transition: all 0.2s;
}

.project-item:hover {
  background: #fff8e1;
  border-color: #ffc107;
  transform: translateX(4px);
}

.project-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
  flex: 1;
}

.project-name {
  font-size: 15px;
  color: #333;
  font-weight: 600;
}

.project-grade {
  background: #333;
  color: white;
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 700;
  display: inline-block;
  align-self: flex-start;
}

.remove-project-btn {
  background: transparent;
  border: none;
  font-size: 18px;
  color: #999;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
  transition: all 0.2s;
}

.remove-project-btn:hover {
  background: #ffebee;
  color: #f44336;
  transform: scale(1.2);
}

/* Projects button in InfoWindow */
.project-btn {
  padding: 6px 12px;
  background: transparent;
  border: 1px solid #ddd;
  border-radius: 6px;
  cursor: pointer;
  font-size: 20px;
  transition: all 0.2s ease;
  line-height: 1;
  margin-left: 8px;
}

.project-btn.active {
  background: #fff8e1;
  border-color: #ffc107;
}

.project-btn:hover {
  background: #f0f0f0;
  transform: scale(1.1);
}

.project-btn.active:hover {
  background: #ffecb3;
}

/* ================ SEARCH SUGGESTIONS ================ */
.search-input-wrapper {
  position: relative;
}

.search-suggestions {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: white;
  border: 1px solid #ddd;
  border-top: none;
  border-radius: 0 0 8px 8px;
  max-height: 400px;
  overflow-y: auto;
  z-index: 1000;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.search-suggestions.hidden {
  display: none;
}

.suggestion-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  cursor: pointer;
  transition: background 0.2s;
  border-bottom: 1px solid #f0f0f0;
}

.suggestion-item:last-child {
  border-bottom: none;
}

.suggestion-item:hover {
  background: #f5f5f5;
}

.suggestion-icon {
  font-size: 20px;
  flex-shrink: 0;
}

.suggestion-name {
  flex: 1;
  font-weight: 500;
  color: #333;
}

.suggestion-type {
  font-size: 12px;
  color: #666;
  background: #e8f0fe;
  padding: 2px 8px;
  border-radius: 12px;
  flex-shrink: 0;
}

/* ================ ENHANCED ROUTE POPUP ================ */
.route-header-enhanced {
  margin-bottom: 12px;
}

.route-title-section {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 8px;
}

.route-title-section strong {
  font-size: 18px;
  color: #333;
}

.grade-badge {
  display: inline-block;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.route-details-enhanced {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin: 12px 0;
}

.route-detail-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px;
  background: #f9f9f9;
  border-radius: 8px;
}

.detail-icon {
  width: 28px;
  height: 28px;
  object-fit: contain;
  flex-shrink: 0;
}

.route-detail-item span {
  font-size: 14px;
  color: #555;
  font-weight: 500;
}

.route-popup-no-photo {
  margin: 12px 0;
  text-align: center;
}

.upload-photo-btn {
  width: 100%;
  padding: 14px 20px;
  background: #111827;
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", sans-serif;
}

.upload-photo-btn:hover {
  transform: translateY(-2px);
  background: #1f2937;
  box-shadow: 0 6px 20px rgba(17, 24, 39, 0.25);
}

.upload-photo-btn:active {
  transform: translateY(0);
}

.upload-photo-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

/* Route Photo Display */
.route-popup-photo {
  margin: 16px 0;
  border-radius: 16px;
  overflow: hidden;
  max-height: 280px;
}

.route-popup-photo-img {
  width: 100%;
  height: auto;
  display: block;
  object-fit: cover;
}

/* === MODERN SECTOR LABELS (Pastel Style) === */
.sector-label-modern {
  background: rgba(255, 255, 255, 0.92);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  padding: 8px 16px;
  border-radius: 28px;
  box-shadow:
    0 4px 20px rgba(0, 0, 0, 0.1),
    0 2px 8px rgba(0, 0, 0, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.8);

  display: flex;
  align-items: center;
  gap: 10px;

  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", sans-serif;
  font-size: 13px;
  font-weight: 600;
  color: #374151;
  white-space: nowrap;
  letter-spacing: 0.2px;

  position: absolute;
  transform: translate(-50%, -50%);
  cursor: pointer;
  transition: all 0.25s ease;
  pointer-events: auto;
}

.sector-label-modern:hover {
  transform: translate(-50%, -50%) scale(1.05);
  background: rgba(255, 255, 255, 0.98);
  box-shadow:
    0 8px 28px rgba(0, 0, 0, 0.12),
    0 4px 12px rgba(0, 0, 0, 0.08);
  z-index: 1000 !important;
}

.sector-color-dot {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  box-shadow:
    0 0 0 2px rgba(255, 255, 255, 0.9),
    0 2px 6px rgba(0, 0, 0, 0.15);
  flex-shrink: 0;
}

/* ================================
   VIEW MANAGEMENT (FEED vs MAP)
   ================================ */

.view {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  position: absolute;
  top: 0;
  left: 0;
  background: #f5f5f5;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
  z-index: 0;
}

.view.active {
  opacity: 1;
  pointer-events: auto;
  z-index: 1;
  position: relative;
  /* Allow flow */
}

.view.hidden {
  display: none;
  /* Completely hide to prevent interaction/rendering issues */
}

/* Profile view - white background and full page scroll */
#profile-view {
  background: #ffffff;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* Map View Specifics */
#map-view {
  height: 100%;
  width: 100%;
  position: relative;
}

#map-view #map {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: 100%;
}

/* Feed View Specifics - Handle scrolling here */
#feed-view {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  display: block;
  background: #ffffff;
  border-left: none;
  border-right: none;
  /* Use block layout for scrolling context */
}

/* ================================
   ACTIVITY VIEW
   ================================ */

#activity-view {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  display: block;
  background: var(--bg-primary);
}

.activity-scroll-container {
  padding: 20px;
  padding-bottom: 100px;
  max-width: 900px;
  margin: 0 auto;
}

/* Activity Header */
.activity-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
  /* Safe Area para móvil - respeta notch/cámara */
  padding-top: max(20px, env(safe-area-inset-top));
}

.activity-title {
  font-size: 28px;
  font-weight: 700;
  color: var(--text-primary);
  margin: 0;
}

.activity-period-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: 20px;
  font-size: 14px;
  font-weight: 500;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s;
}

.activity-period-btn:hover {
  background: var(--bg-tertiary);
  border-color: var(--border-color);
}

.activity-header-actions {
  position: relative;
}

.period-dropdown {
  position: absolute;
  top: calc(100% + 8px);
  right: 0;
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: 12px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  padding: 8px;
  z-index: 100;
  min-width: 140px;
}

.period-dropdown.hidden {
  display: none;
}

.period-option {
  display: block;
  width: 100%;
  padding: 10px 16px;
  text-align: left;
  background: none;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s;
}

.period-option:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

.period-option.active {
  background: var(--primary-color, #6366f1);
  color: white;
}

/* Stats Carousel */
.stats-carousel-container {
  position: relative;
  margin-bottom: 24px;
  overflow: hidden;
}

.stats-carousel {
  display: flex;
  transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  touch-action: pan-y pinch-zoom;
}

.stats-carousel-slide {
  min-width: 100%;
  flex-shrink: 0;
}

.stats-carousel-indicators {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  padding: 12px 0;
}

.carousel-indicator {
  width: 8px;
  height: 8px;
  min-width: 8px;
  min-height: 8px;
  max-width: 8px;
  max-height: 8px;
  border-radius: 50%;
  background-color: #d1d5db;
  border: none;
  padding: 0;
  margin: 0;
  cursor: pointer;
  transition: background-color 0.3s ease;
  box-sizing: border-box;
  -webkit-appearance: none;
  appearance: none;
}

.carousel-indicator.active {
  background-color: #9ca3af;
}

/* Stats Grid */
.activity-stats-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
  margin-bottom: 24px;
}

.activity-stat-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: 16px;
  padding: 20px;
  display: flex;
  align-items: flex-start;
  gap: 14px;
  transition: all 0.2s;
}

.activity-stat-card:hover {
  border-color: var(--border-color);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
}

.stat-card-wide {
  grid-column: span 2;
  flex-direction: row;
  align-items: center;
  background: linear-gradient(135deg, #fff5f5 0%, #fff 100%);
  border-color: rgba(239, 68, 68, 0.2);
}

.stat-icon {
  width: 44px;
  height: 44px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.stat-icon svg {
  width: 22px;
  height: 22px;
}

.stat-icon-routes {
  background: rgba(99, 102, 241, 0.1);
  color: #6366f1;
}

.stat-icon-routes svg {
  stroke: #6366f1;
}

.stat-icon-calendar {
  background: rgba(16, 185, 129, 0.1);
  color: #10b981;
}

.stat-icon-calendar svg {
  stroke: #10b981;
}

.stat-icon-grade {
  background: rgba(245, 158, 11, 0.1);
  color: #f59e0b;
}

.stat-icon-grade svg {
  stroke: #f59e0b;
}

.stat-icon-flash {
  background: rgba(236, 72, 153, 0.1);
  color: #ec4899;
}

.stat-icon-flash svg {
  stroke: #ec4899;
}

.stat-icon-calories {
  background: rgba(239, 68, 68, 0.1);
  color: #ef4444;
}

.stat-icon-calories svg {
  stroke: #ef4444;
}

/* New icon colors for additional stats */
.stat-icon-avg-grade {
  background: rgba(139, 92, 246, 0.1);
  color: #8b5cf6;
}

.stat-icon-avg-grade svg {
  stroke: #8b5cf6;
}

.stat-icon-style {
  background: rgba(59, 130, 246, 0.1);
  color: #3b82f6;
}

.stat-icon-style svg {
  stroke: #3b82f6;
}

.stat-icon-meters {
  background: rgba(14, 165, 233, 0.1);
  color: #0ea5e9;
}

.stat-icon-meters svg {
  stroke: #0ea5e9;
}

.stat-icon-avg-meters {
  background: rgba(6, 182, 212, 0.1);
  color: #06b6d4;
}

.stat-icon-avg-meters svg {
  stroke: #06b6d4;
}

.stat-icon-aleje {
  background: rgba(20, 184, 166, 0.1);
  color: #14b8a6;
}

.stat-icon-aleje svg {
  stroke: #14b8a6;
}

.stat-icon-max-aleje {
  background: rgba(34, 197, 94, 0.1);
  color: #22c55e;
}

.stat-icon-max-aleje svg {
  stroke: #22c55e;
}

.stat-icon-school {
  background: rgba(249, 115, 22, 0.1);
  color: #f97316;
}

.stat-icon-school svg {
  stroke: #f97316;
}

.stat-icon-school-count {
  background: rgba(234, 88, 12, 0.1);
  color: #ea580c;
}

.stat-icon-school-count svg {
  stroke: #ea580c;
}

.stat-icon-sector {
  background: rgba(239, 68, 68, 0.1);
  color: #ef4444;
}

.stat-icon-sector svg {
  stroke: #ef4444;
}

.stat-icon-sector-count {
  background: rgba(220, 38, 38, 0.1);
  color: #dc2626;
}

.stat-icon-sector-count svg {
  stroke: #dc2626;
}

.stat-value-text {
  font-size: 16px;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

.stat-content {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.stat-label {
  font-size: 13px;
  color: var(--text-muted);
  font-weight: 500;
}

.stat-value {
  font-size: 28px;
  font-weight: 700;
  color: var(--text-primary);
  line-height: 1.1;
}

.stat-value-calories {
  color: #ef4444;
}

.stat-value small {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-muted);
}

.calories-trend {
  margin-left: auto;
}

.trend-up {
  font-size: 12px;
  color: #10b981;
  font-weight: 500;
  background: rgba(16, 185, 129, 0.1);
  padding: 4px 10px;
  border-radius: 12px;
}

.trend-down {
  color: #ef4444;
  background: rgba(239, 68, 68, 0.1);
}

/* Activity Section */
.activity-section {
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}

.section-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
  display: flex;
  align-items: center;
  gap: 8px;
}

.section-title svg {
  stroke: #ef4444;
}

/* Chart Tabs */
.chart-tabs {
  display: flex;
  gap: 4px;
  background: var(--bg-tertiary);
  padding: 4px;
  border-radius: 10px;
}

.chart-tab {
  padding: 6px 14px;
  font-size: 13px;
  font-weight: 500;
  border: none;
  background: none;
  color: var(--text-muted);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
}

.chart-tab.active {
  background: var(--bg-secondary);
  color: var(--text-primary);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.chart-tab:hover:not(.active) {
  color: var(--text-secondary);
}

/* Activity Chart */
.activity-chart-container {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.chart-bars {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  height: 140px;
  padding: 0 8px;
  gap: 8px;
}

.chart-bar-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  flex: 1;
}

.chart-bar {
  width: 100%;
  max-width: 40px;
  background: linear-gradient(180deg, #6366f1 0%, #818cf8 100%);
  border-radius: 6px 6px 2px 2px;
  min-height: 8px;
  transition: all 0.3s ease;
  position: relative;
}

.chart-bar::before {
  content: attr(data-value);
  position: absolute;
  top: -24px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 12px;
  font-weight: 600;
  color: var(--text-primary);
  opacity: 0;
  transition: opacity 0.2s;
}

.chart-bar:hover::before {
  opacity: 1;
}

.chart-bar:hover {
  filter: brightness(1.1);
  transform: scaleY(1.02);
}

.chart-bar-highlight {
  background: linear-gradient(180deg, #10b981 0%, #34d399 100%);
}

.chart-label {
  font-size: 12px;
  color: var(--text-muted);
  font-weight: 500;
}

.chart-summary {
  display: flex;
  justify-content: center;
  gap: 32px;
  padding-top: 12px;
  border-top: 1px solid var(--border-light);
}

.chart-summary-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}

.summary-value {
  font-size: 20px;
  font-weight: 700;
  color: var(--text-primary);
}

.summary-label {
  font-size: 12px;
  color: var(--text-muted);
}

/* Combined Histogram (Bars + Lines) */
.combined-histogram-container {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 16px 0;
}

.histogram-wrapper {
  display: flex;
  align-items: stretch;
  gap: 8px;
  height: 280px;
  position: relative;
}

.histogram-y-axis {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 0;
  min-width: 32px;
}

.histogram-y-axis-left {
  align-items: flex-end;
  padding-right: 4px;
}

.histogram-y-axis-right {
  align-items: flex-start;
  padding-left: 4px;
}

.histogram-y-axis .y-label {
  font-size: 10px;
  color: var(--text-muted);
  font-weight: 500;
  line-height: 1;
}

.histogram-chart-area {
  flex: 1;
  position: relative;
  border-left: 1px solid var(--border-light);
  border-bottom: 1px solid var(--border-light);
  border-right: 1px solid var(--border-light);
}

.histogram-bars {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 100%;
  display: flex;
  align-items: flex-end;
  justify-content: space-around;
  padding: 0 8px;
  gap: 4px;
}

.histogram-bar {
  flex: 1;
  max-width: 50px;
  background: rgba(0, 212, 255, 0.6);
  border-radius: 3px 3px 0 0;
  min-height: 4px;
  transition: all 0.3s ease;
  position: relative;
}

.histogram-bar:hover {
  filter: brightness(1.1);
}

.histogram-lines {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: visible;
}

.histogram-line {
  fill: none;
  stroke-width: 2.5;
  stroke-linecap: round;
  stroke-linejoin: round;
}

.histogram-line-max {
  stroke: #ef4444;
}

.histogram-line-avg {
  stroke: #22c55e;
}

.histogram-line-min {
  stroke: #3b82f6;
}

.histogram-point {
  stroke-width: 2;
  stroke: white;
}

.histogram-point-max {
  fill: #ef4444;
}

.histogram-point-avg {
  fill: #22c55e;
}

.histogram-point-min {
  fill: #3b82f6;
}

.histogram-x-axis {
  display: flex;
  justify-content: space-around;
  padding: 8px 40px;
  gap: 4px;
}

.histogram-x-label {
  font-size: 11px;
  color: var(--text-muted);
  font-weight: 500;
  text-align: center;
  flex: 1;
  max-width: 50px;
}

.histogram-legend {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 16px;
  padding: 12px 0;
  border-top: 1px solid var(--border-light);
  margin-top: 8px;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 6px;
}

.legend-bar {
  width: 16px;
  height: 12px;
  background: #00d4ff;
  border-radius: 2px;
}

.legend-line {
  width: 20px;
  height: 3px;
  border-radius: 2px;
}

.legend-line-avg {
  background: #22c55e;
}

.legend-line-max {
  background: #ef4444;
}

.legend-line-min {
  background: #3b82f6;
}

.legend-text {
  font-size: 11px;
  color: var(--text-secondary);
  font-weight: 500;
}

@media (max-width: 640px) {
  .histogram-wrapper {
    height: 220px;
  }
  .histogram-y-axis {
    min-width: 28px;
  }
  .histogram-y-axis .y-label {
    font-size: 9px;
  }
  .histogram-legend {
    gap: 10px;
  }
  .legend-text {
    font-size: 10px;
  }
}

/* Histogram Carousel */
.histogram-carousel-container {
  position: relative;
  overflow: hidden;
}

.histogram-carousel {
  display: flex;
  transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  touch-action: pan-y pinch-zoom;
}

.histogram-carousel-slide {
  min-width: 100%;
  flex-shrink: 0;
}

.histogram-carousel-indicators {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  padding: 12px 0;
}

.histogram-carousel-indicator {
  width: 8px;
  height: 8px;
  min-width: 8px;
  min-height: 8px;
  max-width: 8px;
  max-height: 8px;
  border-radius: 50%;
  background-color: #e5e7eb;
  border: none;
  cursor: pointer;
  transition: background-color 0.2s ease;
  padding: 0;
  margin: 0;
  box-sizing: border-box;
  -webkit-appearance: none;
  appearance: none;
}

.histogram-carousel-indicator.active {
  background-color: #9ca3af;
}

/* Grade Distribution Chart */
.grade-distribution-container {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 16px 0;
}

.grade-distribution-wrapper {
  display: flex;
  align-items: stretch;
  gap: 8px;
  height: 280px;
  position: relative;
}

.grade-distribution-y-axis {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: flex-end;
  min-width: 36px;
  padding: 0 4px;
  font-size: 10px;
  color: var(--text-muted);
}

.grade-distribution-y-axis .y-label {
  font-size: 10px;
  color: var(--text-muted);
  line-height: 1;
}

.grade-distribution-chart-area {
  flex: 1;
  position: relative;
  background: #fff;
  border-left: 1px solid var(--border-light);
  border-bottom: 1px solid var(--border-light);
}

.grade-distribution-bars {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 100%;
  display: flex;
  align-items: flex-end;
  justify-content: space-around;
  padding: 0 8px;
  gap: 2px;
}

.grade-distribution-bar {
  flex: 1;
  max-width: 40px;
  background: rgba(0, 212, 255, 0.8);
  border-radius: 3px 3px 0 0;
  min-height: 2px;
  transition: all 0.3s ease;
  position: relative;
}

.grade-distribution-bar:hover {
  filter: brightness(1.1);
}

.grade-distribution-bar::after {
  content: attr(data-value);
  position: absolute;
  top: -18px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 9px;
  color: var(--text-muted);
  opacity: 0;
  transition: opacity 0.2s;
  white-space: nowrap;
}

.grade-distribution-bar:hover::after {
  opacity: 1;
}

.grade-distribution-x-axis {
  display: flex;
  justify-content: space-around;
  padding: 0 44px 0 44px;
  margin-top: 4px;
}

.grade-distribution-x-label {
  font-size: 9px;
  color: var(--text-muted);
  text-align: center;
  flex: 1;
  max-width: 40px;
}

.grade-distribution-axis-labels {
  display: flex;
  justify-content: space-between;
  padding: 8px 16px;
}

.axis-label-y,
.axis-label-x {
  font-size: 11px;
  color: var(--text-secondary);
  font-weight: 500;
}

.axis-label-y {
  writing-mode: vertical-rl;
  text-orientation: mixed;
  transform: rotate(180deg);
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%) rotate(180deg);
}

.grade-distribution-axis-labels {
  display: flex;
  justify-content: center;
  padding: 4px 0;
}

.grade-distribution-axis-labels .axis-label-x {
  font-size: 12px;
  color: var(--text-secondary);
  font-weight: 500;
}

.grade-distribution-axis-labels .axis-label-y {
  display: none;
}

@media (max-width: 640px) {
  .grade-distribution-wrapper {
    height: 220px;
  }
  .grade-distribution-y-axis {
    min-width: 28px;
  }
  .grade-distribution-y-axis .y-label {
    font-size: 9px;
  }
  .grade-distribution-bar {
    max-width: 30px;
  }
  .grade-distribution-x-label {
    font-size: 8px;
  }
}

/* Calorie Calculator */
.calorie-section {
  background: linear-gradient(135deg, #fef3c7 0%, #fff 50%);
  border-color: rgba(245, 158, 11, 0.3);
}

.calorie-calculator {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
}

@media (max-width: 640px) {
  .calorie-calculator {
    grid-template-columns: 1fr;
  }
}

.calc-inputs {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.calc-input-group {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.calc-input-group label {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary);
}

.calc-input-group select,
.calc-input-group input {
  padding: 10px 14px;
  border: 1px solid var(--border-color);
  border-radius: 10px;
  font-size: 14px;
  background: var(--bg-secondary);
  color: var(--text-primary);
  transition: all 0.2s;
}

.calc-input-group select:focus,
.calc-input-group input:focus {
  outline: none;
  border-color: #f59e0b;
  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1);
}

.calc-result {
  background: var(--bg-secondary);
  border-radius: 16px;
  padding: 24px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
}

.calc-result-main {
  display: flex;
  align-items: baseline;
  gap: 6px;
  margin-bottom: 8px;
}

.calc-result-value {
  font-size: 48px;
  font-weight: 800;
  color: #f59e0b;
  line-height: 1;
}

.calc-result-unit {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-muted);
}

.calc-result-info {
  font-size: 12px;
  color: var(--text-muted);
  margin: 0 0 16px 0;
}

.calc-equivalents {
  display: flex;
  flex-direction: column;
  gap: 8px;
  width: 100%;
}

.calc-equiv-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  background: var(--bg-tertiary);
  border-radius: 8px;
  font-size: 13px;
  color: var(--text-secondary);
}

.equiv-icon {
  font-size: 16px;
}

/* New Ascent Button */
.new-ascent-btn {
  width: 100%;
  padding: 16px 24px;
  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
  color: white;
  border: none;
  border-radius: 14px;
  font-size: 16px;
  font-weight: 600;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  cursor: pointer;
  transition: all 0.2s;
  margin-bottom: 20px;
  box-shadow: 0 4px 14px rgba(59, 130, 246, 0.35);
}

.new-ascent-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(59, 130, 246, 0.45);
}

.new-ascent-btn:active {
  transform: translateY(0);
}

.new-ascent-btn svg {
  stroke: white;
}

/* Filter Bar */
.activity-filter-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 16px;
}

.filter-chips {
  display: flex;
  gap: 8px;
  overflow-x: auto;
  padding: 4px 0;
  -webkit-overflow-scrolling: touch;
}

.filter-chips::-webkit-scrollbar {
  display: none;
}

.filter-chip {
  padding: 8px 16px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: 20px;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary);
  white-space: nowrap;
  cursor: pointer;
  transition: all 0.2s;
}

.filter-chip:hover {
  background: var(--bg-tertiary);
  border-color: var(--border-color);
}

.filter-chip.active {
  background: var(--text-primary);
  color: var(--bg-secondary);
  border-color: var(--text-primary);
}

.filter-btn {
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s;
  flex-shrink: 0;
}

.filter-btn:hover {
  background: var(--bg-tertiary);
  border-color: var(--border-color);
}

.filter-btn svg {
  stroke: var(--text-secondary);
}

/* Activity List */
.activity-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 24px;
}

.activity-item {
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: 14px;
  padding: 16px;
  display: flex;
  gap: 14px;
  transition: all 0.2s;
  cursor: pointer;
}

.activity-item:hover {
  border-color: var(--border-color);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.activity-item-icon {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  font-size: 24px;
}

.activity-item-icon.flash {
  background: rgba(236, 72, 153, 0.1);
}

.activity-item-icon.redpoint {
  background: rgba(239, 68, 68, 0.1);
}

.activity-item-icon.project {
  background: rgba(99, 102, 241, 0.1);
}

.activity-item-content {
  flex: 1;
  min-width: 0;
}

.activity-item-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 4px;
}

.activity-item-name {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
}

.activity-item-grade {
  font-size: 14px;
  font-weight: 700;
  color: #6366f1;
  background: rgba(99, 102, 241, 0.1);
  padding: 2px 10px;
  border-radius: 6px;
}

.activity-item-meta {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 13px;
  color: var(--text-muted);
}

.activity-item-location {
  display: flex;
  align-items: center;
  gap: 4px;
}

.activity-item-date {
  display: flex;
  align-items: center;
  gap: 4px;
}

.activity-item-stats {
  display: flex;
  gap: 16px;
  margin-top: 10px;
}

.activity-stat-mini {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 4px 8px;
  border-radius: 6px;
}

/* Empty State */
.activity-empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  text-align: center;
}

.empty-icon {
  width: 80px;
  height: 80px;
  background: var(--bg-tertiary);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 20px;
}

.empty-icon svg {
  stroke: var(--text-muted);
  opacity: 0.5;
}

.activity-empty-state h3 {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0 0 8px 0;
}

.activity-empty-state p {
  font-size: 14px;
  color: var(--text-muted);
  margin: 0;
}

/* Grade Distribution */
.grade-distribution {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.grade-bar-item {
  display: flex;
  align-items: center;
  gap: 12px;
}

.grade-label {
  width: 36px;
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
  text-align: right;
}

.grade-bar-track {
  flex: 1;
  height: 24px;
  background: var(--bg-tertiary);
  border-radius: 6px;
  overflow: hidden;
}

.grade-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, #6366f1 0%, #818cf8 100%);
  border-radius: 6px;
  transition: width 0.5s ease;
}

.grade-count {
  width: 28px;
  font-size: 13px;
  font-weight: 600;
  color: var(--text-secondary);
  text-align: left;
}

/* Records Grid */
.records-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

@media (max-width: 500px) {
  .records-grid {
    grid-template-columns: 1fr;
  }
}

.record-card {
  background: var(--bg-tertiary);
  border-radius: 12px;
  padding: 16px;
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.record-icon {
  font-size: 28px;
  line-height: 1;
}

.record-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.record-title {
  font-size: 12px;
  color: var(--text-muted);
  font-weight: 500;
}

.record-value {
  font-size: 20px;
  font-weight: 700;
  color: var(--text-primary);
}

.record-detail {
  font-size: 12px;
  color: var(--text-muted);
}

/* Responsive adjustments */
@media (max-width: 640px) {
  .activity-scroll-container {
    padding: 16px;
  }

  .activity-title {
    font-size: 24px;
  }

  .activity-stats-grid {
    grid-template-columns: 1fr;
  }

  .stat-card-wide {
    grid-column: span 1;
    flex-direction: column;
    align-items: flex-start;
  }

  .calories-trend {
    margin-left: 0;
    margin-top: 8px;
  }

  .stat-value {
    font-size: 24px;
  }

  .chart-bars {
    height: 100px;
  }

  .records-grid {
    grid-template-columns: 1fr;
  }
}

/* ================================
   BOTTOM NAVIGATION (Floating Pill)
   ================================ */

.bottom-nav {
  position: fixed;
  bottom: auto;
  top: 50%;
  left: 20px;
  transform: translateY(-50%);
  width: auto;
  min-width: 180px;
  height: auto;
  background: transparent;
  border: none;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: stretch;
  gap: 6px;
  z-index: 10000;
  padding: 20px 16px;
  border-radius: 0;
  box-shadow: none;
}

/* Estilo de cajón blanco cuando está en vista de mapa */
body.map-active .bottom-nav {
  background: #ffffff;
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  padding: 20px 16px;
  border: none;
}

.nav-item {
  background: none;
  border: none;
  box-shadow: none;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: flex-start;
  gap: 12px;
  color: #1a1a1a;
  font-size: 14px;
  font-weight: 500;
  padding: 12px 16px;
  cursor: pointer;
  transition: all var(--transition-fast);
  border-radius: 12px;
  width: 100%;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
}

.nav-item svg {
  width: 22px;
  height: 22px;
  stroke: #1a1a1a;
  stroke-width: 1.8px;
  transition: all var(--transition-fast);
  flex-shrink: 0;
  filter: drop-shadow(0 1px 2px rgba(255, 255, 255, 0.8));
}

.nav-item span {
  white-space: nowrap;
  display: inline-block;
}

.nav-item.active {
  color: #000000;
  background: rgba(255, 255, 255, 0.15);
  font-weight: 600;
}

.nav-item.active svg {
  stroke: #000000;
  fill: none;
  transform: scale(1.05);
}

.nav-item:hover {
  transform: none;
  background: rgba(255, 255, 255, 0.2);
  color: #000000;
}

.nav-item:hover svg {
  stroke: #000000;
}

/* Estilos cuando el fondo es blanco (vista de mapa) */
body.map-active .nav-item {
  color: var(--text-muted);
  text-shadow: none;
}

body.map-active .nav-item svg {
  stroke: currentColor;
  filter: none;
}

body.map-active .nav-item.active {
  color: #2d2d2d;
  background: transparent;
}

body.map-active .nav-item.active svg {
  stroke: #2d2d2d;
}

body.map-active .nav-item:hover {
  background: transparent;
  color: #2d2d2d;
}

body.map-active .nav-item:hover svg {
  stroke: #2d2d2d;
}

.nav-item:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(45, 45, 45, 0.2);
}

.nav-item:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px rgba(45, 45, 45, 0.2);
}

/* Create Button Special Styling */
.nav-item-create {
  margin: 0;
}

.nav-item-create .create-btn-circle {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: #2d2d2d;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 12px rgba(45, 45, 45, 0.3);
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.nav-item-create .create-btn-circle svg {
  stroke: white !important;
  width: 20px;
  height: 20px;
}

.nav-item-create:hover .create-btn-circle {
  transform: scale(1.05);
  background: #1a1a1a;
  box-shadow: 0 6px 16px rgba(45, 45, 45, 0.4);
}

.nav-item-create span {
  margin-top: 0;
}

/* Create Post Modal */
.create-post-options {
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.create-option {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px;
  border-radius: 12px;
  background: #f8f9fa;
  cursor: pointer;
  transition: all 0.2s ease;
  border: 1px solid transparent;
}

.create-option:hover {
  background: #f0f0ff;
  border-color: rgba(102, 126, 234, 0.3);
  transform: translateX(4px);
}

.create-option-icon {
  width: 56px;
  height: 56px;
  border-radius: 12px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.create-option-icon svg {
  stroke: white;
}

.create-option-icon.ascent-icon {
  background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
}

.create-option-info {
  flex: 1;
}

.create-option-title {
  font-weight: 600;
  font-size: 16px;
  color: #333;
  margin-bottom: 4px;
}

.create-option-desc {
  font-size: 13px;
  color: #666;
}

.modal-medium {
  max-width: 420px;
  width: 90%;
}

/* ================== NEW CREATE POST MODAL ================== */
.modal-create-post {
  max-width: 600px;
  width: 90%;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
}

.modal-create-post .modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid #f3f4f6;
}

.modal-create-post .modal-header h3 {
  flex: 1;
  text-align: center;
  margin: 0;
  font-size: 20px;
  font-weight: 700;
  color: #111827;
}

.modal-create-post .close-btn {
  order: -1;
}

.create-post-body {
  padding: 20px;
  flex: 1;
  overflow-y: auto;
}

.create-post-user {
  display: flex;
  gap: 12px;
  margin-bottom: 16px;
}

.create-post-avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  object-fit: cover;
  flex-shrink: 0;
}

.create-post-user-info {
  flex: 1;
}

.create-post-username {
  font-weight: 600;
  font-size: 15px;
  color: #111827;
  margin-bottom: 4px;
}

.create-post-audience {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: #3b82f6;
  font-weight: 500;
}

.create-post-audience svg {
  width: 16px;
  height: 16px;
}

#create-post-form {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

#create-post-text {
  width: 100%;
  border: none;
  outline: none;
  resize: none;
  font-size: 20px;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", sans-serif;
  color: #111827;
  line-height: 1.5;
  min-height: 120px;
  padding: 0;
  background: transparent;
}

#create-post-text::placeholder {
  color: #9ca3af;
}

.create-post-char-count {
  text-align: right;
  font-size: 13px;
  color: #6b7280;
  padding-top: 8px;
  border-top: 1px solid #f3f4f6;
}

.create-post-actions {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-top: 12px;
  border-top: 1px solid #f3f4f6;
}

.create-post-actions-left {
  display: flex;
  gap: 8px;
}

.create-post-action-btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: none;
  background: transparent;
  color: #3b82f6;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  padding: 0;
}

.create-post-action-btn:hover {
  background: rgba(59, 130, 246, 0.1);
  transform: scale(1.1);
}

.create-post-action-btn:active {
  transform: scale(0.95);
}

.create-post-action-btn svg {
  width: 24px;
  height: 24px;
}

/* Location Selector */
.location-selector-wrapper {
  position: relative;
  display: inline-flex;
  align-items: center;
}

.create-post-actions-left {
  position: relative;
}

/* Location Search Container (floating input) */
.location-search-container {
  position: absolute;
  left: calc(100% + 8px);
  top: 50%;
  transform: translateY(-50%);
  z-index: 10000;
  display: flex;
  flex-direction: column;
  min-width: 280px;
  max-width: 400px;
}

.location-search-container.hidden {
  display: none;
}

.location-search-input {
  width: 100%;
  padding: 10px 14px;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  font-size: 14px;
  color: #2d2d2d;
  background: #ffffff;
  transition: all 0.15s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.location-search-input:focus {
  outline: none;
  border-color: #2d2d2d;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.location-search-input::placeholder {
  color: #9ca3af;
}

/* Location Results Dropdown */
.location-results {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  margin-top: 4px;
  background: #ffffff;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(0, 0, 0, 0.05);
  max-height: 280px;
  overflow-y: auto;
  list-style: none;
  margin: 0;
  padding: 4px 0;
  z-index: 10001;
}

.location-result-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 16px;
  cursor: pointer;
  color: #2d2d2d;
  font-size: 14px;
  transition: background-color 0.15s ease;
  border-bottom: 1px solid #f9fafb;
}

.location-result-item:last-child {
  border-bottom: none;
}

.location-result-item:hover {
  background: #f9fafb;
}

.location-current-option {
  font-weight: 500;
}

.location-current-option svg {
  width: 18px;
  height: 18px;
  stroke: currentColor;
  stroke-width: 2;
  flex-shrink: 0;
}

.location-result-loading,
.location-result-empty,
.location-result-error {
  padding: 16px;
  text-align: center;
  color: #9ca3af;
  font-size: 14px;
}

.location-result-error {
  color: #ef4444;
}

/* Location Badge */
.location-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: #f9fafb;
  border: 1px solid #e5e7eb;
  border-radius: 20px;
  font-size: 13px;
  color: #2d2d2d;
  margin-left: 8px;
  max-width: 200px;
}

.location-badge.hidden {
  display: none;
}

.location-badge-text {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex: 1;
}

.location-badge-remove {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  padding: 0;
  border: none;
  background: transparent;
  color: #6b7280;
  cursor: pointer;
  border-radius: 50%;
  transition: all 0.15s ease;
  flex-shrink: 0;
}

.location-badge-remove:hover {
  background: #e5e7eb;
  color: #2d2d2d;
}

.location-badge-remove svg {
  width: 14px;
  height: 14px;
  stroke: currentColor;
  stroke-width: 2;
}

.btn-post-create {
  padding: 10px 24px;
  border-radius: 24px;
  border: none;
  background: transparent;
  color: #2d2d2d;
  font-weight: 700;
  font-size: 15px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.btn-post-create:hover:not(:disabled) {
  color: #9ca3af;
  background: transparent;
  transform: translateY(-1px);
}

.btn-post-create:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.create-post-preview {
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid #f3f4f6;
}

.create-post-preview-photos {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 8px;
  margin-bottom: 12px;
}

.create-post-preview-photo-item {
  position: relative;
  aspect-ratio: 1;
  border-radius: 12px;
  overflow: hidden;
  background: #f3f4f6;
}

.create-post-preview-photo-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.create-post-preview-video {
  position: relative;
  border-radius: 12px;
  overflow: hidden;
  background: #000;
  margin-bottom: 12px;
}

.create-post-preview-video video {
  width: 100%;
  max-height: 300px;
  display: block;
}

.create-post-preview-location {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px;
  background: #f9fafb;
  border-radius: 12px;
  font-size: 14px;
  color: #374151;
}

.create-post-preview-location svg {
  color: #3b82f6;
  flex-shrink: 0;
}

.remove-preview-btn {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 28px;
  height: 28px;
  min-width: 28px;
  min-height: 28px;
  max-width: 28px;
  max-height: 28px;
  border-radius: 50%;
  border: none;
  background: rgba(0, 0, 0, 0.6);
  color: white;
  font-size: 18px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  padding: 0;
  box-sizing: border-box;
}

.remove-preview-btn:hover {
  background: rgba(0, 0, 0, 0.8);
  transform: scale(1.1);
}

.create-post-preview-location .remove-preview-btn {
  position: static;
  background: transparent;
  color: #6b7280;
  margin-left: auto;
}

.create-post-preview-location .remove-preview-btn:hover {
  background: rgba(0, 0, 0, 0.05);
  color: #111827;
}

.nav-avatar-placeholder {
  width: 22px;
  height: 22px;
  border-radius: 50%;
  background: #eee;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.nav-avatar-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: opacity 0.3s ease;
  background-color: #f3f4f6;
}

.nav-avatar-img[src=""],
.nav-avatar-img:not([src]) {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.nav-avatar-img::after {
  content: '';
  display: block;
  width: 100%;
  height: 100%;
  background: #f3f4f6;
  border-radius: 50%;
  position: absolute;
  top: 0;
  left: 0;
  z-index: -1;
}

/* ================================
   SOCIAL FEED STYLES
   ================================ */

.feed-header {
  height: 72px;
  background: #ffffff;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 20px;
  /* Safe Area para móvil - respeta notch/cámara */
  padding-top: max(0px, env(safe-area-inset-top));
  border-bottom: 1px solid #e5e7eb;
  position: sticky;
  top: 0;
  z-index: 100;
}

.feed-header-left {
  width: 80px;
  display: flex;
  align-items: center;
  justify-content: flex-start;
}

.feed-logo-container {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  justify-content: center;
}

.feed-logo {
  height: 52px;
  object-fit: contain;
  filter: brightness(0);
  opacity: 0.85;
}

.notification-icon {
  width: 32px;
  height: 32px;
  object-fit: contain;
}

/* ================================
   NOTIFICATION DROPDOWN (Tuenti-style)
   ================================ */

.notification-dropdown {
  position: absolute;
  top: 64px;
  right: 16px;
  width: 320px;
  max-height: 400px;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
  border: 1px solid #e0e0e0;
  z-index: 1000;
  overflow: hidden;
  overscroll-behavior: contain;
  animation: dropdownSlideIn 0.2s ease;
}

.notification-dropdown.hidden {
  display: none;
}

@keyframes dropdownSlideIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.notification-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 16px;
  border-bottom: 1px solid #eee;
  background: #fafafa;
}

.notification-title {
  font-weight: 700;
  font-size: 15px;
  color: #333;
}

.notification-clear-btn {
  background: none;
  border: none;
  font-size: 12px;
  color: #4CAF50;
  font-weight: 600;
  cursor: pointer;
  transition: color 0.2s;
}

.notification-clear-btn:hover {
  color: #388E3C;
}

.notification-list {
  max-height: 340px;
  overflow-y: auto;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}

.notification-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 12px 16px;
  gap: 12px;
  border-bottom: 1px solid #f0f0f0;
  transition: all 0.5s ease;
  position: relative;
  min-height: 68px;
  max-height: 200px;
  box-sizing: border-box;
  overflow: hidden;
}

.notification-clickable-area {
  display: flex;
  align-items: center;
  flex: 1;
  min-width: 0;
  cursor: pointer;
}

.notification-item:hover {
  background: #f9f9f9;
}

.notification-item:last-child {
  border-bottom: none;
}

.notification-item.unread {
  background: #f0f7ff;
}

.notification-avatar {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  object-fit: cover;
  flex-shrink: 0;
}

.notification-icon-wrapper {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: #E8F5E9;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.notification-icon-wrapper.followers {
  background: #E3F2FD;
}

.notification-icon-wrapper.messages {
  background: #FFF3E0;
}

.notification-icon-wrapper.likes {
  background: #FCE4EC;
}

.notification-icon-wrapper svg {
  width: 18px;
  height: 18px;
  stroke-width: 2px;
}

.notification-icon-wrapper.followers svg {
  color: #1976D2;
}

.notification-icon-wrapper.messages svg {
  color: #F57C00;
}

.notification-icon-wrapper.likes svg {
  color: #E91E63;
}

.notification-content {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  justify-content: center;
  margin-left: 12px;
}

.notification-text {
  font-size: 14px;
  color: #333;
  line-height: 1.4;
}

.notification-text strong {
  color: #4CAF50;
  font-weight: 700;
}

.notification-time {
  font-size: 12px;
  color: #999;
  margin-top: 2px;
}

.notification-delete-btn {
  width: 24px;
  height: 24px;
  min-width: 24px;
  min-height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  opacity: 0;
  transition: opacity 0.2s ease, background 0.2s ease, transform 0.15s ease;
  padding: 0;
  margin: 0;
  flex-shrink: 0;
  z-index: 10;
  position: relative;
}

.notification-item:hover .notification-delete-btn {
  opacity: 1;
}

.notification-delete-btn:hover {
  background: rgba(239, 68, 68, 0.1);
  transform: scale(1.1);
}

.notification-delete-btn:active {
  background: rgba(239, 68, 68, 0.2);
  transform: scale(0.95);
}

.notification-delete-btn svg {
  width: 14px;
  height: 14px;
  color: #999;
  transition: color 0.2s ease;
  pointer-events: none;
}

.notification-delete-btn:hover svg {
  color: #ef4444;
}

/* Smooth slide-up deletion animation */
.notification-item.is-deleting {
  opacity: 0;
  max-height: 0;
  margin: 0;
  padding: 0;
  border-bottom: none;
  pointer-events: none;
  transform: translateY(-10px);
  transition: all 0.5s ease;
}

.notification-empty {
  padding: 40px 20px;
  text-align: center;
  color: #999;
}

.notification-empty-icon {
  font-size: 40px;
  margin-bottom: 10px;
  opacity: 0.5;
}

.notification-empty-text {
  font-size: 14px;
}

/* Overlay to close dropdown when clicking outside */
.notification-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 999;
}

.notification-overlay.hidden {
  display: none;
}

/* ================================
   MESSAGES DROPDOWN
   ================================ */

.messages-btn {
  position: relative;
}

.messages-badge {
  position: absolute;
  top: 2px;
  right: 2px;
  width: 18px;
  height: 18px;
  background: #f43f5e;
  color: white;
  font-size: 10px;
  font-weight: 700;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.messages-badge.hidden {
  display: none;
}

.messages-dropdown {
  position: absolute;
  top: 64px;
  right: 16px;
  width: 320px;
  max-height: 400px;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
  border: 1px solid #e0e0e0;
  z-index: 1000;
  overflow: hidden;
  overscroll-behavior: contain;
  animation: dropdownSlideIn 0.2s ease;
}

.messages-dropdown.hidden {
  display: none;
}

.messages-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 16px;
  border-bottom: 1px solid #eee;
  background: #2d2d2d;
}

.messages-title {
  font-weight: 700;
  font-size: 15px;
  color: #fff;
}

.messages-list {
  max-height: 340px;
  overflow-y: auto;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}

.message-item {
  display: flex;
  align-items: center;
  padding: 14px 16px;
  gap: 12px;
  border-bottom: 1px solid #f0f0f0;
  cursor: pointer;
  transition: background 0.15s;
}

.message-item:hover {
  background: #f9f9f9;
}

.message-item:last-child {
  border-bottom: none;
}

.message-item.unread {
  background: #f0f7ff;
}

.message-avatar {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  object-fit: cover;
  flex-shrink: 0;
  border: 2px solid #e0e0e0;
}

.message-content {
  flex: 1;
  min-width: 0;
  margin-left: 12px;
}

.message-sender {
  font-size: 14px;
  font-weight: 600;
  color: #333;
  margin-bottom: 2px;
}

.message-preview {
  font-size: 13px;
  color: #666;
  line-height: 1.3;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.message-time {
  font-size: 11px;
  color: #999;
  margin-top: 4px;
}

.messages-empty {
  padding: 50px 20px;
  text-align: center;
  color: #999;
}

.messages-empty-icon {
  font-size: 48px;
  margin-bottom: 12px;
  opacity: 0.5;
}

.messages-empty-text {
  font-size: 14px;
}

.message-delete-btn {
  flex-shrink: 0;
  background: none;
  border: none;
  padding: 8px;
  cursor: pointer;
  color: #ccc;
  opacity: 0;
  transition: opacity 0.15s, color 0.15s, background 0.15s;
  border-radius: 50%;
  margin-left: auto;
  display: flex;
  align-items: center;
  justify-content: center;
}

.message-item:hover .message-delete-btn {
  opacity: 1;
}

.message-delete-btn:hover {
  color: #e53935;
  background: rgba(229, 57, 53, 0.1);
}

.message-unread-dot {
  width: 8px;
  height: 8px;
  background: #667eea;
  border-radius: 50%;
  flex-shrink: 0;
  margin-left: 8px;
}

/* ================================
   CHAT MODAL
   ================================ */

.chat-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 10001;
  display: flex;
  align-items: center;
  justify-content: center;
}

.chat-modal.hidden {
  display: none;
}

.chat-modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
}

.chat-modal-container {
  position: relative;
  width: 90%;
  max-width: 450px;
  height: 70%;
  max-height: 600px;
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  animation: chatModalIn 0.3s ease;
}

@keyframes chatModalIn {
  from {
    opacity: 0;
    transform: scale(0.9) translateY(20px);
  }

  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.chat-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.chat-header-user {
  display: flex;
  align-items: center;
  gap: 12px;
}

.chat-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid rgba(255, 255, 255, 0.3);
}

.chat-username {
  font-weight: 600;
  font-size: 16px;
}

.chat-close-btn {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  border-radius: 50%;
  width: 32px;
  height: 32px;
  min-width: 32px;
  min-height: 32px;
  max-width: 32px;
  max-height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: white;
  transition: all 0.2s ease;
  padding: 0;
  flex-shrink: 0;
  font-size: 24px;
  font-weight: 300;
  line-height: 1;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  box-sizing: border-box;
}

.chat-close-btn:hover {
  background: rgba(255, 255, 255, 0.35);
  transform: scale(1.05);
}

.chat-close-btn:active {
  transform: scale(0.95);
}

.chat-messages {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  background: #f5f5f5;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.chat-message {
  max-width: 80%;
  padding: 10px 14px;
  border-radius: 16px;
  font-size: 14px;
  line-height: 1.4;
}

.chat-message.received {
  background: #fff;
  align-self: flex-start;
  border-bottom-left-radius: 4px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.chat-message.sent {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  align-self: flex-end;
  border-bottom-right-radius: 4px;
}

.chat-message-time {
  font-size: 10px;
  opacity: 0.6;
  margin-top: 4px;
  text-align: right;
}

.chat-input-area {
  display: flex;
  padding: 12px 16px;
  gap: 10px;
  background: #fff;
  border-top: 1px solid #eee;
}

.chat-input {
  flex: 1;
  padding: 12px 16px;
  border: 1px solid #e0e0e0;
  border-radius: 24px;
  font-size: 14px;
  outline: none;
  transition: border-color 0.2s;
}

.chat-input:focus {
  border-color: #667eea;
}

.chat-send-btn {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border: none;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform 0.2s, opacity 0.2s;
}

.chat-send-btn:hover {
  transform: scale(1.05);
}

.chat-send-btn:active {
  transform: scale(0.95);
}

.feed-actions {
  display: flex;
  gap: 12px;
  width: auto;
  justify-content: flex-end;
  align-items: center;
}

.icon-btn {
  background: none;
  border: none;
  padding: 8px;
  box-shadow: none;
  cursor: pointer;
  color: #374151;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: all 0.15s;
}

.icon-btn:hover {
  background: #f3f4f6;
}

.icon-btn svg {
  width: 22px;
  height: 22px;
  stroke-width: 1.8px;
}

/* Create Button in Header */
.create-header-btn {
  background: transparent;
  color: var(--text-primary);
  padding: 10px;
  box-shadow: none;
}

.create-header-btn svg {
  stroke: var(--text-primary) !important;
  width: 24px;
  height: 24px;
}

.create-header-btn:hover {
  background: rgba(0, 0, 0, 0.05);
  transform: scale(1.05);
  box-shadow: none;
}

/* ================================
   FEED - EDITORIAL HYBRID STYLE
   (Substack + Twitter + Strava)
   ================================ */

/* Feed Filter - Floating (Right of posts) */
.feed-filter-floating {
  position: fixed;
  top: 64px;
  /* Más pegado a la barra (56px header + 8px) */
  left: calc(50% + 342px);
  /* Más pegado al borde del feed (340px mitad + 2px) */
  z-index: 100;
  pointer-events: none;
  transition: top 0.2s;
}

.feed-filter-floating .feed-filter-container {
  position: relative;
  pointer-events: all;
}

/* Adjust position when scrolling */
#feed-view.scrolled .feed-filter-floating {
  top: 16px;
}

@media (max-width: 1200px) {
  .feed-filter-floating {
    left: auto;
    right: 12px;
    /* Más pegado al borde */
    top: 64px;
  }
}

@media (max-width: 768px) {
  .feed-filter-floating {
    right: 12px;
    top: 64px;
  }
}

.feed-filter-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: #ffffff;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  color: #374151;
  cursor: pointer;
  transition: all 0.2s;
  min-width: 140px;
  justify-content: space-between;
}

.feed-filter-btn:hover {
  border-color: #9ca3af;
  background: #f9fafb;
}

.feed-filter-dropdown {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 6px;
  background: #ffffff;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
  min-width: 180px;
  z-index: 101;
  padding: 4px;
  animation: dropdownFadeIn 0.15s ease-out;
}

.feed-filter-dropdown.hidden {
  display: none;
}

.filter-option {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 12px;
  font-size: 14px;
  color: #374151;
  cursor: pointer;
  border-radius: 4px;
  transition: background 0.15s;
}

.filter-option:hover {
  background: #f3f4f6;
}

.filter-option.active {
  background: #f3f4f6;
  font-weight: 500;
  color: #111827;
}

.check-icon {
  color: #111827;
}

.check-icon.hidden {
  display: none;
}

@keyframes dropdownFadeIn {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Feed Container */
.feed-container {
  overflow: visible;
  padding: 0 0 100px;
  max-width: 680px;
  margin: 0 auto;
  width: 100%;
  background: #ffffff;
  border-left: none;
  border-right: none;
  /* Smooth scrolling performance */
  -webkit-overflow-scrolling: touch;
  /* CSS containment for better performance */
  contain: layout style;
}

/* Feed Entry/Post - Flat Design (only bottom border) */
.feed-card {
  background: #ffffff;
  border: none;
  border-bottom: 1px solid #f3f4f6;
  padding: 20px 16px;
  /* Contain repaints to this element */
  contain: layout style paint;
  /* Smooth entry animation */
  animation: feedCardFadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes feedCardFadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.feed-card:last-child {
  border-bottom: none;
}

/* Post Header - Twitter/Substack inline style */
.feed-card-header {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  margin-bottom: 12px;
  position: relative;
}

.feed-avatar {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  object-fit: cover;
  background: #f3f4f6;
  flex-shrink: 0;
  cursor: pointer;
  transition: opacity 0.2s ease;
}

.feed-avatar:hover,
.feed-avatar-clickable:hover {
  opacity: 0.8;
}

.feed-header-content {
  flex: 1;
  min-width: 0;
}

.feed-header-row {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.feed-username {
  font-weight: 700;
  font-size: 15px;
  color: #111827;
}

.feed-username-clickable {
  cursor: pointer;
  transition: text-decoration 0.2s ease;
}

.feed-username-clickable:hover {
  text-decoration: underline;
}

.feed-handle {
  font-size: 14px;
  color: #6b7280;
}

.feed-dot {
  color: #9ca3af;
  font-size: 12px;
}

.feed-time {
  font-size: 14px;
  color: #6b7280;
}

.feed-location {
  font-size: 13px;
  color: #6366f1;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  cursor: pointer;
  margin-top: 2px;
}

.feed-location:hover {
  text-decoration: underline;
}

.feed-location-text {
  font-size: 13px;
  color: #6b7280;
  display: flex;
  align-items: center;
  gap: 4px;
  margin-top: 2px;
  line-height: 1.4;
}

.feed-header-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-left: auto;
}

.feed-subscribe-btn {
  padding: 6px 16px;
  font-size: 14px;
  font-weight: 600;
  color: #f97316;
  background: none;
  border: none;
  cursor: pointer;
  border-radius: 6px;
  transition: all 0.2s;
}

.feed-subscribe-btn:hover {
  background: rgba(249, 115, 22, 0.08);
}

.feed-more-btn {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  border: none;
  background: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #9ca3af;
  transition: all 0.2s;
}

.feed-more-btn:hover {
  background: #f3f4f6;
  color: #6b7280;
}

/* Text Content - Primary focus */
.feed-text-content {
  margin-bottom: 16px;
}

.feed-text-title {
  font-size: 20px;
  font-weight: 700;
  color: #111827;
  margin: 0 0 12px 0;
  line-height: 1.3;
  letter-spacing: -0.02em;
}

.feed-text-body {
  font-size: 15px;
  line-height: 1.65;
  color: #374151;
  margin: 0;
  word-wrap: break-word;
}

/* Images - Clean, not dominant */
.feed-media-wrapper {
  margin: 16px 0;
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid #e5e7eb;
}

.feed-image-container {
  width: 100%;
  background: #f9fafb;
  display: block;
  /* Contain for performance */
  contain: layout paint;
}

.feed-image {
  width: 100%;
  height: auto;
  display: block;
  max-height: 420px;
  object-fit: cover;
  /* Smooth image loading transition */
  opacity: 1;
  transition: opacity 0.3s ease;
  /* GPU acceleration */
  transform: translateZ(0);
  /* Content visibility for off-screen images */
  content-visibility: auto;
}

/* Loading state for images */
.feed-image[loading="lazy"] {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: imageShimmer 1.5s infinite;
}

@keyframes imageShimmer {
  0% {
    background-position: 200% 0;
  }

  100% {
    background-position: -200% 0;
  }
}

.feed-images-grid {
  display: grid;
  gap: 2px;
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid #e5e7eb;
}

.feed-images-grid.grid-2 {
  grid-template-columns: 1fr 1fr;
}

.feed-images-grid.grid-3 {
  grid-template-columns: 2fr 1fr;
  grid-template-rows: 1fr 1fr;
}

.feed-images-grid.grid-3 img:first-child {
  grid-row: span 2;
}

.feed-images-grid.grid-4 {
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr 1fr;
}

.feed-images-grid img {
  width: 100%;
  height: 200px;
  object-fit: cover;
  display: block;
  cursor: pointer;
  transition: opacity 0.2s ease, transform 0.2s ease;
  /* GPU acceleration */
  transform: translateZ(0);
  will-change: transform, opacity;
  /* Content visibility for off-screen images */
  content-visibility: auto;
}

.feed-images-grid img:hover {
  opacity: 0.95;
  transform: scale(1.02) translateZ(0);
}

/* Video */
.feed-video-container {
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid #e5e7eb;
  background: #000;
  margin: 16px 0;
}

.feed-video {
  width: 100%;
  max-height: 420px;
  display: block;
}

/* Ascensions Card - Strava inspired */
.feed-ascensions-card {
  margin: 16px 0;
  background: linear-gradient(135deg, #ecfdf5 0%, #f0fdf4 100%);
  border: 1px solid #bbf7d0;
  border-radius: 12px;
  padding: 16px;
}

.feed-ascensions-title {
  font-size: 15px;
  font-weight: 700;
  color: #111827;
  margin: 0 0 14px 0;
  display: flex;
  align-items: center;
  gap: 8px;
}

.feed-ascensions-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.feed-ascension-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 14px;
  background: #ffffff;
  border-radius: 8px;
  border: 1px solid #e5e7eb;
}

.ascension-grade-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 44px;
  padding: 6px 12px;
  font-size: 13px;
  font-weight: 700;
  color: #ffffff;
  background: #6366f1;
  border-radius: 6px;
}

.ascension-route-name {
  flex: 1;
  font-size: 14px;
  font-weight: 500;
  color: #111827;
}

.ascension-style {
  font-size: 11px;
  font-weight: 700;
  padding: 4px 10px;
  border-radius: 4px;
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.ascension-style.flash {
  background: #fef3c7;
  color: #d97706;
  border: 1px solid #fcd34d;
}

.ascension-style.redpoint {
  background: #fee2e2;
  color: #dc2626;
  border: 1px solid #fca5a5;
}

.ascension-style.onsight {
  background: #dbeafe;
  color: #2563eb;
  border: 1px solid #93c5fd;
}

.ascension-style.proyecto,
.ascension-style.project {
  background: #f3e8ff;
  color: #7c3aed;
  border: 1px solid #c4b5fd;
}

/* Activity Stats - Strava style */
.feed-activity-stats {
  display: flex;
  gap: 24px;
  margin: 16px 0;
  padding: 16px;
  background: #f9fafb;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
}

.activity-stat-item {
  display: flex;
  flex-direction: column;
}

.activity-stat-label {
  font-size: 12px;
  color: #6b7280;
  font-weight: 500;
  margin-bottom: 2px;
}

.activity-stat-value {
  font-size: 18px;
  font-weight: 700;
  color: #111827;
}

/* Achievement Badge */
.feed-achievement {
  display: flex;
  align-items: center;
  gap: 12px;
  margin: 16px 0;
  padding: 14px 16px;
  background: linear-gradient(135deg, #fef3c7 0%, #fffbeb 100%);
  border: 1px solid #fcd34d;
  border-radius: 12px;
}

.achievement-icon {
  width: 36px;
  height: 36px;
  background: #ffffff;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
}

.achievement-text {
  font-size: 14px;
  font-weight: 600;
  color: #92400e;
}

/* Actions Bar - Twitter minimal style */
.feed-actions-bar {
  display: flex;
  justify-content: flex-start;
  align-items: center;
  margin-top: 16px;
  margin-left: 16px;
  padding-top: 0;
  border-top: none;
  gap: 20px;
}

/* Forzar eliminación total de contenedor visual - sobrescribir estilos generales de button */
button.feed-action-btn,
.feed-action-btn,
.feed-actions-bar button.feed-action-btn,
.feed-actions-bar .feed-action-btn {
  /* Reset completo de estilos de button - sobrescribir estilos generales */
  display: flex !important;
  align-items: center !important;
  gap: 6px !important;
  padding: 0 !important;
  margin: 0 !important;
  border: none !important;
  background: transparent !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  cursor: pointer !important;
  color: #6b7280 !important;
  font-size: 15px !important;
  font-weight: 500 !important;
  transition: color 0.2s, transform 0.15s !important;
  outline: none !important;
  /* Eliminar cualquier estilo heredado de button */
  min-height: auto !important;
  white-space: normal !important;
  transform: none !important;
  /* Eliminar focus ring y tap highlight */
  -webkit-tap-highlight-color: transparent !important;
  /* Eliminar cualquier borde o sombra residual */
  border-width: 0 !important;
  border-style: none !important;
  border-color: transparent !important;
  text-shadow: none !important;
}

.feed-action-btn svg {
  width: 22px;
  height: 22px;
  stroke-width: 2px;
  transition: stroke 0.2s, fill 0.2s, transform 0.15s;
}

.feed-action-btn:hover {
  color: #2d2d2d !important;
  background: transparent !important;
  box-shadow: none !important;
  border: none !important;
  transform: scale(1.05) !important;
}

.feed-action-btn:hover svg {
  stroke: #2d2d2d;
  transform: scale(1.05);
}

.feed-action-btn:focus {
  outline: none !important;
  box-shadow: 0 0 0 3px rgba(45, 45, 45, 0.2) !important;
  border: none !important;
}

.feed-action-btn:focus-visible {
  outline: none !important;
  box-shadow: 0 0 0 3px rgba(45, 45, 45, 0.2) !important;
  border: none !important;
}

.feed-action-btn:active {
  color: #2d2d2d !important;
  background: transparent !important;
  box-shadow: none !important;
  border: none !important;
  transform: scale(0.98) !important;
}

.feed-action-btn:active svg {
  stroke: #2d2d2d;
}

.feed-action-btn.liked {
  color: #ef4444;
}

.feed-action-btn.liked svg {
  fill: #ef4444;
  stroke: #ef4444;
}

.feed-action-btn.liked:hover {
  background: transparent !important;
  box-shadow: none !important;
  border: none !important;
  color: #dc2626;
  transform: scale(1.05) !important;
}

.feed-action-btn.liked:hover svg {
  fill: #dc2626;
  stroke: #dc2626;
}

.feed-action-btn.bookmarked {
  color: #f59e0b;
}

.feed-action-btn.bookmarked svg {
  fill: #f59e0b;
  stroke: #f59e0b;
}

.feed-action-btn.bookmarked:hover {
  background: transparent !important;
  box-shadow: none !important;
  border: none !important;
  color: #d97706;
  transform: scale(1.05) !important;
}

.feed-action-btn.bookmarked:hover svg {
  fill: #d97706;
  stroke: #d97706;
}

.feed-action-count {
  font-size: 15px;
  font-weight: 500;
  line-height: 1;
}

/* Inline Comments Section - Minimal Style */
.feed-comments-section {
  background: #ffffff;
  padding: 0;
  margin-top: 0;
}

.feed-comments-section.hidden {
  display: none;
}

.feed-comments-list {
  max-height: 400px;
  overflow-y: auto;
  overflow-x: visible;
  background: #ffffff;
}

.feed-comment-item {
  display: flex;
  gap: 12px;
  padding: 16px 0;
  background: #ffffff;
  border-bottom: none;
  position: relative;
  overflow: visible;
}

.feed-comment-item:last-child {
  border-bottom: none;
}

.feed-comment-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
  flex-shrink: 0;
}

.feed-comment-content {
  flex: 1;
  min-width: 0;
}

.feed-comment-header {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-bottom: 2px;
}

.feed-comment-username {
  font-weight: 600;
  font-size: 15px;
  color: #111827;
}

.feed-comment-time {
  font-size: 11px;
  color: #9ca3af;
  margin-left: 8px;
}

/* Reply Arrow (TikTok style) */
.feed-reply-arrow {
  margin: 0;
  padding: 0;
  width: 12px;
  height: 12px;
  font-size: 0.8em;
  color: #9ca3af;
  flex-shrink: 0;
  display: inline-block;
  vertical-align: middle;
}

.feed-reply-to-username {
  margin: 0;
  padding: 0;
  color: #6b7280;
  font-weight: normal;
  font-size: 15px;
  display: inline-block;
}

/* Comment Menu (Three Dots) */
.feed-comment-menu-wrapper {
  position: relative;
  margin-left: auto;
  margin-right: 16px;
  z-index: 1;
}

.feed-comment-menu-btn {
  /* Reset completo - contenedor invisible */
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  padding: 0 !important;
  margin: 0 !important;
  width: 16px;
  height: 16px;
  min-width: 16px;
  min-height: 16px;
  max-width: 16px;
  max-height: 16px;
  cursor: pointer;
  color: #9ca3af;
  opacity: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  outline: none;
  /* Eliminar focus ring */
  outline-offset: 0;
  -webkit-tap-highlight-color: transparent;
}

.feed-comment-menu-btn:focus,
.feed-comment-menu-btn:focus-visible,
.feed-comment-menu-btn:focus-within {
  outline: none !important;
  box-shadow: none !important;
  border: none !important;
  background: transparent !important;
}

.feed-comment-menu-btn:hover {
  background: transparent !important;
  color: #6b7280;
}

.feed-comment-menu-btn:active {
  background: transparent !important;
  color: #4b5563;
}

/* Asegurar que el SVG ocupe todo el espacio del botón */
.feed-comment-menu-btn svg {
  width: 16px;
  height: 16px;
  display: block;
  flex-shrink: 0;
}

/* Menu Dropdown - Minimalist Modern Style */
/* Base styles for dropdown (used by portal) */
.feed-comment-menu-dropdown {
  background: #ffffff;
  border: 1px solid rgba(0, 0, 0, 0.05);
  border-radius: 12px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);
  min-width: 180px;
  overflow: hidden;
  padding: 6px;
  /* Asegurar que las sombras sigan el border-radius */
  -webkit-mask-image: -webkit-radial-gradient(white, black);
  mask-image: radial-gradient(white, black);
}

/* Portal dropdown uses fixed positioning (set via JS) */
.feed-comment-menu-dropdown-portal {
  position: fixed;
  z-index: 9999;
}

/* Portal container styles */
#dropdown-portal {
  position: fixed;
  top: 0;
  left: 0;
  z-index: 9999;
  pointer-events: none;
}

#dropdown-portal .feed-comment-menu-dropdown {
  pointer-events: auto;
}

.feed-comment-menu-dropdown.hidden {
  display: none;
}

.feed-comment-menu-item {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: transparent !important;
  border: none !important;
  border-radius: 8px;
  box-shadow: none !important;
  outline: none !important;
  cursor: pointer;
  font-size: 15px;
  font-weight: 400;
  color: #374151;
  transition: background-color 0.2s ease, color 0.2s ease;
  text-align: left;
  margin: 2px 0;
  min-height: auto !important;
  white-space: normal !important;
  transform: none !important;
  will-change: auto !important;
  -webkit-backface-visibility: visible !important;
  backface-visibility: visible !important;
  border-width: 0 !important;
  border-style: none !important;
  border-color: transparent !important;
}

.feed-comment-menu-item:hover {
  background: rgba(0, 0, 0, 0.05) !important;
  color: #6366f1;
  box-shadow: none !important;
  border: none !important;
  border-radius: 8px !important;
  transform: none !important;
  border-width: 0 !important;
  border-style: none !important;
  border-color: transparent !important;
}

.feed-comment-menu-item:active {
  background: rgba(0, 0, 0, 0.08) !important;
  color: #4f46e5;
  box-shadow: none !important;
  border: none !important;
  border-radius: 8px !important;
  transform: none !important;
  border-width: 0 !important;
  border-style: none !important;
  border-color: transparent !important;
}

.feed-comment-menu-item svg {
  width: 20px;
  height: 20px;
  flex-shrink: 0;
  stroke: currentColor;
  color: inherit;
}

.feed-comment-menu-item span {
  flex: 1;
  line-height: 1.4;
}

/* Danger/Delete Item - Red accent */
.feed-comment-menu-item-danger {
  color: #ef4444;
}

.feed-comment-menu-item-danger:hover {
  background: rgba(239, 68, 68, 0.08) !important;
  color: #dc2626;
  box-shadow: none !important;
  border: none !important;
  border-radius: 8px !important;
  transform: none !important;
  border-width: 0 !important;
  border-style: none !important;
  border-color: transparent !important;
}

.feed-comment-menu-item-danger:active {
  background: rgba(239, 68, 68, 0.12) !important;
  color: #b91c1c;
  box-shadow: none !important;
  border: none !important;
  border-radius: 8px !important;
  transform: none !important;
  border-width: 0 !important;
  border-style: none !important;
  border-color: transparent !important;
}

.feed-comment-menu-item-danger svg {
  color: inherit;
  stroke: currentColor;
}

/* Comment Text Wrapper */
.feed-comment-text-wrapper {
  margin-top: 12px;
}

.feed-comment-text {
  font-size: 15px;
  color: #374151;
  line-height: 1.5;
  word-wrap: break-word;
  margin: 0;
}

.feed-comment-text.hidden {
  display: none;
}

/* Comment Edit Mode */
.feed-comment-edit-wrapper {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.feed-comment-edit-wrapper.hidden {
  display: none;
}

.feed-comment-edit-input {
  width: 100%;
  padding: 10px 14px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 15px;
  font-family: inherit;
  color: #374151;
  background: #ffffff;
  resize: vertical;
  min-height: 60px;
  outline: none;
  transition: border-color 0.2s;
}

.feed-comment-edit-input:focus {
  border-color: #10b981;
  box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
}

.feed-comment-edit-input:disabled {
  background: #f9fafb;
  cursor: not-allowed;
}

.feed-comment-edit-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

.feed-comment-edit-cancel,
.feed-comment-edit-save {
  padding: 8px 16px;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.feed-comment-edit-cancel {
  background: #f3f4f6;
  color: #374151;
}

.feed-comment-edit-cancel:hover {
  background: #e5e7eb;
}

.feed-comment-edit-save {
  background: #10b981;
  color: #ffffff;
  display: flex;
  align-items: center;
  gap: 6px;
}

.feed-comment-edit-save:hover:not(:disabled) {
  background: #059669;
}

.feed-comment-edit-save:disabled {
  background: #9ca3af;
  cursor: not-allowed;
}

.feed-comment-edit-save-text,
.feed-comment-edit-save-loading {
  display: inline-block;
}

.feed-comment-edit-save-text.hidden,
.feed-comment-edit-save-loading.hidden {
  display: none;
}

/* ================== COMMENT ACTION BAR (Likes & Replies) ================== */

.feed-comment-actions {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-top: 6px;
  padding-left: 0;
}

/* Ghost style buttons: transparent, no borders, no shadows, no background */
.feed-comment-action-btn,
.feed-comment-view-replies {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  padding: 2px 0;
  cursor: pointer;
  color: #9ca3af;
  font-size: 12px;
  font-weight: 500;
  transition: color 0.15s ease;
  outline: none;
}

/* Hover: only change text color to #2d2d2d, no background change */
.feed-comment-action-btn:hover,
.feed-comment-view-replies:hover {
  color: #2d2d2d;
  background: transparent !important;
}

.feed-comment-action-btn:focus,
.feed-comment-action-btn:active,
.feed-comment-view-replies:focus,
.feed-comment-view-replies:active {
  background: transparent !important;
  box-shadow: none !important;
  outline: none !important;
}

.feed-comment-action-btn svg,
.feed-comment-view-replies svg {
  width: 14px;
  height: 14px;
  stroke-width: 2;
}

.feed-comment-action-btn.liked {
  color: #ef4444;
}

.feed-comment-action-btn.liked svg {
  fill: #ef4444;
  stroke: #ef4444;
}

.feed-comment-action-count {
  font-size: 12px;
  min-width: 8px;
}

/* ================== COMMENT REPLIES (Nested) ================== */

.feed-comment-replies {
  margin-top: 8px;
  margin-left: 32px;
  padding-left: 12px;
  border-left: 2px solid #e5e7eb;
}

.feed-comment-replies .feed-comment-item {
  padding: 8px 0;
  border-bottom: none;
}

.feed-comment-replies .feed-comment-item:last-child {
  padding-bottom: 0;
}

.feed-comment-replies .feed-comment-avatar {
  width: 28px;
  height: 28px;
}

.feed-comment-replies .feed-comment-content {
  font-size: 13px;
}

/* Reply form inline */
.feed-comment-reply-form {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
  margin-left: 32px;
  padding-left: 12px;
}

.feed-comment-reply-form.hidden {
  display: none;
}

/* Reply-to-reply form (inside replies container - no extra margin) */
.feed-reply-to-reply-form {
  margin-left: 0;
  padding-left: 0;
  margin-top: 8px;
}

.feed-comment-reply-input {
  flex: 1;
  border: 1px solid #e5e7eb;
  border-radius: 18px;
  padding: 6px 12px;
  font-size: 13px;
  outline: none;
  transition: border-color 0.15s ease;
}

.feed-comment-reply-input:focus {
  border-color: #10b981;
}

.feed-comment-reply-submit {
  background: #2d2d2d !important;
  color: #ffffff;
  border: none;
  padding: 0 !important;
  margin: 0;
  width: 36px;
  height: 36px;
  min-width: 36px;
  min-height: 36px;
  max-width: 36px;
  max-height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.15s ease;
  border-radius: 50%;
  flex-shrink: 0;
  box-sizing: border-box;
}

.feed-comment-reply-submit:hover {
  background: #2d2d2d !important;
  opacity: 0.9;
}

.feed-comment-reply-submit:active {
  transform: scale(0.95);
}

.feed-comment-reply-submit:disabled {
  background: #2d2d2d !important;
  color: #ffffff;
  cursor: pointer;
  opacity: 0.6;
}

.feed-comment-reply-submit svg {
  width: 18px;
  height: 18px;
  stroke: currentColor;
  stroke-width: 2.5;
}

/* Loading state for replies */
.feed-comment-replies-loading {
  margin-left: 32px;
  padding: 8px 12px;
  color: #9ca3af;
  font-size: 12px;
}

/* ================== POST MENU STYLES ================== */

.feed-post-menu-wrapper {
  position: relative;
  margin-left: auto;
  margin-right: 16px;
}

.feed-post-menu-btn {
  /* Reset completo - contenedor invisible */
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  padding: 0 !important;
  margin: 0 !important;
  width: 16px;
  height: 16px;
  min-width: 16px;
  min-height: 16px;
  max-width: 16px;
  max-height: 16px;
  cursor: pointer;
  color: #9ca3af;
  opacity: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  outline: none;
  outline-offset: 0;
  -webkit-tap-highlight-color: transparent;
}

.feed-post-menu-btn:focus,
.feed-post-menu-btn:focus-visible,
.feed-post-menu-btn:focus-within {
  outline: none !important;
  box-shadow: none !important;
  border: none !important;
  background: transparent !important;
}

.feed-post-menu-btn:hover {
  background: transparent !important;
  color: #6b7280;
}

.feed-post-menu-btn:active {
  background: transparent !important;
  color: #4b5563;
}

.feed-post-menu-btn svg {
  width: 16px;
  height: 16px;
  display: block;
  flex-shrink: 0;
}

.feed-post-menu-dropdown {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 8px;
  background: #ffffff;
  border: 1px solid rgba(0, 0, 0, 0.05);
  border-radius: 12px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);
  min-width: 180px;
  z-index: 1000;
  overflow: hidden;
  padding: 6px;
  /* Asegurar que las sombras sigan el border-radius */
  -webkit-mask-image: -webkit-radial-gradient(white, black);
  mask-image: radial-gradient(white, black);
}

.feed-post-menu-dropdown.hidden {
  display: none;
}

.feed-post-menu-item {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: transparent !important;
  border: none !important;
  border-radius: 8px;
  box-shadow: none !important;
  outline: none !important;
  cursor: pointer;
  font-size: 15px;
  font-weight: 400;
  color: #374151;
  transition: background-color 0.2s ease, color 0.2s ease;
  text-align: left;
  margin: 2px 0;
  min-height: auto !important;
  white-space: normal !important;
  transform: none !important;
  will-change: auto !important;
  -webkit-backface-visibility: visible !important;
  backface-visibility: visible !important;
  border-width: 0 !important;
  border-style: none !important;
  border-color: transparent !important;
}

.feed-post-menu-item:hover {
  background: rgba(0, 0, 0, 0.05) !important;
  color: #6366f1;
  box-shadow: none !important;
  border: none !important;
  border-radius: 8px !important;
  transform: none !important;
  border-width: 0 !important;
  border-style: none !important;
  border-color: transparent !important;
}

.feed-post-menu-item:active {
  background: rgba(0, 0, 0, 0.08) !important;
  color: #4f46e5;
  box-shadow: none !important;
  border: none !important;
  border-radius: 8px !important;
  transform: none !important;
  border-width: 0 !important;
  border-style: none !important;
  border-color: transparent !important;
}

.feed-post-menu-item svg {
  width: 20px;
  height: 20px;
  flex-shrink: 0;
  stroke: currentColor;
  color: inherit;
}

.feed-post-menu-item span {
  flex: 1;
  line-height: 1.4;
}

.feed-post-menu-item-danger {
  color: #ef4444;
}

.feed-post-menu-item-danger:hover {
  background: rgba(239, 68, 68, 0.08) !important;
  color: #dc2626;
  box-shadow: none !important;
  border: none !important;
  border-radius: 8px !important;
  transform: none !important;
  border-width: 0 !important;
  border-style: none !important;
  border-color: transparent !important;
}

.feed-post-menu-item-danger:active {
  background: rgba(239, 68, 68, 0.12) !important;
  color: #b91c1c;
  box-shadow: none !important;
  border: none !important;
  border-radius: 8px !important;
  transform: none !important;
  border-width: 0 !important;
  border-style: none !important;
  border-color: transparent !important;
}

.feed-post-menu-item-danger svg {
  color: inherit;
  stroke: currentColor;
}

/* Post Text Edit Styles */
.feed-text-body-wrapper {
  position: relative;
}

.feed-text-edit-wrapper {
  margin-top: 8px;
}

.feed-text-edit-wrapper.hidden {
  display: none;
}

.feed-text-edit-input {
  width: 100%;
  padding: 12px;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  font-size: 15px;
  font-family: inherit;
  color: #374151;
  resize: vertical;
  min-height: 80px;
  line-height: 1.5;
  background: #ffffff;
  transition: border-color 0.2s ease;
}

.feed-text-edit-input:focus {
  outline: none;
  border-color: #10b981;
  box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
}

.feed-text-edit-actions {
  display: flex;
  gap: 8px;
  margin-top: 12px;
  justify-content: flex-end;
}

.feed-text-edit-cancel,
.feed-text-edit-save {
  padding: 8px 16px;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.feed-text-edit-cancel {
  background: #f3f4f6;
  color: #374151;
}

.feed-text-edit-cancel:hover {
  background: #e5e7eb;
}

.feed-text-edit-save {
  background: #10b981;
  color: #ffffff;
  display: flex;
  align-items: center;
  gap: 6px;
}

.feed-text-edit-save:hover:not(:disabled) {
  background: #059669;
}

.feed-text-edit-save:disabled {
  background: #9ca3af;
  cursor: not-allowed;
}

.feed-text-edit-save-text,
.feed-text-edit-save-loading {
  display: inline-block;
}

.feed-text-edit-save-text.hidden,
.feed-text-edit-save-loading.hidden {
  display: none;
}

.feed-comment-form {
  display: flex;
  gap: 12px;
  align-items: center;
  padding: 16px 0;
  padding-right: 16px;
  border-bottom: 1px solid #f3f4f6;
}

.feed-comment-form-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
  flex-shrink: 0;
}

.feed-comment-input {
  flex: 1;
  padding: 12px 16px;
  border: 1px solid transparent;
  background: #f9fafb;
  border-radius: 24px;
  font-size: 15px;
  outline: none;
  min-height: 44px;
  transition: border-color 0.2s ease, background 0.2s ease;
}

.feed-comment-input::placeholder {
  color: #9ca3af;
}

.feed-comment-input:focus {
  background: #f3f4f6;
  border-color: #2d2d2d;
  outline: none;
  box-shadow: 0 0 0 3px rgba(45, 45, 45, 0.1);
}

.feed-comment-submit {
  background: #2d2d2d;
  color: #ffffff;
  border: none;
  padding: 0 !important;
  margin: 0;
  width: 36px;
  height: 36px;
  min-width: 36px;
  min-height: 36px;
  max-width: 36px;
  max-height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.15s ease;
  border-radius: 50%;
  flex-shrink: 0;
  box-sizing: border-box;
}

.feed-comment-submit svg {
  width: 18px;
  height: 18px;
  stroke: currentColor;
  stroke-width: 2.5;
}

.feed-comment-submit:hover {
  background: #1a1a1a;
}

.feed-comment-submit:active {
  transform: scale(0.95);
}

.feed-comment-submit:disabled {
  background: #e5e7eb;
  color: #9ca3af;
  cursor: not-allowed;
  transform: none;
}

.no-comments {
  text-align: center;
  color: #9ca3af;
  font-size: 14px;
  padding: 32px 0;
  margin: 0;
}

.comments-error {
  text-align: center;
  color: #ef4444;
  font-size: 14px;
  padding: 32px 0;
  margin: 0;
}

.loading-spinner-small {
  text-align: center;
  color: #9ca3af;
  font-size: 14px;
  padding: 32px 0;
}

/* Kudos/Likes inline - Strava style */
.feed-kudos {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 0 0;
  font-size: 13px;
  color: #6b7280;
}

.feed-kudos-avatars {
  display: flex;
  margin-right: 4px;
}

.feed-kudos-avatar {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  border: 2px solid #ffffff;
  margin-left: -6px;
  object-fit: cover;
}

.feed-kudos-avatar:first-child {
  margin-left: 0;
}

/* Legacy support */
.feed-likes {
  display: none;
}

.feed-caption {
  display: none;
}

.feed-user-info {
  display: flex;
  align-items: center;
  gap: 12px;
}

.feed-map-btn {
  font-size: 13px;
  color: #6366f1;
  font-weight: 600;
  background: rgba(99, 102, 241, 0.08);
  border: none;
  border-radius: 9999px;
  box-shadow: none;
  padding: 8px 16px;
  cursor: pointer;
  margin-top: 12px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  transition: all 0.2s;
}

.feed-map-btn:hover {
  background: rgba(99, 102, 241, 0.12);
}

/* Empty State */
.feed-empty {
  text-align: center;
  padding: 80px 20px;
  color: #6b7280;
}

.feed-empty-icon {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.5;
}

.feed-empty h3 {
  font-size: 18px;
  font-weight: 600;
  color: #374151;
  margin: 0 0 8px 0;
}

.feed-empty p {
  font-size: 14px;
  margin: 0;
}

/* Article specific styles */
.feed-card-article .feed-media-wrapper {
  margin-top: 16px;
}

.feed-article-excerpt {
  color: #6b7280;
  margin-top: 8px;
}

/* Adjust top bar for Map View */
#map-view .top-bar-wrapper {
  display: flex;
}

#feed-view .top-bar-wrapper,
#profile-view .top-bar-wrapper {
  display: none;
}

/* Hide top bar by default - only show in map view */
.top-bar-wrapper {
  display: none;
}

/* Auth container always hidden (removed from map) */
#auth-container {
  display: none !important;
}

/* Show top bar when map view is active */
#map-view~.top-bar-wrapper {
  display: flex;
}

body.map-active .top-bar-wrapper {
  display: flex;
}

/* ================================
   PROFILE VIEW STYLES
   ================================ */

.profile-scroll-container {
  min-height: 100%;
  overflow-y: visible;
  padding: 20px;
  padding-bottom: 100px;
  background: #ffffff;
  width: 100%;
  max-width: 800px;
  margin: 0 auto;
  box-sizing: border-box;
}

/* En pantallas grandes, mantener el max-width y centrado */
@media (min-width: 768px) {
  .profile-scroll-container {
    padding: 20px 24px 100px 24px;
  }
}

/* ================== PROFILE INSTAGRAM STYLE ================== */
.profile-header-ig {
  background: transparent;
  border-radius: 0;
  padding: 24px 0;
  /* Safe Area para móvil - respeta notch/cámara */
  padding-top: max(24px, calc(env(safe-area-inset-top) + 16px));
  margin-bottom: 0;
  box-shadow: none;
  border: none;
  position: relative;
}

.settings-btn-ig {
  position: absolute;
  top: 28px;
  right: 16px;
  background: transparent;
  border: none;
  padding: 8px;
  border-radius: 8px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s;
}

.settings-btn-ig:hover {
  background: rgba(0, 0, 0, 0.05);
  color: var(--text-primary);
}

/* Settings Dropdown Menu */
.settings-dropdown {
  position: absolute;
  top: 50px;
  right: 16px;
  width: 200px;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  border: 1px solid #e0e0e0;
  z-index: 1000;
  overflow: hidden;
  animation: settingsDropdownIn 0.2s ease;
}

.settings-dropdown.hidden {
  display: none;
}

@keyframes settingsDropdownIn {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.settings-menu-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 16px;
  cursor: pointer;
  transition: background 0.15s;
  color: #333;
  font-size: 14px;
}

.settings-menu-item:hover {
  background: #f5f5f5;
}

.settings-menu-item svg {
  flex-shrink: 0;
  color: #666;
}

.settings-menu-divider {
  height: 1px;
  background: #eee;
  margin: 4px 0;
}

.settings-menu-item.logout {
  color: #e53935;
}

.settings-menu-item.logout svg {
  color: #e53935;
}

.settings-menu-item.logout:hover {
  background: #ffebee;
}

.settings-menu-item.admin-only {
  color: #667eea;
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
  border-radius: 8px;
  margin: 4px 8px;
}

.settings-menu-item.admin-only svg {
  color: #667eea;
}

.settings-menu-item.admin-only:hover {
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.2) 0%, rgba(118, 75, 162, 0.2) 100%);
}

/* Top Row: Avatar + Info side by side */
.profile-top-row {
  display: flex;
  gap: 28px;
  align-items: flex-start;
  margin-bottom: 20px;
}

.profile-avatar-wrapper-ig {
  flex-shrink: 0;
}

.profile-avatar-ig {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid transparent;
  background: linear-gradient(white, white) padding-box,
    linear-gradient(135deg, #833ab4, #fd1d1d, #fcb045) border-box;
  transition: opacity 0.3s ease;
  background-color: #f3f4f6;
}

.profile-avatar-ig[src=""],
.profile-avatar-ig:not([src]) {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.profile-info-ig {
  flex: 1;
  min-width: 0;
}

.profile-displayname-ig {
  font-size: 22px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0 0 8px;
}

/* Inline Stats */
.profile-stats-inline {
  display: flex;
  gap: 20px;
  flex-wrap: wrap;
  margin-bottom: 8px;
}

.stat-inline {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  padding: 0 !important;
  margin: 0;
  font-size: 16px;
  color: #2d2d2d;
  cursor: pointer;
  transition: opacity 0.2s;
  font-family: inherit;
  -webkit-appearance: none;
  appearance: none;
}

.stat-inline:hover {
  opacity: 0.7;
}

.stat-inline strong {
  font-weight: 700;
  color: #2d2d2d;
}

/* Bio Section */
.profile-bio-section {
  margin-bottom: 16px;
  margin-top: 0;
}

.profile-category-ig {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-secondary);
  margin: 0 0 4px;
}

.profile-bio-ig {
  font-size: 14px;
  color: var(--text-primary);
  margin: 0 0 6px;
  line-height: 1.5;
  white-space: pre-line;
}

.profile-location-ig {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 13px;
  color: var(--text-secondary);
  margin: 0;
}

.profile-location-ig svg {
  stroke: var(--text-secondary);
}

/* Action Buttons */
.profile-actions-ig {
  display: flex;
  gap: 10px;
}

.profile-btn-ig {
  flex: 1;
  padding: 10px 16px;
  background: #f3f4f6;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  color: #1f2937;
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

.profile-btn-ig:hover {
  background: #e5e7eb;
}

.profile-btn-ig:active {
  transform: scale(0.98);
}

/* Climbing Stats Card (IG style) */
.profile-card-ig {
  background: transparent;
  border-radius: 0;
  margin-bottom: 0;
  box-shadow: none;
  border: none;
  overflow: visible;
}

.profile-card-header-ig {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 0;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-secondary);
  border-bottom: none;
  border: none;
}

.profile-card-header-ig svg {
  stroke: #2d2d2d;
  color: #2d2d2d;
  width: 14px;
  height: 14px;
}

.profile-climbing-grid-ig {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0;
}

.climbing-metric-ig {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 12px 8px;
  text-align: center;
  border: none;
  border-right: none;
}

.climbing-metric-ig:last-child {
  border-right: none;
}

.climbing-metric-icon-ig {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 4px;
  color: #2d2d2d;
}

.climbing-metric-icon-ig svg {
  width: 20px;
  height: 20px;
  color: #2d2d2d;
  stroke: currentColor;
}

.climbing-metric-value-ig {
  font-size: 20px;
  font-weight: 700;
  color: #2d2d2d;
  margin-bottom: 2px;
  line-height: 1.2;
}

.climbing-metric-label-ig {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.03em;
  color: var(--text-secondary);
  line-height: 1.2;
}

/* Stats Row */
.profile-stats-row {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px 12px;
  margin: 0 20px 20px;
  background: linear-gradient(135deg, rgba(99, 102, 241, 0.06) 0%, rgba(139, 92, 246, 0.04) 100%);
  border-radius: 16px;
  border: 1px solid rgba(99, 102, 241, 0.1);
}

.profile-stat-block {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  background: none;
  border: none;
  cursor: pointer;
  padding: 10px 16px;
  transition: all 0.2s ease;
  border-radius: 12px;
}

.profile-stat-block:hover {
  background: rgba(99, 102, 241, 0.08);
  transform: translateY(-2px);
}

.profile-stat-number {
  font-size: 24px;
  font-weight: 800;
  color: var(--text-primary);
  line-height: 1.2;
}

.profile-stat-text {
  font-size: 11px;
  color: var(--text-secondary);
  margin-top: 4px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-weight: 500;
}

.profile-stat-divider {
  width: 1px;
  height: 40px;
  background: linear-gradient(180deg, transparent 0%, var(--border-color) 20%, var(--border-color) 80%, transparent 100%);
}

/* Action Buttons */
.profile-action-row {
  display: flex;
  gap: 12px;
  padding: 0 20px 24px;
}

.profile-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 14px 24px;
  border-radius: 12px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.25s ease;
  border: none;
}

.profile-btn.primary {
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #a855f7 100%);
  color: white;
  box-shadow: 0 4px 16px rgba(99, 102, 241, 0.35),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.profile-btn.primary:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(99, 102, 241, 0.45),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.profile-btn.secondary {
  background: var(--bg-primary);
  color: var(--text-primary);
  border: 1.5px solid var(--border-color);
}

.profile-btn.secondary:hover {
  background: var(--bg-secondary);
  border-color: var(--accent-primary);
  color: var(--accent-primary);
  transform: translateY(-2px);
}

.profile-btn svg {
  flex-shrink: 0;
  opacity: 0.9;
}

/* ================== PROFILE CARDS ================== */
.profile-card {
  background: var(--bg-primary);
  border-radius: 20px;
  margin-bottom: 16px;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
  overflow: hidden;
}

.profile-card-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border-color);
  font-weight: 600;
  font-size: 15px;
  color: var(--text-primary);
}

.profile-card-header svg {
  stroke: var(--accent-primary);
}

.profile-card-content {
  padding: 20px;
}

.profile-bio-text {
  font-size: 15px;
  line-height: 1.6;
  color: var(--text-primary);
  margin: 0 0 16px;
  white-space: pre-line;
}

.profile-category-tag {
  display: inline-flex;
  padding: 8px 16px;
  background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
  border-radius: 20px;
  font-size: 14px;
  color: var(--accent-primary);
}

/* Climbing Stats Grid */
.profile-climbing-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  padding: 20px;
}

.climbing-metric {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  padding: 16px 12px;
  background: linear-gradient(135deg, rgba(99, 102, 241, 0.06) 0%, rgba(139, 92, 246, 0.06) 100%);
  border-radius: 16px;
}

.climbing-metric-icon {
  font-size: 28px;
  margin-bottom: 8px;
}

.climbing-metric-value {
  font-size: 22px;
  font-weight: 700;
  color: var(--accent-primary);
  line-height: 1.2;
}

.climbing-metric-label {
  font-size: 11px;
  color: var(--text-secondary);
  margin-top: 4px;
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.profile-actions {
  display: flex;
  gap: 8px;
}

.profile-action-btn {
  flex: 1;
  background: rgba(0, 0, 0, 0.05);
  border: none;
  border-radius: var(--radius-md);
  padding: 10px 16px;
  font-weight: 600;
  font-size: 14px;
  color: var(--text-primary);
  cursor: pointer;
  transition: all var(--transition-fast);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.profile-action-btn:hover {
  background: rgba(0, 0, 0, 0.08);
}

.profile-action-btn.primary {
  background: var(--accent-gradient);
  color: white;
}

.profile-action-btn.primary:hover {
  opacity: 0.9;
  transform: translateY(-1px);
}

.profile-action-btn:not(.primary) {
  flex: 0;
  padding: 10px 14px;
}

/* Profile Tabs - Minimalist Floating Style */
.profile-tabs {
  display: flex;
  background: transparent;
  border: none;
  margin: 0;
  padding: 0;
  gap: 0;
}

.profile-tab {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px 0;
  background: transparent !important;
  border: none !important;
  margin: 0;
  cursor: pointer;
  color: #9ca3af;
  font-size: 15px;
  font-weight: 500;
  transition: color 0.2s ease;
  position: relative;
  box-shadow: none !important;
  outline: none !important;
}

.profile-tab:hover {
  color: #111827;
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  outline: none !important;
}

.profile-tab:focus,
.profile-tab:active,
.profile-tab:focus-visible {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  outline: none !important;
}

.profile-tab.active {
  color: #111827;
  font-weight: 600;
}

.profile-tab.active::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: #111827;
}

.profile-tab span {
  display: inline-block;
}

/* Tab Content */
.profile-tab-content {
  display: none;
  background: transparent;
  border: none;
  padding: 0;
  margin: 0;
}

.profile-tab-content.active {
  display: block;
  background: transparent;
}

/* Posts Grid */
.profile-grid {
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin-top: 20px;
  width: 100%;
}

/* Profile grid now uses feed-card components, so we ensure they take full width */
.profile-grid .feed-card {
  width: 100%;
  max-width: 100%;
  border-bottom: none;
  box-shadow: none;
}

.profile-grid-item:hover {
  opacity: 0.9;
}

.profile-grid-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.profile-grid-item:hover img {
  transform: scale(1.05);
  transition: transform 0.3s ease;
}

.profile-grid-video-icon {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 48px;
  height: 48px;
  background: rgba(0, 0, 0, 0.6);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
}

.profile-grid-video-icon svg {
  width: 24px;
  height: 24px;
  fill: white;
}

.profile-grid-item-text {
  background: #ffffff;
  border: 1px solid #e5e7eb;
}

.profile-grid-text-preview {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 16px;
  text-align: center;
  color: #6b7280;
}

.profile-grid-text-preview svg {
  margin-bottom: 8px;
  opacity: 0.5;
}

.profile-grid-text-preview p {
  margin: 0;
  font-size: 12px;
  line-height: 1.4;
  color: #9ca3af;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
}

.grid-item {
  position: relative;
  padding-bottom: 100%;
  background: var(--bg-primary);
  overflow: hidden;
  cursor: pointer;
}

.grid-item:hover .grid-image {
  transform: scale(1.05);
}

.grid-image {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform var(--transition-normal);
}

/* Ascents List */
.ascents-list {
  padding: 8px 0;
}

.ascent-item {
  display: flex;
  align-items: center;
  padding: 12px 16px;
  background: var(--bg-secondary);
  margin: 0 12px 8px;
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-sm);
  gap: 12px;
  transition: all var(--transition-fast);
}

.ascent-item:hover {
  box-shadow: var(--shadow-md);
}

.ascent-grade {
  width: 48px;
  height: 48px;
  border-radius: var(--radius-md);
  background: var(--accent-gradient);
  color: white;
  font-weight: 700;
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.ascent-info {
  flex: 1;
  min-width: 0;
}

.ascent-name {
  font-weight: 600;
  font-size: 15px;
  color: var(--text-primary);
  margin-bottom: 2px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.ascent-location {
  font-size: 13px;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.ascent-meta {
  text-align: right;
  flex-shrink: 0;
}

.ascent-date {
  font-size: 12px;
  color: var(--text-muted);
}

.ascent-style {
  font-size: 11px;
  color: var(--accent-primary);
  font-weight: 600;
  margin-top: 2px;
}

/* Saved List */
.saved-list {
  padding: 8px 0;
}

.saved-item {
  display: flex;
  align-items: center;
  padding: 12px 16px;
  background: var(--bg-secondary);
  margin: 0 12px 8px;
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-sm);
  gap: 12px;
}

.saved-icon {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: rgba(139, 92, 246, 0.1);
  color: var(--accent-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  flex-shrink: 0;
}

.saved-info {
  flex: 1;
  min-width: 0;
}

.saved-name {
  font-weight: 600;
  font-size: 15px;
  color: var(--text-primary);
}

.saved-grade {
  font-size: 13px;
  color: var(--text-secondary);
}

/* Empty state */
.empty-state {
  padding: 40px 20px;
  text-align: center;
  color: var(--text-muted);
}

.empty-state-icon {
  font-size: 48px;
  margin-bottom: 12px;
  opacity: 0.5;
}

.empty-state-text {
  font-size: 14px;
}

/* ================== GLOBAL SEARCH MODAL ================== */
.search-modal-body {
  padding: 0;
}

.search-input-container {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px 20px;
  background: var(--bg-primary);
  border-bottom: 1px solid var(--border-color);
}

.search-input-container input {
  flex: 1;
  border: none;
  background: transparent;
  font-size: 16px;
  outline: none;
  color: var(--text-primary);
}

.search-input-container input::placeholder {
  color: var(--text-muted);
}

.search-tabs {
  display: flex;
  gap: 8px;
  padding: 12px 20px;
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border-color);
  overflow-x: auto;
}

.search-tab {
  padding: 8px 16px;
  border-radius: var(--radius-full);
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  white-space: nowrap;
  transition: all var(--transition-fast);
}

.search-tab:hover {
  background: var(--accent-primary);
  color: white;
  border-color: var(--accent-primary);
}

.search-tab.active {
  background: var(--accent-primary);
  color: white;
  border-color: var(--accent-primary);
}

.search-results {
  padding: 16px 20px;
  max-height: 50vh;
  overflow-y: auto;
}

.search-placeholder {
  text-align: center;
  color: var(--text-muted);
  padding: 40px 0;
}

.search-result-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: background var(--transition-fast);
}

.search-result-item:hover {
  background: var(--bg-primary);
}

.search-result-avatar {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  object-fit: cover;
  background: #eee;
}

.search-result-icon {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 18px;
}

.search-result-info {
  flex: 1;
  min-width: 0;
}

.search-result-name {
  font-weight: 600;
  font-size: 14px;
  color: var(--text-primary);
}

.search-result-meta {
  font-size: 12px;
  color: var(--text-secondary);
  margin-top: 2px;
}

.search-section-title {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 12px 0 8px;
  border-bottom: 1px solid var(--border-color);
  margin-bottom: 8px;
}

/* ================== PUBLIC PROFILE MODAL ================== */
.public-profile-body {
  padding: 0;
}

.public-profile-header {
  display: flex;
  gap: 20px;
  padding: 24px 20px;
  background: transparent;
  color: var(--text-primary);
}

.public-profile-avatar {
  width: 90px;
  height: 90px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid transparent;
  box-shadow: none;
}

.public-profile-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.public-profile-name {
  font-size: 22px;
  font-weight: 700;
  margin-bottom: 4px;
  color: var(--text-primary);
}

.public-profile-location {
  font-size: 14px;
  color: var(--text-secondary);
  margin-bottom: 8px;
}

.public-profile-bio {
  font-size: 13px;
  color: var(--text-primary);
  line-height: 1.4;
}

.public-profile-stats {
  display: flex;
  justify-content: space-around;
  padding: 16px;
  background: var(--bg-primary);
  border-bottom: 1px solid var(--border-color);
}

.pp-stat {
  text-align: center;
}

.pp-stat-value {
  display: block;
  font-size: 20px;
  font-weight: 700;
  color: var(--text-primary);
}

.pp-stat-label {
  font-size: 12px;
  color: var(--text-secondary);
}

.public-profile-actions {
  display: flex;
  gap: 10px;
  padding: 0;
  background: transparent;
  border: none;
}

.follow-btn-large {
  flex: 1;
  padding: 10px 16px;
  background: #2d2d2d;
  color: white;
  font-weight: 600;
  font-size: 14px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

.follow-btn-large:hover {
  background: #1f1f1f;
}

.follow-btn-large:active {
  transform: scale(0.98);
}

.follow-btn-large.following {
  background: white;
  color: #2d2d2d;
  border: 1px solid #d1d5db;
}

.follow-btn-large.following:hover {
  background: #f3f4f6;
}

.message-btn-large {
  flex: 1;
  padding: 10px 16px;
  background: white;
  color: #2d2d2d;
  font-weight: 600;
  font-size: 14px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

.message-btn-large:hover {
  background: #f3f4f6;
}

.message-btn-large:active {
  transform: scale(0.98);
}

.public-profile-tabs {
  display: flex;
  background: transparent;
  border: none;
  margin: 0;
  padding: 0;
  gap: 0;
}

.pp-tab {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px 0;
  background: transparent !important;
  border: none !important;
  margin: 0;
  cursor: pointer;
  color: #9ca3af;
  font-size: 15px;
  font-weight: 500;
  transition: color 0.2s ease;
  position: relative;
  box-shadow: none !important;
  outline: none !important;
}

.pp-tab:hover {
  color: #111827;
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  outline: none !important;
}

.pp-tab:focus,
.pp-tab:active,
.pp-tab:focus-visible {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  outline: none !important;
}

.pp-tab.active {
  color: #111827;
  font-weight: 600;
}

.pp-tab.active::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: #111827;
}

.pp-tab-content {
  display: none;
  padding: 16px;
  max-height: 300px;
  overflow-y: auto;
}

.pp-tab-content.active {
  display: block;
}

/* ================== SOCIAL LIST MODAL (Followers/Following) ================== */
.social-list-container {
  padding: 0;
  max-height: 60vh;
  overflow-y: auto;
}

.social-list-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 20px;
  border-bottom: 1px solid var(--border-color);
  transition: background var(--transition-fast);
}

.social-list-item:hover {
  background: var(--bg-primary);
}

.social-list-item:last-child {
  border-bottom: none;
}

.social-list-avatar {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  object-fit: cover;
  cursor: pointer;
}

.social-list-info {
  flex: 1;
  min-width: 0;
  cursor: pointer;
}

.social-list-name {
  font-weight: 600;
  font-size: 15px;
  color: var(--text-primary);
}

.social-list-bio {
  font-size: 13px;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.social-list-btn {
  padding: 8px 18px;
  border-radius: var(--radius-full);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.social-list-btn.follow {
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
  color: white;
  border: none;
}

.social-list-btn.following {
  background: var(--bg-primary);
  color: var(--text-secondary);
  border: 1px solid var(--border-color);
}

.social-list-empty {
  padding: 40px 20px;
  text-align: center;
  color: var(--text-muted);
}

.social-list-empty-icon {
  font-size: 40px;
  margin-bottom: 12px;
  opacity: 0.5;
}

/* ================== EDIT PROFILE MODAL ================== */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  backdrop-filter: blur(4px);
}

.modal-overlay.hidden {
  display: none;
}

.edit-profile-modal-content {
  background: var(--bg-primary);
  border-radius: 16px;
  width: 90%;
  max-width: 440px;
  max-height: 90vh;
  overflow-y: auto;
  animation: modalSlideUp 0.3s ease;
}

@keyframes modalSlideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.edit-profile-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border-color);
}

.edit-profile-header h2 {
  font-size: 18px;
  font-weight: 600;
  margin: 0;
}

.modal-close-btn {
  background: #f3f4f6;
  border: none;
  width: 32px;
  height: 32px;
  min-width: 32px;
  min-height: 32px;
  max-width: 32px;
  max-height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: #6b7280;
  transition: all 0.2s ease;
  font-size: 20px;
  font-weight: 300;
  line-height: 1;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  padding: 0;
  box-sizing: border-box;
}

.modal-close-btn:hover {
  background: #e5e7eb;
  color: #374151;
}

.modal-close-btn:active {
  transform: scale(0.95);
}

.edit-profile-form {
  padding: 20px;
}

.edit-photo-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 24px;
}

.edit-photo-preview {
  position: relative;
  width: 100px;
  height: 100px;
  border-radius: 50%;
  overflow: hidden;
  cursor: pointer;
}

.edit-photo-preview img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.edit-photo-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.2s;
}

.edit-photo-overlay svg {
  stroke: white;
}

.edit-photo-preview:hover .edit-photo-overlay {
  opacity: 1;
}

.edit-photo-hint {
  font-size: 12px;
  color: var(--text-muted);
  margin-top: 8px;
}

.edit-form-group {
  margin-bottom: 20px;
}

.edit-form-group label {
  display: block;
  font-size: 14px;
  font-weight: 500;
  margin-bottom: 8px;
  color: var(--text-primary);
}

.edit-form-group input,
.edit-form-group textarea {
  width: 100%;
  padding: 12px 14px;
  border: 1px solid var(--border-color);
  border-radius: 10px;
  font-size: 15px;
  background: var(--bg-secondary);
  color: var(--text-primary);
  transition: border-color 0.2s, box-shadow 0.2s;
}

.edit-form-group input:focus,
.edit-form-group textarea:focus {
  outline: none;
  border-color: var(--accent-color);
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

.edit-form-group textarea {
  resize: none;
  font-family: inherit;
  line-height: 1.5;
}

.edit-char-count {
  display: block;
  text-align: right;
  font-size: 12px;
  color: var(--text-muted);
  margin-top: 4px;
}

.edit-profile-form .submit-btn {
  width: 100%;
  padding: 14px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
}

.edit-profile-form .submit-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4);
  background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
}

.edit-profile-form .submit-btn:active {
  transform: translateY(0);
  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
}

.edit-profile-form .submit-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
  background: #9ca3af;
  box-shadow: none;
}

/* =========================
   NUEVO LOGIN - GLASS DESIGN
   ========================= */

/* Social Buttons Wrapper */
.social-buttons-wrapper {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 0;
  margin-bottom: 8px;
  animation: fadeIn 0.4s ease-out 0.4s backwards;
}

/* Social Buttons con Glass Effect */
.social-btn-glass {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  width: 100%;
  padding: 14px 16px;
  border-radius: 12px;
  font-size: 15px;
  font-weight: 500;
  line-height: 1.5;
  border: 1px solid;
  cursor: pointer;
  transition: all 0.2s ease-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.social-btn-glass:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
}

.social-btn-glass:active {
  transform: scale(0.98);
  transition: all 0.05s ease-out;
}

.social-google {
  background: #ffffff;
  color: #1e293b;
  border-color: rgba(148, 163, 184, 0.3);
}

.social-google:hover {
  background: #f8fafc;
  border-color: rgba(148, 163, 184, 0.5);
}

.social-apple {
  background: #1e293b;
  color: #ffffff;
  border-color: #1e293b;
}

.social-apple:hover {
  background: #334155;
}

.social-facebook {
  background: #1877f2;
  color: #ffffff;
  border-color: #1877f2;
}

.social-facebook:hover {
  background: #1664d8;
}

/* Divider */
.login-divider-glass {
  position: relative;
  display: flex;
  align-items: center;
  margin: 8px 0;
}

.divider-line {
  flex: 1;
  border-top: 1px solid rgba(148, 163, 184, 0.2);
}

.divider-text {
  display: none;
}

/* Form */
.login-form-glass {
  display: flex;
  flex-direction: column;
  gap: 8px;
  animation: fadeIn 0.4s ease-out 0.5s backwards;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.form-label {
  font-size: 14px;
  font-weight: 500;
  color: #1e293b;
  margin-left: 2px;
}

.label-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.forgot-btn {
  background: none !important;
  border: none !important;
  border-radius: 0 !important;
  font-size: 13px;
  font-weight: 500;
  color: #64748b;
  cursor: pointer;
  padding: 0 !important;
  margin: 0 !important;
  min-height: auto !important;
  box-shadow: none !important;
  transition: color 0.2s;
  text-decoration: none;
  white-space: normal !important;
}

.forgot-btn:hover {
  color: #10b981;
  text-decoration: underline;
  background: none !important;
  transform: none !important;
  box-shadow: none !important;
}

.input-wrapper {
  position: relative;
  display: flex;
  align-items: center;
}

.input-icon {
  position: absolute;
  left: 20px;
  top: 50%;
  transform: translateY(-50%);
  width: 20px;
  height: 20px;
  color: #94a3b8;
  pointer-events: none;
  transition: color 0.2s;
  z-index: 1;
}

.input-glass {
  width: 100%;
  padding: 16px 16px 16px 60px !important;
  background: rgba(248, 250, 252, 0.8);
  border: 2px solid rgba(148, 163, 184, 0.2);
  border-radius: 12px;
  font-size: 15px;
  font-weight: 400;
  color: #1e293b;
  transition: all 0.2s;
  box-sizing: border-box;
}

.input-glass::placeholder {
  color: #94a3b8;
  opacity: 1;
}

.input-glass:focus {
  outline: none;
  background: #ffffff;
  border-color: #10b981;
  box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
}

.input-wrapper:focus-within .input-icon {
  color: #10b981;
}

/* Checkbox */
.checkbox-group {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 8px;
}

.checkbox-glass {
  width: 18px;
  height: 18px;
  min-width: 18px;
  min-height: 18px;
  border-radius: 4px;
  cursor: pointer;
  accent-color: #10b981;
  margin: 0;
}

.checkbox-label {
  font-size: 14px;
  font-weight: 400;
  color: #1e293b;
  cursor: pointer;
  user-select: none;
}

/* Submit Button */
.submit-btn-glass {
  position: relative;
  width: 100%;
  margin-top: 20px;
  padding: 14px 16px;
  background: linear-gradient(135deg, #f59e0b 0%, #ea580c 100%);
  color: #ffffff;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 600;
  border: none;
  cursor: pointer;
  box-shadow: 0 4px 16px rgba(245, 158, 11, 0.25);
  transition: all 0.2s;
  overflow: hidden;
}

.submit-btn-glass:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(245, 158, 11, 0.35);
}

.submit-btn-glass:active {
  transform: translateY(0);
  transition: all 0.05s;
}

.submit-text {
  position: relative;
  z-index: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.submit-arrow {
  width: 20px;
  height: 20px;
  transition: transform 0.2s;
}

.submit-btn-glass:hover .submit-arrow {
  transform: translateX(4px);
}

.submit-gradient-overlay {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, #ea580c 0%, #dc2626 100%);
  transform: translateX(-100%);
  transition: transform 0.3s;
  pointer-events: none;
}

.submit-btn-glass:hover .submit-gradient-overlay {
  transform: translateX(0);
}

/* Sign Up Section */
.signup-section {
  margin-top: 24px;
  padding-top: 20px;
  text-align: center;
  border-top: 1px solid rgba(148, 163, 184, 0.15);
  animation: fadeIn 0.4s ease-out 0.6s backwards;
}

.signup-text {
  font-size: 13px;
  font-weight: 400;
  color: #64748b;
  margin: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  flex-wrap: wrap;
}

.signup-link {
  background: none;
  border: 1px solid transparent;
  font-size: 13px;
  font-weight: 600;
  color: #10b981;
  cursor: pointer;
  padding: 8px 16px;
  border-radius: 24px;
  transition: all 0.2s;
  display: inline-block;
}

.signup-link:hover {
  color: #059669;
  background: rgba(16, 185, 129, 0.15);
  border-color: rgba(16, 185, 129, 0.3);
  text-decoration: none;
}

.signup-link:active {
  background: rgba(16, 185, 129, 0.2);
  border-color: rgba(16, 185, 129, 0.4);
}

.terms-text {
  font-size: 12px;
  font-weight: 400;
  color: #94a3b8;
  margin: 16px auto 0 auto;
  line-height: 1.6;
  text-align: center;
  display: block;
  max-width: 100%;
}

.terms-link {
  color: #64748b;
  text-decoration: none;
  transition: color 0.2s;
}

.terms-link:hover {
  color: #1e293b;
  text-decoration: underline;
}

/* Bottom Accent Line */
.login-card-accent-bottom {
  height: 4px;
  background: linear-gradient(90deg, #10b981 0%, #f59e0b 50%, #ea580c 100%);
  animation: accentGrow 0.8s ease-out 0.7s backwards;
  transform-origin: left;
}

@keyframes accentGrow {
  from {
    transform: scaleX(0);
  }

  to {
    transform: scaleX(1);
  }
}

/* ================================
   PERFORMANCE OPTIMIZATIONS
   ================================ */

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {

  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .landing-orb,
  .landing-orb-1,
  .landing-orb-2,
  .landing-orb-3 {
    animation: none !important;
  }
}

/* Global image optimizations */
img {
  /* Prevent layout shifts */
  max-width: 100%;
  height: auto;
  /* Smooth loading */
  image-rendering: -webkit-optimize-contrast;
}

/* Lazy loading support */
img[loading="lazy"] {
  opacity: 0;
  transition: opacity 0.3s ease;
}

img[loading="lazy"].loaded,
img[loading="lazy"]:not([src=""]) {
  opacity: 1;
}

/* View transitions for smoother navigation */
.view {
  /* Contain repaints */
  contain: layout style paint;
  /* Smooth transitions between views */
  transition: opacity 0.2s ease, visibility 0.2s ease;
}

.view.hidden {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

.view.active {
  opacity: 1;
  visibility: visible;
}

/* Scrollbar styling for smoother experience */
* {
  scrollbar-width: thin;
  scrollbar-color: rgba(0, 0, 0, 0.2) transparent;
}

*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

*::-webkit-scrollbar-track {
  background: transparent;
}

*::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 4px;
}

*::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3);
}

/* Focus states for accessibility */
:focus-visible {
  outline: 2px solid var(--accent-primary);
  outline-offset: 2px;
}

/* Touch feedback for mobile */
@media (hover: none) {

  button:active,
  .menu-item:active,
  .feed-card:active {
    transform: scale(0.98);
  }
}

/* Hardware acceleration for frequently animated elements */
.top-bar-wrapper,
.user-dropdown,
.modal-content,
.settings-dropdown,
.notification-dropdown,
.messages-dropdown {
  transform: translateZ(0);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* Smooth content visibility for large lists */
.feed-card,
.route-card,
.user-item,
.favorite-item {
  content-visibility: auto;
  contain-intrinsic-size: 0 200px;
}

/* ================================
   IMAGE LIGHTBOX MODAL
   ================================ */
.image-lightbox-modal {
  position: fixed;
  inset: 0;
  z-index: 10000;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
    visibility 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  pointer-events: none;
}

.image-lightbox-modal:not(.hidden) {
  opacity: 1;
  visibility: visible;
  pointer-events: all;
}

.image-lightbox-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

.image-lightbox-content {
  position: relative;
  z-index: 1;
  max-width: 90vw;
  max-height: 90vh;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: scale(0.9);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.image-lightbox-modal:not(.hidden) .image-lightbox-content {
  transform: scale(1);
}

.image-lightbox-image {
  max-width: 90vw;
  max-height: 90vh;
  width: auto;
  height: auto;
  object-fit: contain;
  border-radius: 8px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
  user-select: none;
  -webkit-user-select: none;
}

.image-lightbox-close {
  position: absolute;
  top: 20px;
  right: 20px;
  z-index: 2;
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.95);
  border: none;
  border-radius: 50%;
  cursor: pointer;
  color: #1f2937;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

.image-lightbox-close:hover {
  background: rgba(255, 255, 255, 1);
  transform: scale(1.1);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
}

.image-lightbox-close:active {
  transform: scale(0.95);
}

.image-lightbox-close svg {
  width: 20px;
  height: 20px;
  stroke-width: 2.5;
}

/* Hacer las imágenes del feed clickables */
.feed-image-container .feed-image,
.feed-images-grid .feed-image {
  cursor: pointer;
  transition: opacity 0.2s ease, transform 0.2s ease;
}

.feed-image-container .feed-image:hover,
.feed-images-grid .feed-image:hover {
  opacity: 0.9;
}

/* Prevenir que el hover del grid sobrescriba el hover del lightbox */
.feed-images-grid img {
  cursor: pointer !important;
}

/* ================================================
   MAPLIBRE GL JS STYLES
   ================================================ */

/* Contenedor del mapa MapLibre */
#maplibre-container {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
}

/* Canvas del mapa */
.maplibregl-canvas-container {
  position: absolute;
  width: 100%;
  height: 100%;
}

/* Popup de MapLibre - Contenedor principal */
.maplibregl-popup {
  max-width: 320px !important;
  z-index: 1000;
}

.maplibregl-popup-content {
  padding: 0 !important;
  border-radius: 12px !important;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25) !important;
  overflow: hidden;
  background: white !important;
}

.maplibregl-popup-close-button {
  font-size: 20px;
  color: #666;
  padding: 8px 12px;
  right: 0;
  top: 0;
  z-index: 10;
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

.maplibregl-popup-close-button:hover {
  color: #333;
  background: transparent !important;
}

/* Punta del popup */
.maplibregl-popup-anchor-bottom .maplibregl-popup-tip {
  border-top-color: white;
}

.maplibregl-popup-anchor-top .maplibregl-popup-tip {
  border-bottom-color: white;
}

/* Contenido personalizado del popup de vía */
.ml-popup-content {
  min-width: 280px;
}

.ml-popup-header {
  padding: 16px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  position: relative;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 12px;
}

.ml-popup-header h3,
.ml-popup-header .ml-popup-title {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  flex: 1;
  line-height: 1.3;
}

.ml-popup-header .ml-sector-name {
  font-size: 13px;
  opacity: 0.9;
  margin: 0;
}

.ml-popup-details {
  padding: 12px 16px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  border-bottom: 1px solid #eee;
}

.ml-popup-body {
  padding: 16px;
}

.ml-popup-info {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.ml-popup-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.ml-popup-label {
  font-size: 13px;
  color: #666;
}

.ml-popup-value {
  font-size: 14px;
  font-weight: 500;
  color: #333;
}

.ml-popup-grade {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 4px 12px;
  border-radius: 16px;
  font-weight: 600;
  font-size: 14px;
  color: white;
  min-width: 48px;
}

.ml-popup-actions {
  display: flex;
  gap: 8px;
  margin-top: 16px;
  padding-top: 12px;
  border-top: 1px solid #eee;
}

.ml-popup-btn {
  flex: 1;
  padding: 10px 16px;
  border: none;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.ml-popup-btn-primary {
  background: #1a73e8;
  color: white;
}

.ml-popup-btn-primary:hover {
  background: #1557b0;
}

.ml-popup-btn-secondary {
  background: #f0f2f5;
  color: #333;
}

.ml-popup-btn-secondary:hover {
  background: #e0e3e8;
}

/* Popup de sector */
.ml-sector-popup .ml-popup-header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.ml-sector-stats {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  margin-top: 12px;
}

.ml-sector-stat {
  text-align: center;
  padding: 12px;
  background: #f8f9fa;
  border-radius: 8px;
}

.ml-sector-stat-value {
  font-size: 20px;
  font-weight: 600;
  color: #333;
}

.ml-sector-stat-label {
  font-size: 12px;
  color: #666;
  margin-top: 2px;
}

/* Popup de parking */
.ml-parking-popup .ml-popup-header {
  background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
}

.ml-parking-info {
  font-size: 14px;
  color: #666;
  line-height: 1.5;
}

/* Controles de navegación MapLibre */
.maplibregl-ctrl-group {
  background: white !important;
  border-radius: 8px !important;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15) !important;
  overflow: hidden;
}

.maplibregl-ctrl-group button {
  width: 36px !important;
  height: 36px !important;
}

.maplibregl-ctrl-group button:hover {
  background-color: #f0f2f5 !important;
}

/* Control de escala */
.maplibregl-ctrl-scale {
  background: rgba(255, 255, 255, 0.9) !important;
  border-radius: 4px !important;
  font-size: 11px !important;
  padding: 2px 6px !important;
}

/* Control de atribución */
.maplibregl-ctrl-attrib {
  background: rgba(255, 255, 255, 0.8) !important;
  font-size: 10px !important;
}

.maplibregl-ctrl-attrib a {
  color: #1a73e8 !important;
}

/* Control de terreno 3D */
.ml-terrain-toggle {
  position: absolute;
  bottom: 120px;
  right: 10px;
  z-index: 100;
}

.ml-terrain-btn {
  width: 36px;
  height: 36px;
  background: white;
  border: none;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  transition: all 0.2s;
}

.ml-terrain-btn:hover {
  background: #f0f2f5;
}

.ml-terrain-btn.active {
  background: #1a73e8;
  color: white;
}

/* Indicador de carga del mapa */
.ml-loading-indicator {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(255, 255, 255, 0.95);
  padding: 20px 30px;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  z-index: 1000;
}

.ml-loading-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid #e0e0e0;
  border-top-color: #1a73e8;
  border-radius: 50%;
  animation: ml-spin 1s linear infinite;
}

@keyframes ml-spin {
  to {
    transform: rotate(360deg);
  }
}

.ml-loading-text {
  font-size: 14px;
  color: #666;
}

/* Responsive para móviles */
@media (max-width: 768px) {
  .maplibregl-popup {
    max-width: 280px !important;
  }

  .ml-popup-content {
    min-width: 240px;
  }

  .ml-popup-header h3 {
    font-size: 16px;
  }

  .ml-popup-btn {
    padding: 8px 12px;
    font-size: 12px;
  }

  .ml-terrain-toggle {
    bottom: 160px;
  }
}

/* ================================================
   NUEVO POPUP DE VÍAS - DISEÑO PREMIUM
   ================================================ */

.ml-route-popup-new {
  min-width: 300px;
  max-width: 360px;
  padding: 20px;
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif;
}

/* Header: Nombre + Grado */
.ml-route-header {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 16px;
}

.ml-route-name {
  font-size: 22px;
  font-weight: 600;
  color: #1f2937;
  /* flex: 1 removed to keep elements close */
  line-height: 1.2;
}

.ml-route-grade {
  padding: 6px 14px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 700;
  color: white;
  flex-shrink: 0;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

/* Info items con iconos */
.ml-route-info {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 20px;
}

.ml-route-item {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 12px 16px;
  background: #f8f9fa;
  border-radius: 12px;
  transition: background 0.2s;
}

.ml-route-item:hover {
  background: #f0f1f3;
}

.ml-route-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  flex-shrink: 0;
}

.ml-route-icon svg {
  width: 28px;
  height: 28px;
}

.ml-route-text {
  font-size: 16px;
  font-weight: 500;
  color: #374151;
}

/* Botonera de acciones */
.ml-route-actions {
  display: flex;
  justify-content: space-around;
  align-items: center;
  padding-top: 16px;
  border-top: 1px solid #e5e7eb;
  gap: 8px;
}

.ml-route-action-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 56px;
  height: 56px;
  border: none !important;
  background: transparent !important;
  border-radius: 50%;
  cursor: pointer;
  color: #6b7280;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: none !important;
}

.ml-route-action-btn:hover {
  background: transparent !important;
  color: #374151;
  transform: scale(1.15);
}

.ml-route-action-btn:active {
  transform: scale(0.95);
}

.ml-route-action-btn svg {
  width: 32px;
  height: 32px;
}

/* Estados activos para botones */
.ml-route-action-btn.active {
  background: transparent !important;
  color: #16a34a;
  box-shadow: none !important;
}

.ml-route-action-btn.favorite-active {
  background: transparent !important;
  color: #db2777;
  box-shadow: none !important;
}

.ml-route-action-btn.favorite-active svg {
  fill: #db2777;
}

.ml-route-action-btn.bookmark-active {
  background: transparent !important;
  color: #d97706;
  box-shadow: none !important;
}

.ml-route-action-btn.bookmark-active svg {
  fill: #d97706;
}

/* Info de usuario que subió la vía */
.ml-route-uploaded-by {
  font-size: 11px;
  color: #9ca3af;
  text-align: center;
  padding-top: 10px;
  margin-top: 4px;
}

/* Botón Ver vía */
.ml-route-view-section {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid #e5e7eb;
}

.ml-route-view-btn {
  width: 100%;
  padding: 12px 16px;
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  border: none;
  border-radius: 8px;
  color: #ffffff;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  transition: all 0.2s;
  box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
}

.ml-route-view-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
}

.ml-route-view-btn:active {
  transform: translateY(0);
}

.ml-route-view-btn svg {
  flex-shrink: 0;
}

/* Ajustes para el popup de MapLibre */
.maplibregl-popup.ml-route-popup .maplibregl-popup-content {
  padding: 0 !important;
  border-radius: 16px !important;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12), 0 4px 10px rgba(0, 0, 0, 0.08) !important;
}

/* Responsive */
@media (max-width: 768px) {
  .ml-route-popup-new {
    min-width: 260px;
    max-width: 300px;
    padding: 16px;
  }

  .ml-route-name {
    font-size: 18px;
  }

  .ml-route-grade {
    padding: 5px 12px;
    font-size: 14px;
  }

  .ml-route-item {
    padding: 10px 14px;
  }

  .ml-route-text {
    font-size: 14px;
  }

  .ml-route-action-btn {
    width: 42px;
    height: 42px;
  }

  .ml-route-action-btn svg {
    width: 20px;
    height: 20px;
  }
}

/* ============================================
   SECTOR POPUP STYLES
   ============================================ */

.ml-sector-popup-container .maplibregl-popup-content {
  padding: 0;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.18);
}

.ml-sector-popup {
  background: linear-gradient(145deg, #ffffff 0%, #f3f4f6 100%);
  padding: 20px;
  min-width: 300px;
  max-width: 360px;
}

.ml-sector-header {
  font-size: 20px;
  font-weight: 700;
  color: #1f2937;
  margin-bottom: 16px;
  padding-bottom: 12px;
  border-bottom: 2px solid #e5e7eb;
  text-align: center;
}

.ml-sector-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 0;
  border-bottom: 1px solid #f3f4f6;
}

.ml-sector-row:last-of-type {
  border-bottom: none;
}

.ml-sector-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.ml-sector-icon img {
  width: 32px;
  height: 32px;
  object-fit: contain;
}

.ml-sector-text {
  font-size: 15px;
  color: #374151;
}

.ml-sector-chart {
  margin-top: 16px;
  padding: 16px;
  background: rgba(255, 255, 255, 0.8);
  border-radius: 12px;
  border: 1px solid #e5e7eb;
  min-height: 130px;
}

/* Responsive adjustments for sector popup */
@media (max-width: 480px) {
  .ml-sector-popup {
    min-width: 280px;
    max-width: 320px;
    padding: 16px;
  }

  .ml-sector-header {
    font-size: 18px;
  }

  .ml-sector-icon img {
    width: 28px;
    height: 28px;
  }

  .ml-sector-text {
    font-size: 14px;
  }
}

/* ============================================
   PARKING POPUP
   ============================================ */

.ml-parking-popup-container .maplibregl-popup-content {
  padding: 0;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
}

.ml-parking-popup {
  padding: 16px;
  min-width: 220px;
}

.ml-parking-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 12px;
}

.ml-parking-icon {
  font-size: 28px;
}

.ml-parking-name {
  font-size: 18px;
  font-weight: 600;
  color: #1f2937;
}

.ml-parking-desc {
  font-size: 14px;
  color: #6b7280;
  margin: 0 0 12px 0;
  line-height: 1.4;
}

.ml-parking-info {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-bottom: 16px;
}

.ml-parking-info span {
  font-size: 14px;
  color: #374151;
}

.ml-parking-btn {
  width: 100%;
  padding: 12px 16px;
  background: #2d2d2d;
  color: white;
  border: 1px solid #1a1a1a;
  border-radius: 10px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
  transition: all 0.2s;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.ml-parking-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
  background: #3d3d3d;
  border-color: #2a2a2a;
}

/* ============================================
   SCHOOL MARKERS
   ============================================ */

/* Global fix for MapLibre/Mapbox markers drift */
.maplibregl-marker,
.mapboxgl-marker {
  max-width: none !important;
  max-height: none !important;
  width: auto;
  height: auto;
}

.ml-school-marker {
  /* Fix for marker drift: use fixed dimensions and prevent overflow expansion */
  position: relative;
  width: 44px !important;
  height: 44px !important;
  min-width: 44px !important;
  min-height: 44px !important;
  max-width: 44px !important;
  max-height: 44px !important;
  cursor: pointer;
  /* Prevent any overflow from affecting anchor point */
  overflow: visible;
  /* Ensure box-sizing doesn't affect dimensions */
  box-sizing: content-box !important;
  padding: 0 !important;
  margin: 0 !important;
  border: none !important;
}

.ml-school-marker svg {
  /* Position SVG exactly at the container bounds - no offset needed */
  position: absolute;
  top: 0;
  left: 0;
  width: 44px !important;
  height: 44px !important;
  display: block;
  /* Prevent any inherited transforms that could cause drift */
  transform: none !important;
  transform-origin: center center !important;
  /* Prevent size changes */
  max-width: none !important;
  max-height: none !important;
  min-width: 44px !important;
  min-height: 44px !important;
}

.ml-school-marker:hover svg {
  /* Scale from center to avoid drift on hover */
  transform: scale(1.1) !important;
  transform-origin: center center !important;
  transition: transform 0.2s ease-out;
}

.ml-school-label {
  /* Label is positioned outside the marker box - doesn't affect anchor */
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  margin-top: 4px;
  white-space: nowrap;
  background: rgba(255, 255, 255, 0.95);
  color: #1f2937;
  padding: 6px 12px;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;
  pointer-events: none;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

/* ============================================
   SCHOOL POPUP (New Redesign)
   ============================================ */

.ml-school-popup .maplibregl-popup-content {
  padding: 0;
  border-radius: 20px;
  overflow: hidden;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.18);
  background: white;
}

.ml-school-popup .maplibregl-popup-close-button {
  display: none;
}

.ml-school-popup-content {
  padding: 20px;
  width: 320px;
  background: white;
  display: flex;
  flex-direction: column;
  gap: 12px;
  position: relative;
}

/* Botón cerrar personalizado - X flotante */
.ml-popup-close-btn {
  /* Sobrescribir estilos globales de button */
  position: absolute !important;
  top: 12px !important;
  right: 12px !important;
  width: 32px !important;
  height: 32px !important;
  border: none !important;
  background: none !important;
  border-radius: 0 !important;
  font-size: 20px !important;
  color: #6b7280 !important;
  cursor: pointer !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  transition: color 0.2s !important;
  z-index: 10 !important;
  outline: none !important;
  box-shadow: none !important;
  padding: 0 !important;
  min-height: auto !important;
  white-space: normal !important;
  transform: none !important;
  -webkit-tap-highlight-color: transparent !important;
  border-width: 0 !important;
  border-style: none !important;
  border-color: transparent !important;
}

.ml-popup-close-btn:hover {
  background: none !important;
  color: #374151 !important;
  transform: none !important;
  box-shadow: none !important;
}

.ml-popup-close-btn:focus {
  outline: none !important;
  box-shadow: none !important;
  background: none !important;
  transform: none !important;
}

.ml-popup-close-btn:active {
  background: none !important;
  box-shadow: none !important;
  transform: none !important;
}

.ml-school-title {
  font-size: 22px;
  font-weight: 700;
  color: #1f2937;
  margin: 0;
  text-align: left;
  padding-right: 40px;
}

/* Sección del gráfico */
.ml-grade-chart-section {
  background: #f8fafc;
  border-radius: 16px;
  padding: 16px;
}

.ml-chart-title {
  font-size: 14px;
  font-weight: 600;
  color: #374151;
  text-align: center;
  margin-bottom: 12px;
}

/* Donut Chart (SVG) */
.ml-grade-chart-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: relative;
}

.ml-donut-chart {
  width: 180px;
  height: 180px;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.ml-donut-chart svg {
  width: 100%;
  height: 100%;
  transform: rotate(-90deg);
}

.ml-donut-segment {
  fill: none;
  stroke-width: 6;
  cursor: pointer;
}

.ml-donut-segment:hover {
  stroke-width: 7;
}

/* Centro del donut - círculo blanco con sombra interior */
.ml-chart-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100px;
  height: 100px;
  background: white;
  border-radius: 50%;
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.08);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1;
}

.ml-chart-center-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  pointer-events: none;
  z-index: 2;
}

.ml-total-vias {
  font-size: 32px;
  font-weight: 300;
  color: #000000;
  line-height: 1;
}

.ml-total-label {
  font-size: 13px;
  color: #9ca3af;
  text-transform: capitalize;
  margin-top: 4px;
  font-weight: 400;
}

/* Weather Section */
.ml-weather-section {
  background: #f8fafc;
  border-radius: 16px;
  padding: 12px 16px;
  overflow: hidden;
}

.ml-weather-current {
  display: flex;
  align-items: center;
  gap: 12px;
}

.ml-weather-icon {
  width: 48px;
  height: 48px;
  object-fit: contain;
}

.ml-precip-icon {
  width: 14px;
  height: 14px;
  vertical-align: middle;
  margin-right: 2px;
}

.ml-weather-temp-container {
  display: flex;
  align-items: center;
  gap: 4px;
}

.ml-weather-temp {
  font-size: 28px;
  font-weight: 300;
  color: #1f2937;
  letter-spacing: -1px;
}

.ml-weather-toggle-btn {
  /* Sobrescribir estilos globales de button */
  width: 24px !important;
  height: 24px !important;
  border: none !important;
  background: none !important;
  color: #9ca3af !important;
  cursor: pointer !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  transition: transform 0.3s ease, color 0.2s ease !important;
  padding: 0 !important;
  outline: none !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  min-height: auto !important;
  white-space: normal !important;
  transform: none !important;
  -webkit-tap-highlight-color: transparent !important;
  border-width: 0 !important;
  border-style: none !important;
  border-color: transparent !important;
}

.ml-weather-toggle-btn:hover {
  color: #6b7280 !important;
  background: none !important;
  transform: none !important;
  box-shadow: none !important;
}

.ml-weather-toggle-btn:focus {
  outline: none !important;
  box-shadow: none !important;
  background: none !important;
}

.ml-weather-toggle-btn:active {
  background: none !important;
  box-shadow: none !important;
  transform: none !important;
}

.ml-weather-toggle-btn.expanded {
  transform: rotate(180deg) !important;
}

.ml-weather-details {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
  font-size: 12px;
  color: #6b7280;
}

/* Pronóstico semanal */
.ml-weather-forecast {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid #e5e7eb;
  max-height: 180px;
  overflow-y: auto;
}

.ml-weather-forecast.hidden {
  display: none;
}

.ml-forecast-day {
  padding: 10px 0;
  border-bottom: 1px solid #f3f4f6;
}

.ml-forecast-day:last-child {
  border-bottom: none;
}

.ml-forecast-date {
  font-size: 11px;
  font-weight: 600;
  color: #6b7280;
  text-transform: uppercase;
  margin-bottom: 6px;
  letter-spacing: 0.5px;
}

.ml-forecast-content {
  display: flex;
  align-items: center;
  gap: 12px;
}

.ml-forecast-temps {
  display: flex;
  flex-direction: column;
  min-width: 50px;
}

.ml-temp-max {
  font-size: 16px;
  font-weight: 600;
  color: #1f2937;
}

.ml-temp-min {
  font-size: 14px;
  color: #9ca3af;
}

.ml-forecast-icon {
  width: 36px;
  height: 36px;
  object-fit: contain;
}

.ml-forecast-details {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
  font-size: 12px;
  color: #6b7280;
}

.ml-forecast-precip {
  color: #3b82f6;
}

.ml-forecast-wind {
  color: #6b7280;
}

.ml-forecast-loading {
  text-align: center;
  padding: 20px;
  color: #9ca3af;
  font-size: 13px;
}

/* Tipo de roca */
.ml-rock-type {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 8px;
  border-top: 1px solid #f3f4f6;
  transition: opacity 0.3s ease;
}

.ml-rock-type.hidden {
  display: none;
}

.ml-rock-icon {
  font-size: 18px;
}

.ml-rock-text {
  font-size: 14px;
  font-weight: 500;
  color: #374151;
}

/* Botones de acción */
.ml-school-actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 4px;
}

.ml-school-btn {
  width: 100%;
  padding: 12px 20px;
  border-radius: 12px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  transition: all 0.2s ease;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.ml-school-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

.ml-school-btn-directions {
  background: #2d2d2d;
  color: white;
  border: 1px solid #1a1a1a;
}

.ml-school-btn-directions:hover {
  background: #3d3d3d;
  border-color: #2a2a2a;
}

.ml-school-btn-visit {
  background: white;
  color: #2d2d2d;
  border: 1px solid #e5e7eb;
}

.ml-school-btn-visit:hover {
  background: #f9fafb;
  border-color: #d1d5db;
}

/* Utility class */
.hidden {
  display: none !important;
}

/* Responsive */
@media (max-width: 480px) {
  .ml-school-popup-content {
    width: 290px;
    padding: 16px;
  }

  .ml-school-title {
    font-size: 20px;
  }

  .ml-donut-chart {
    width: 160px;
    height: 160px;
  }

  .ml-chart-center {
    width: 85px;
    height: 85px;
  }

  .ml-total-vias {
    font-size: 26px;
  }

  .ml-weather-temp {
    font-size: 24px;
  }

  .ml-school-btn {
    padding: 10px 16px;
    font-size: 14px;
  }

  .ml-parking-popup {
    min-width: 200px;
  }
}

/* ================================
   PWA STYLES
   ================================ */

/* Toast de actualización PWA */
.pwa-update-toast {
  position: fixed;
  bottom: calc(env(safe-area-inset-bottom, 0px) + 80px);
  left: 50%;
  transform: translateX(-50%);
  background: linear-gradient(135deg, #1a1a2e 0%, #2d2d44 100%);
  color: white;
  padding: 14px 20px;
  border-radius: 16px;
  display: flex;
  align-items: center;
  gap: 12px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
  z-index: 10000;
  animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  max-width: calc(100vw - 32px);
}

.pwa-update-toast span {
  font-size: 14px;
  font-weight: 500;
  white-space: nowrap;
}

.pwa-update-toast button {
  padding: 8px 16px;
  border-radius: 10px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
}

.pwa-update-toast button:first-of-type {
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
  color: white;
}

.pwa-update-toast button:first-of-type:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
}

.pwa-update-toast button.dismiss {
  background: rgba(255, 255, 255, 0.1);
  color: white;
  padding: 8px 10px;
}

.pwa-update-toast button.dismiss:hover {
  background: rgba(255, 255, 255, 0.2);
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translate(-50%, 20px);
  }

  to {
    opacity: 1;
    transform: translate(-50%, 0);
  }
}

/* Indicador de modo offline */
body.offline::before {
  content: "Sin conexión";
  position: fixed;
  top: env(safe-area-inset-top, 0px);
  left: 0;
  right: 0;
  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
  color: white;
  text-align: center;
  padding: 8px 16px;
  font-size: 13px;
  font-weight: 600;
  z-index: 10001;
  animation: fadeIn 0.3s ease;
}

body.offline .top-bar-wrapper {
  top: calc(env(safe-area-inset-top, 0px) + 36px);
}

body.offline #auth-container {
  top: calc(env(safe-area-inset-top, 8px) + 36px);
}

/* Ajustes para modo standalone (PWA instalada) */
body.pwa-standalone {
  /* Ajustar padding para la status bar del sistema */
  padding-top: env(safe-area-inset-top, 0px);
}

body.pwa-standalone .top-bar-wrapper {
  top: env(safe-area-inset-top, 0px);
}

body.pwa-standalone #auth-container {
  top: calc(env(safe-area-inset-top, 0px) + 8px);
}

body.pwa-standalone .bottom-nav {
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

body.pwa-standalone .feed-header {
  padding-top: calc(env(safe-area-inset-top, 0px) + 8px);
}

/* Banner de instalación PWA */
.pwa-install-banner {
  position: fixed;
  bottom: calc(env(safe-area-inset-bottom, 0px) + 80px);
  left: 16px;
  right: 16px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 16px 20px;
  border-radius: 16px;
  display: flex;
  align-items: center;
  gap: 16px;
  box-shadow: 0 10px 40px rgba(102, 126, 234, 0.4);
  z-index: 9999;
  animation: slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1);
}

.pwa-install-banner .install-icon {
  width: 48px;
  height: 48px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.pwa-install-banner .install-icon img {
  width: 32px;
  height: 32px;
  border-radius: 6px;
}

.pwa-install-banner .install-content {
  flex: 1;
}

.pwa-install-banner .install-title {
  font-size: 15px;
  font-weight: 700;
  margin-bottom: 4px;
}

.pwa-install-banner .install-subtitle {
  font-size: 13px;
  opacity: 0.9;
}

.pwa-install-banner .install-actions {
  display: flex;
  gap: 8px;
  flex-shrink: 0;
}

.pwa-install-banner .install-btn {
  padding: 10px 18px;
  border-radius: 10px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  border: none;
  background: white;
  color: #6366f1;
  transition: transform 0.2s ease;
}

.pwa-install-banner .install-btn:hover {
  transform: scale(1.05);
}

.pwa-install-banner .dismiss-btn {
  background: transparent;
  border: none;
  color: white;
  opacity: 0.7;
  cursor: pointer;
  padding: 8px;
  margin: -8px;
  font-size: 20px;
  line-height: 1;
}

.pwa-install-banner .dismiss-btn:hover {
  opacity: 1;
}

/* Animación de carga skeleton */
@keyframes shimmer {
  0% {
    background-position: -200px 0;
  }

  100% {
    background-position: calc(200px + 100%) 0;
  }
}

.skeleton {
  background: linear-gradient(90deg, #f0f0f0 0px, #e0e0e0 40px, #f0f0f0 80px);
  background-size: 200px 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 4px;
}

/* Indicador de sincronización */
.sync-indicator {
  position: fixed;
  top: calc(env(safe-area-inset-top, 0px) + 60px);
  right: 16px;
  background: rgba(16, 185, 129, 0.95);
  color: white;
  padding: 10px 16px;
  border-radius: 12px;
  font-size: 13px;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 8px;
  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
  z-index: 9998;
  animation: fadeIn 0.3s ease;
}

.sync-indicator svg {
  width: 18px;
  height: 18px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(360deg);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

/* Ajustes responsivos para PWA */
@media (display-mode: standalone) {

  /* Estilos específicos para cuando la app está instalada */
  .top-bar-wrapper {
    padding-top: env(safe-area-inset-top, 0px);
  }
}

@media (max-width: 480px) {
  .pwa-install-banner {
    flex-direction: column;
    text-align: center;
    padding: 20px;
  }

  .pwa-install-banner .install-actions {
    width: 100%;
    justify-content: center;
  }

  .pwa-update-toast {
    flex-direction: column;
    gap: 10px;
    text-align: center;
    bottom: calc(env(safe-area-inset-bottom, 0px) + 90px);
  }
}

/* ================================
   ESTILOS WEB (los estilos móviles están en app-mobile.css)
   ================================ */
/* ================================
   SEARCH VIEW STYLES
   ================================ */
#search-view {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  display: block;
  background: var(--bg-primary);
}

.search-scroll-container {
  padding: 20px;
  padding-bottom: 100px;
  max-width: 900px;
  margin: 0 auto;
}

.search-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
  padding-top: max(20px, env(safe-area-inset-top));
}

.search-title {
  font-size: 28px;
  font-weight: 700;
  color: var(--text-primary);
  margin: 0;
}

.search-body {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

@media (max-width: 640px) {
  .search-scroll-container {
    padding: 16px;
  }

  .search-title {
    font-size: 24px;
  }
}

/* ================================
   PROFILE VIEW HEADER (Back button for other profiles)
   ================================ */
.profile-view-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  padding-top: max(12px, env(safe-area-inset-top));
  background: var(--bg-primary);
  border-bottom: 1px solid var(--border-color);
  position: sticky;
  top: 0;
  z-index: 100;
}

.profile-view-title {
  font-size: 17px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
  flex: 1;
  text-align: center;
}

.profile-header-username {
  font-size: 16px;
  font-weight: 400;
  color: var(--text-secondary);
  margin: 0;
  flex: 1;
  text-align: center;
}

.back-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  background: transparent;
  border: none;
  border-radius: var(--radius-full);
  cursor: pointer;
  color: var(--text-primary);
  transition: background var(--transition-fast);
}

.back-btn:hover {
  background: var(--bg-secondary);
}

.back-btn:active {
  transform: scale(0.95);
}

.header-spacer {
  width: 44px;
}

/* Primary button variant for Follow */
.profile-btn-primary {
  background: var(--accent-primary) !important;
  color: #fff !important;
}

.profile-btn-primary:hover {
  background: var(--accent-secondary) !important;
}

.profile-btn-primary.following {
  background: #f3f4f6 !important;
  color: #1f2937 !important;
}

/* ================================
   MOBILE AUTH OVERRIDES
   ================================ */
/* Hide desktop landing page when mobile onboarding/login is active */
.mobile-onboarding:not(.hidden)~.landing-page,
.mobile-login-modal:not(.hidden)~.landing-page {
  display: none !important;
}

/* ================================
   BOTTOM SHEET - Escuelas (Mobile Only)
   Comportamiento dinámico con intercambio de gráficos
   ================================ */

/* Contenedor principal */
.bottom-sheet {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  background: #ffffff;
  border-radius: 20px 20px 0 0;
  box-shadow: 0 -8px 40px rgba(0, 0, 0, 0.2);
  z-index: 2000;
  transform: translateY(100%);
  transition: transform 0.4s cubic-bezier(0.32, 0.72, 0, 1);
  max-height: 92vh;
  will-change: transform;
  display: flex;
  flex-direction: column;
}

.bottom-sheet.hidden {
  display: none;
}

/* Snap Points: 42% (resumen) y 85% (expandido) */
.bottom-sheet.snap-summary {
  transform: translateY(calc(100% - 42vh));
}

.bottom-sheet.snap-expanded {
  transform: translateY(3%);
  max-height: 95vh;
}

/* Handle para arrastrar */
.bottom-sheet-handle {
  display: flex;
  justify-content: center;
  padding: 12px 0 8px;
  cursor: grab;
  touch-action: none;
  flex-shrink: 0;
}

.bottom-sheet-handle:active {
  cursor: grabbing;
}

.bottom-sheet-handle-bar {
  width: 36px;
  height: 5px;
  background: #d1d5db;
  border-radius: 3px;
}

/* Header con título centrado */
.bs-header {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 20px 8px;
  flex-shrink: 0;
  position: relative;
}

.bs-title {
  font-size: 18px;
  font-weight: 700;
  color: #1f2937;
  margin: 0;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Contenido scrollable */
.bottom-sheet-content {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 0 16px;
  padding-bottom: calc(40px + env(safe-area-inset-bottom, 20px));
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}

/* ========================================
   CARD COMPARTIDA PARA GRÁFICOS
   ======================================== */
.bs-chart-card {
  background: #f8f9fa;
  border-radius: 16px;
  padding: 16px;
  margin-bottom: 16px;
}

.bs-chart-header {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-bottom: 16px;
}

.bs-chart-title {
  font-size: 15px;
  font-weight: 600;
  color: #374151;
}

.bs-chart-total {
  font-size: 14px;
  color: #9ca3af;
  font-weight: 400;
}

/* ========================================
   SKELETON LOADERS
   ======================================== */
.bs-skeleton {
  padding: 8px 0;
}

.bs-skeleton-bars {
  display: flex;
  align-items: flex-end;
  justify-content: center;
  gap: 8px;
  height: 100px;
}

.bs-skeleton-bar {
  width: 24px;
  background: linear-gradient(90deg, #e5e7eb 25%, #f3f4f6 50%, #e5e7eb 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 4px 4px 2px 2px;
}

.bs-skeleton-bar:nth-child(1) {
  height: 30%;
}

.bs-skeleton-bar:nth-child(2) {
  height: 50%;
}

.bs-skeleton-bar:nth-child(3) {
  height: 70%;
}

.bs-skeleton-bar:nth-child(4) {
  height: 90%;
}

.bs-skeleton-bar:nth-child(5) {
  height: 60%;
}

.bs-skeleton-bar:nth-child(6) {
  height: 40%;
}

.bs-skeleton-bar:nth-child(7) {
  height: 25%;
}

.bs-skeleton-bar:nth-child(8) {
  height: 15%;
}

.bs-skeleton-donut {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px 0;
}

.bs-skeleton-ring {
  width: 180px;
  height: 180px;
  border-radius: 50%;
  border: 24px solid #e5e7eb;
  background: linear-gradient(90deg, #e5e7eb 25%, #f3f4f6 50%, #e5e7eb 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  position: relative;
}

.bs-skeleton-ring::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 60px;
  height: 20px;
  background: #e5e7eb;
  border-radius: 4px;
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }

  100% {
    background-position: 200% 0;
  }
}

.bs-skeleton.hidden,
.bs-skeleton-donut.hidden {
  display: none;
}

/* ========================================
   SNAP 1 - RESUMEN: BarChart visible
   ======================================== */
.bs-summary-section {
  transition: opacity 0.3s ease, max-height 0.3s ease;
}

/* Ocultar BarChart cuando está expandido */
.bottom-sheet.snap-expanded .bs-summary-section {
  opacity: 0;
  max-height: 0;
  overflow: hidden;
  margin: 0;
  padding: 0;
}

/* Gráfico de Barras */
.bs-bar-chart {
  display: flex;
  align-items: flex-end;
  justify-content: center;
  gap: 6px;
  height: 110px;
  padding: 0 4px;
}

.bs-bar-chart.hidden {
  display: none;
}

.bs-bar-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 24px;
  min-width: 20px;
}

.bs-bar-count {
  font-size: 11px;
  font-weight: 600;
  color: #374151;
  margin-bottom: 4px;
  min-height: 14px;
}

.bs-bar {
  width: 100%;
  min-height: 6px;
  border-radius: 4px 4px 2px 2px;
  transform-origin: bottom;
  animation: barGrow 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  animation-delay: var(--bar-delay, 0s);
}

.bs-bar-label {
  font-size: 10px;
  color: #6b7280;
  margin-top: 6px;
  font-weight: 500;
}

/* ========================================
   SNAP 2 - EXPANDIDO: DonutChart + resto
   ======================================== */
.bs-expanded-section {
  opacity: 0;
  max-height: 0;
  overflow: hidden;
  transition: opacity 0.3s ease 0.1s, max-height 0.4s ease;
}

.bottom-sheet.snap-expanded .bs-expanded-section {
  opacity: 1;
  max-height: 2000px;
}

/* Donut Chart */
.bs-donut-chart {
  position: relative;
  width: 200px;
  height: 200px;
  margin: 0 auto;
}

.bs-donut-chart.hidden {
  display: none;
}

.bs-donut-chart svg {
  width: 100%;
  height: 100%;
  transform: rotate(-90deg);
}

.bs-donut-chart {
  position: relative;
  width: 200px;
  height: 200px;
  margin: 0 auto;
}

.bs-donut-chart svg {
  width: 100%;
  height: 100%;
  transform: rotate(-90deg);
}

.bs-donut-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  pointer-events: none;
}

.bs-donut-total {
  font-size: 42px;
  font-weight: 700;
  color: #1a1a2e;
  line-height: 1;
}

.bs-donut-label {
  font-size: 14px;
  color: #9ca3af;
  margin-top: 2px;
}

/* ========================================
   WIDGET METEOROLÓGICO (según mockup 2)
   ======================================== */
.bs-weather-card {
  background: #f3f4f6;
  border-radius: 16px;
  padding: 16px 20px;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 16px;
}

.bs-weather-left {
  display: flex;
  align-items: center;
  gap: 8px;
}

.bs-weather-icon {
  width: 40px;
  height: 40px;
  object-fit: contain;
  opacity: 0.8;
}

.bs-weather-temp-wrap {
  display: flex;
  align-items: center;
  gap: 4px;
}

.bs-weather-temp {
  font-size: 28px;
  font-weight: 300;
  color: #374151;
  letter-spacing: -0.5px;
}

.bs-weather-chevron {
  color: #9ca3af;
}

.bs-weather-right {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.bs-weather-row {
  display: flex;
  align-items: center;
  gap: 6px;
}

.bs-weather-label {
  font-size: 13px;
  color: #6b7280;
}

.bs-weather-value {
  font-size: 13px;
  color: #374151;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 4px;
}

/* Indicador de expandir en Weather Card */
.bs-weather-expand-indicator {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-left: auto;
  padding-left: 8px;
  transition: transform 0.3s ease;
}

.bs-weather-card.expanded .bs-weather-expand-indicator {
  transform: rotate(180deg);
}

/* Hacer el weather card clickeable */
.bs-weather-card {
  cursor: pointer;
  transition: background 0.2s ease, transform 0.1s ease;
  position: relative;
}

.bs-weather-card:active {
  transform: scale(0.98);
  background: #e5e7eb;
}

/* ========================================
   PANEL DE PRONÓSTICO SEMANAL (OVERLAY)
   ======================================== */
.bs-forecast-panel {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  background: #ffffff;
  border-radius: 16px;
  z-index: 10;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  max-height: 260px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  transform: translateY(-10px);
  opacity: 0;
  transition: transform 0.3s cubic-bezier(0.32, 0.72, 0, 1),
              opacity 0.3s ease;
}

.bs-forecast-panel.hidden {
  display: none;
}

.bs-forecast-panel.visible {
  transform: translateY(0);
  opacity: 1;
}

.bs-forecast-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 16px 12px 16px;
  border-bottom: 1px solid #f3f4f6;
  flex-shrink: 0;
}

.bs-forecast-title {
  font-size: 16px;
  font-weight: 600;
  color: #1a1a2e;
}

.bs-forecast-close {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f3f4f6;
  border: none;
  border-radius: 50%;
  cursor: pointer;
  transition: background 0.15s ease;
  -webkit-tap-highlight-color: transparent;
}

.bs-forecast-close:active {
  background: #e5e7eb;
}

.bs-forecast-close svg {
  stroke: #6b7280;
}

.bs-forecast-scroll {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 8px 16px 16px 16px;
  -webkit-overflow-scrolling: touch;
}

/* Cada día del pronóstico */
.bs-forecast-day {
  display: flex;
  align-items: center;
  padding: 12px 0;
  border-bottom: 1px solid #f3f4f6;
}

.bs-forecast-day:last-child {
  border-bottom: none;
}

.bs-forecast-day-info {
  flex: 1;
  min-width: 0;
}

.bs-forecast-day-name {
  font-size: 14px;
  font-weight: 600;
  color: #1a1a2e;
  margin-bottom: 2px;
}

.bs-forecast-day-date {
  font-size: 12px;
  color: #9ca3af;
}

.bs-forecast-icon-wrap {
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 12px;
}

.bs-forecast-icon-wrap img {
  width: 36px;
  height: 36px;
  object-fit: contain;
}

.bs-forecast-temps {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  min-width: 50px;
  margin-right: 12px;
}

.bs-forecast-temp-max {
  font-size: 15px;
  font-weight: 600;
  color: #1a1a2e;
}

.bs-forecast-temp-min {
  font-size: 13px;
  color: #9ca3af;
}

.bs-forecast-details {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  min-width: 70px;
}

.bs-forecast-precip {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  color: #3b82f6;
}

.bs-forecast-precip img {
  width: 12px;
  height: 12px;
}

.bs-forecast-wind {
  font-size: 11px;
  color: #9ca3af;
  margin-top: 2px;
}

/* Posicionar el panel sobre el Donut Chart */
.bs-expanded-section {
  position: relative;
}

/* ========================================
   TIPO DE ROCA
   ======================================== */
.bs-rock-info {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 20px;
  padding-left: 4px;
}

.bs-rock-icon {
  font-size: 22px;
}

.bs-rock-text {
  font-size: 17px;
  font-weight: 600;
  color: #1a1a2e;
}

/* ========================================
   BOTONES DE ACCIÓN (según mockup)
   ======================================== */
.bs-actions {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding-bottom: 24px;
  margin-bottom: env(safe-area-inset-bottom, 0px);
}

.bs-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 16px 24px;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
  -webkit-tap-highlight-color: transparent;
}

.bs-btn:active {
  transform: scale(0.98);
}

/* Botón oscuro (¿Cómo ir?) */
.bs-btn-dark {
  background: #1f2937;
  color: #ffffff;
  border: none;
}

.bs-btn-dark:active {
  background: #374151;
}

.bs-btn-dark svg {
  stroke: #ffffff;
}

/* Botón claro (Visitar escuela) */
.bs-btn-light {
  background: #ffffff;
  color: #1f2937;
  border: 1px solid #e5e7eb;
}

.bs-btn-light:active {
  background: #f9fafb;
}

/* ========================================
   OVERLAY
   ======================================== */
.bottom-sheet-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0);
  z-index: 1999;
  transition: background 0.3s ease;
  pointer-events: none;
}

.bottom-sheet-overlay.visible {
  background: rgba(0, 0, 0, 0.3);
  pointer-events: auto;
}

.bottom-sheet-overlay.hidden {
  display: none;
}

/* ========================================
   RESPONSIVE - Solo móvil
   ======================================== */
@media (min-width: 769px) {

  .bottom-sheet,
  .bottom-sheet-overlay {
    display: none !important;
  }
}

/* Safe area para iOS */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
  .bottom-sheet-content {
    padding-bottom: calc(40px + env(safe-area-inset-bottom));
  }
}

/* ========================================
   ANIMACIONES
   ======================================== */
@keyframes barGrow {
  from {
    transform: scaleY(0);
  }

  to {
    transform: scaleY(1);
  }
}

.bs-bar {
  transform-origin: bottom;
  animation: barGrow 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  animation-delay: var(--bar-delay, 0s);
}

@keyframes donutDraw {
  from {
    stroke-dashoffset: var(--circumference);
  }

  to {
    stroke-dashoffset: var(--final-offset);
  }
}

.bs-donut-segment {
  animation: donutDraw 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  animation-delay: var(--segment-delay, 0s);
}

/* Fade in para contenido expandido */
@keyframes fadeSlideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.bottom-sheet.snap-expanded .bs-donut-card,
.bottom-sheet.snap-expanded .bs-weather-card,
.bottom-sheet.snap-expanded .bs-rock-info,
.bottom-sheet.snap-expanded .bs-actions {
  animation: fadeSlideUp 0.4s ease forwards;
}

.bottom-sheet.snap-expanded .bs-donut-card {
  animation-delay: 0.05s;
}

.bottom-sheet.snap-expanded .bs-weather-card {
  animation-delay: 0.1s;
}

.bottom-sheet.snap-expanded .bs-rock-info {
  animation-delay: 0.15s;
}

.bottom-sheet.snap-expanded .bs-actions {
  animation-delay: 0.2s;
}

/* ========================================
   DEVELOPER ROUTE EDITOR STYLES
   ======================================== */

/* Modal Overlay */
.dev-route-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  padding: 20px;
  animation: fadeIn 0.2s ease;
}

/* Modal Container */
.dev-route-modal {
  background: white;
  border-radius: 16px;
  width: 100%;
  max-width: 420px;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  animation: slideUp 0.3s ease;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Modal Header */
.dev-route-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 24px;
  border-bottom: 1px solid #eee;
}

.dev-route-modal-header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  color: #1a1a2e;
}

.dev-modal-close {
  width: 32px;
  height: 32px;
  padding: 0;
  border: none;
  background: #f5f5f5;
  border-radius: 50%;
  font-size: 20px;
  color: #666;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
  box-shadow: none;
}

.dev-modal-close:hover {
  background: #e0e0e0;
  color: #333;
  transform: none;
}

/* Modal Body */
.dev-route-modal-body {
  padding: 24px;
}

/* Form Groups */
.dev-form-group {
  margin-bottom: 20px;
}

.dev-form-group label {
  display: block;
  font-size: 13px;
  font-weight: 600;
  color: #555;
  margin-bottom: 8px;
}

.dev-form-group input,
.dev-form-group select {
  width: 100%;
  padding: 12px 14px;
  border: 1px solid #ddd;
  border-radius: 10px;
  font-size: 15px;
  color: #333;
  background: #fafafa;
  transition: all 0.2s;
  box-sizing: border-box;
}

.dev-form-group input:focus,
.dev-form-group select:focus {
  outline: none;
  border-color: #10b981;
  background: white;
  box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
}

.dev-form-group input::placeholder {
  color: #aaa;
}

/* Form Row (2 columns) */
.dev-form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}

.dev-form-row .dev-form-group {
  margin-bottom: 20px;
}

/* Modal Footer */
.dev-route-modal-footer {
  display: flex;
  gap: 12px;
  padding: 16px 24px 24px;
  border-top: 1px solid #eee;
}

.dev-btn-cancel,
.dev-btn-save {
  flex: 1;
  padding: 14px 20px;
  border: none;
  border-radius: 10px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.dev-btn-cancel {
  background: #f5f5f5;
  color: #666;
  box-shadow: none;
}

.dev-btn-cancel:hover {
  background: #e8e8e8;
  transform: none;
}

.dev-btn-save {
  background: #10b981;
  color: white;
  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
}

.dev-btn-save:hover {
  background: #059669;
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
}

/* Dev Toast */
.dev-toast {
  position: fixed;
  bottom: 100px;
  left: 50%;
  transform: translateX(-50%);
  padding: 14px 24px;
  background: #333;
  color: white;
  border-radius: 12px;
  font-size: 14px;
  font-weight: 500;
  z-index: 20000;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
  animation: toastSlideUp 0.3s ease;
  max-width: 90%;
  text-align: center;
}

.dev-toast-info {
  background: #3b82f6;
}

.dev-toast-success {
  background: #10b981;
}

.dev-toast-warning {
  background: #f59e0b;
}

.dev-toast-error {
  background: #ef4444;
}

.dev-toast-hide {
  animation: toastSlideDown 0.3s ease forwards;
}

@keyframes toastSlideUp {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

@keyframes toastSlideDown {
  from {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
  to {
    opacity: 0;
    transform: translateX(-50%) translateY(20px);
  }
}

/* Dev Editor Button Active State */
#btn-dev-editor.active {
  background: #10b981 !important;
  color: white !important;
}

/* Mobile adjustments */
@media (max-width: 480px) {
  .dev-route-modal {
    max-height: 85vh;
    margin-bottom: env(safe-area-inset-bottom);
  }

  .dev-route-modal-body {
    padding: 20px;
  }

  .dev-form-row {
    grid-template-columns: 1fr;
    gap: 0;
  }

  .dev-toast {
    bottom: 80px;
    left: 16px;
    right: 16px;
    transform: none;
    max-width: none;
  }

  .dev-toast-hide {
    animation: toastFadeOut 0.3s ease forwards;
  }

  @keyframes toastFadeOut {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }
}

/* ========================================
   SECTOR IMAGES VIEWER & UPLOAD STYLES
   ======================================== */

/* Botón Ver Sector en el popup */
.ml-sector-view-btn {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 14px 20px;
  margin-top: 16px;
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
}

.ml-sector-view-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
}

.ml-sector-view-btn:active {
  transform: translateY(0);
}

.ml-sector-view-btn svg {
  flex-shrink: 0;
}

/* ========================================
   SECTOR IMAGE VIEWER (Fullscreen)
   ======================================== */

.sector-image-viewer {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: #000;
  z-index: 15000;
  display: flex;
  flex-direction: column;
  animation: fadeIn 0.2s ease;
}

.sector-image-viewer.sector-viewer-closing {
  animation: fadeOut 0.2s ease forwards;
}

/* Viewer Header */
.sector-viewer-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  padding-top: calc(16px + env(safe-area-inset-top));
  background: linear-gradient(to bottom, rgba(0,0,0,0.8) 0%, transparent 100%);
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  z-index: 10;
}

.sector-viewer-close {
  width: 44px;
  height: 44px;
  padding: 0;
  background: rgba(255,255,255,0.15);
  border: none;
  border-radius: 50%;
  color: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s;
  box-shadow: none;
}

.sector-viewer-close:hover {
  background: rgba(255,255,255,0.25);
  transform: none;
}

.sector-viewer-title {
  flex: 1;
  text-align: center;
  color: white;
  font-size: 18px;
  font-weight: 600;
  margin: 0;
  padding: 0 16px;
  text-shadow: 0 1px 3px rgba(0,0,0,0.5);
}

.sector-viewer-upload {
  width: 44px;
  height: 44px;
  padding: 0;
  background: rgba(16, 185, 129, 0.9);
  border: none;
  border-radius: 50%;
  color: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s;
  box-shadow: none;
}

.sector-viewer-upload:hover {
  background: rgba(16, 185, 129, 1);
  transform: none;
}

/* Image Container */
.sector-viewer-image-container {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  touch-action: pinch-zoom;
}

.sector-viewer-image {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  transition: transform 0.1s ease-out;
  user-select: none;
  -webkit-user-drag: none;
}

/* Viewer Footer */
.sector-viewer-footer {
  padding: 16px 20px;
  padding-bottom: calc(16px + env(safe-area-inset-bottom));
  background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 100%);
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  text-align: center;
}

.sector-viewer-hint {
  color: rgba(255,255,255,0.6);
  font-size: 13px;
}

/* Placeholder (sin imagen) */
.sector-viewer-placeholder {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px;
  text-align: center;
}

.sector-placeholder-icon {
  color: rgba(255,255,255,0.3);
  margin-bottom: 24px;
}

.sector-placeholder-text {
  color: rgba(255,255,255,0.6);
  font-size: 16px;
  margin: 0 0 24px;
}

.sector-upload-btn {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 14px 28px;
  background: #10b981;
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
}

.sector-upload-btn:hover {
  background: #059669;
  transform: translateY(-2px);
}

/* ========================================
   SECTOR UPLOAD MODAL
   ======================================== */

.sector-upload-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 16000;
  padding: 20px;
  animation: fadeIn 0.2s ease;
}

.sector-upload-modal {
  background: white;
  border-radius: 20px;
  width: 100%;
  max-width: 480px;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 25px 80px rgba(0, 0, 0, 0.4);
  animation: slideUp 0.3s ease;
}

/* Upload Modal Header */
.sector-upload-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 24px;
  border-bottom: 1px solid #eee;
}

.sector-upload-header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  color: #1a1a2e;
}

.sector-upload-close {
  width: 36px;
  height: 36px;
  padding: 0;
  border: none;
  background: #f5f5f5;
  border-radius: 50%;
  font-size: 22px;
  color: #666;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
  box-shadow: none;
}

.sector-upload-close:hover {
  background: #e0e0e0;
  transform: none;
}

/* Upload Modal Body */
.sector-upload-body {
  padding: 24px;
}

.sector-upload-info {
  background: #f8fafc;
  padding: 16px;
  border-radius: 12px;
  font-size: 14px;
  color: #64748b;
  margin-bottom: 20px;
  line-height: 1.6;
}

.sector-upload-info strong {
  color: #1a1a2e;
}

/* Dropzone */
.sector-upload-dropzone {
  border: 2px dashed #d1d5db;
  border-radius: 16px;
  padding: 40px 20px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s;
  background: #fafafa;
}

.sector-upload-dropzone:hover,
.sector-upload-dropzone.dragover {
  border-color: #6366f1;
  background: #f0f0ff;
}

.dropzone-content svg {
  color: #9ca3af;
  margin-bottom: 16px;
}

.dropzone-content p {
  color: #374151;
  font-size: 15px;
  font-weight: 500;
  margin: 0 0 8px;
}

.dropzone-hint {
  color: #9ca3af;
  font-size: 13px;
}

/* Preview */
.sector-upload-preview {
  position: relative;
  border-radius: 12px;
  overflow: hidden;
  margin-top: 16px;
}

.sector-upload-preview img {
  width: 100%;
  max-height: 300px;
  object-fit: contain;
  background: #f0f0f0;
}

.sector-remove-preview {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 32px;
  height: 32px;
  padding: 0;
  background: rgba(0,0,0,0.6);
  border: none;
  border-radius: 50%;
  color: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s;
  box-shadow: none;
}

.sector-remove-preview:hover {
  background: rgba(0,0,0,0.8);
  transform: none;
}

/* Progress */
.sector-upload-progress {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 16px;
}

.progress-bar {
  flex: 1;
  height: 8px;
  background: #e5e7eb;
  border-radius: 4px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #6366f1, #8b5cf6);
  border-radius: 4px;
  width: 0%;
  transition: width 0.3s ease;
}

.progress-text {
  font-size: 13px;
  font-weight: 600;
  color: #6366f1;
  min-width: 40px;
}

/* Upload Modal Footer */
.sector-upload-footer {
  display: flex;
  gap: 12px;
  padding: 16px 24px 24px;
  border-top: 1px solid #eee;
}

.sector-btn-cancel,
.sector-btn-upload {
  flex: 1;
  padding: 14px 20px;
  border: none;
  border-radius: 12px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.sector-btn-cancel {
  background: #f5f5f5;
  color: #666;
  box-shadow: none;
}

.sector-btn-cancel:hover {
  background: #e8e8e8;
  transform: none;
}

.sector-btn-upload {
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
  color: white;
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
}

.sector-btn-upload:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(99, 102, 241, 0.4);
}

.sector-btn-upload:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Sector Toast */
.sector-toast {
  position: fixed;
  bottom: 100px;
  left: 50%;
  transform: translateX(-50%);
  padding: 14px 24px;
  background: #333;
  color: white;
  border-radius: 12px;
  font-size: 14px;
  font-weight: 500;
  z-index: 20000;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
  animation: toastSlideUp 0.3s ease;
  max-width: 90%;
  text-align: center;
}

.sector-toast-info {
  background: #3b82f6;
}

.sector-toast-success {
  background: #10b981;
}

.sector-toast-warning {
  background: #f59e0b;
}

.sector-toast-error {
  background: #ef4444;
}

.sector-toast-hide {
  animation: toastSlideDown 0.3s ease forwards;
}

/* ========================================
   SECTOR DELETE BUTTON (in viewer header)
   ======================================== */

.sector-viewer-delete {
  width: 40px;
  height: 40px;
  padding: 0;
  border: none;
  background: rgba(239, 68, 68, 0.15);
  border-radius: 12px;
  color: #ef4444;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
  box-shadow: none;
}

.sector-viewer-delete:hover {
  background: rgba(239, 68, 68, 0.25);
  transform: scale(1.05);
}

.sector-viewer-delete:active {
  transform: scale(0.95);
}

/* ========================================
   SECTOR DELETE MODAL
   ======================================== */

.sector-delete-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 17000;
  padding: 20px;
  transition: background 0.2s ease;
}

.sector-delete-modal-overlay.sector-delete-modal-visible {
  background: rgba(0, 0, 0, 0.6);
}

.sector-delete-modal {
  background: white;
  border-radius: 20px;
  width: 100%;
  max-width: 420px;
  box-shadow: 0 25px 80px rgba(0, 0, 0, 0.4);
  transform: scale(0.9);
  opacity: 0;
  transition: all 0.2s ease;
}

.sector-delete-modal-visible .sector-delete-modal {
  transform: scale(1);
  opacity: 1;
}

/* Delete Modal Header */
.sector-delete-header {
  text-align: center;
  padding: 28px 24px 16px;
}

.sector-delete-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 72px;
  height: 72px;
  background: rgba(239, 68, 68, 0.1);
  border-radius: 50%;
  margin-bottom: 16px;
}

.sector-delete-icon svg {
  color: #ef4444;
}

.sector-delete-header h3 {
  margin: 0;
  font-size: 20px;
  font-weight: 600;
  color: #1a1a2e;
}

/* Delete Modal Body */
.sector-delete-body {
  padding: 0 24px 24px;
  text-align: center;
}

.sector-delete-warning {
  font-size: 15px;
  color: #374151;
  margin: 0 0 12px;
  line-height: 1.5;
}

.sector-delete-warning strong {
  color: #1a1a2e;
}

.sector-delete-info {
  font-size: 13px;
  color: #6b7280;
  margin: 0;
  padding: 12px 16px;
  background: #fef3c7;
  border-radius: 10px;
  line-height: 1.5;
}

/* Delete Modal Footer */
.sector-delete-footer {
  display: flex;
  gap: 12px;
  padding: 16px 24px 24px;
  border-top: 1px solid #eee;
}

.sector-btn-delete {
  flex: 1;
  padding: 14px 20px;
  border: none;
  border-radius: 12px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
  color: white;
  box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.sector-btn-delete:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(239, 68, 68, 0.4);
}

.sector-btn-delete:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

/* Delete Spinner Animation */
.sector-delete-spinner {
  animation: sectorDeleteSpin 1s linear infinite;
}

@keyframes sectorDeleteSpin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* Mobile adjustments */
@media (max-width: 480px) {
  .sector-delete-modal {
    max-width: 100%;
    margin: 16px;
  }

  .sector-delete-header {
    padding: 24px 20px 12px;
  }

  .sector-delete-body {
    padding: 0 20px 20px;
  }

  .sector-delete-footer {
    padding: 12px 20px 20px;
    flex-direction: column;
  }

  .sector-delete-footer .sector-btn-cancel,
  .sector-delete-footer .sector-btn-delete {
    width: 100%;
  }
}

/* Mobile adjustments */
@media (max-width: 480px) {
  .sector-upload-modal {
    max-height: 85vh;
    margin-bottom: env(safe-area-inset-bottom);
  }

  .sector-upload-body {
    padding: 20px;
  }

  .sector-upload-dropzone {
    padding: 30px 16px;
  }

  .sector-toast {
    bottom: 80px;
    left: 16px;
    right: 16px;
    transform: none;
    max-width: none;
  }
}